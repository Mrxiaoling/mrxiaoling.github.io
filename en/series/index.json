[{"content":"Markdownify box This is boxmd shortcode Simple box This is **box** shortcode\r Code tabs Make it easy to switch between different code\njava\rjavascript\r\r1  System.out.println(\u0026#39;Hello World!\u0026#39;);\r  \r\r1  console.log(\u0026#39;Hello World!\u0026#39;);\r  \r\r\r\r'use strict';\rvar containerId = JSON.parse(\"\\\"c3a7395d19726e47\\\"\");\rvar containerElem = document.getElementById(containerId);\rvar codetabLinks = null;\rvar codetabContents = null;\rvar ids = [];\rif (containerElem) {\rcodetabLinks = containerElem.querySelectorAll('.codetab__link');\rcodetabContents = containerElem.querySelectorAll('.codetab__content');\r}\rfor (var i = 0; i 0) {\rcodetabContents[0].style.display = 'block';\r}\r Tabs for general purpose Windows\rMacOS\rUbuntu\r\rWindows section 1  console.log(\u0026#39;Hello World!\u0026#39;);\r  âš ï¸Becareful that the content in the tab should be different from each other. The tab makes unique id hashes depending on the tab contents. So, If you just copy-paste the tabs with multiple times, since it has the same contents, the tab will not work.\n\rMacOS section Hello world!\r\rUbuntu section Great!\r\r\r\r'use strict';\rvar containerId = JSON.parse(\"\\\"5c92b60c8ec7870a\\\"\");\rvar containerElem = document.getElementById(containerId);\rvar tabLinks = null;\rvar tabContents = null;\rvar ids = [];\rif (containerElem) {\rtabLinks = containerElem.querySelectorAll('.tab__link');\rtabContents = containerElem.querySelectorAll('.tab__content');\r}\rfor (var i = 0; i 0) {\rtabContents[0].style.display = 'block';\r}\r Expand \r\rExpand me\r\rTitle contents\r\r \r\rExpand me2\r\rTitle2 contents2\r\r Alert Colored box\nthis is a text\rthis is a text\rthis is a text\rthis is a text\rNotice success text\r info text\r warning text\r error text\r ","description":"tabs, code-tabs, expand, alert, warning, notice, img, box","id":2,"section":"posts","tags":["shortcode"],"title":"Shortcodes","uri":"https://mrxiaoling.github.io/en/posts/shortcodes/"},{"content":"This article offers a sample of basic Markdown syntax that can be used in Hugo content files, also it shows whether basic HTML elements are decorated with CSS in a Hugo theme.\nHeadings The following HTML \u0026lt;h1\u0026gt;â€”\u0026lt;h6\u0026gt; elements represent six levels of section headings. \u0026lt;h1\u0026gt; is the highest section level while \u0026lt;h6\u0026gt; is the lowest.\nH1 H2 H3 H4 H5 H6 Paragraph Xerum, quo qui aut unt expliquam qui dolut labo. Aque venitatiusda cum, voluptionse latur sitiae dolessi aut parist aut dollo enim qui voluptate ma dolestendit peritin re plis aut quas inctum laceat est volestemque commosa as cus endigna tectur, offic to cor sequas etum rerum idem sintibus eiur? Quianimin porecus evelectur, cum que nis nust voloribus ratem aut omnimi, sitatur? Quiatem. Nam, omnis sum am facea corem alique molestrunt et eos evelece arcillit ut aut eos eos nus, sin conecerem erum fuga. Ri oditatquam, ad quibus unda veliamenimin cusam et facea ipsamus es exerum sitate dolores editium rerore eost, temped molorro ratiae volorro te reribus dolorer sperchicium faceata tiustia prat.\nItatur? Quiatae cullecum rem ent aut odis in re eossequodi nonsequ idebis ne sapicia is sinveli squiatum, core et que aut hariosam ex eat.\nBlockquotes The blockquote element represents content that is quoted from another source, optionally with a citation which must be within a footer or cite element, and optionally with in-line changes such as annotations and abbreviations.\nBlockquote without attribution  Tiam, ad mint andaepu dandae nostion secatur sequo quae.\nNote that you can use Markdown syntax within a blockquote.\n Blockquote with attribution  Don\u0026rsquo;t communicate by sharing memory, share memory by communicating.\nâ€” Rob Pike1\n Tables Tables aren\u0026rsquo;t part of the core Markdown spec, but Hugo supports supports them out-of-the-box.\n   Name Age     Bob 27   Alice 23    Inline Markdown within tables    InlineÂ  MarkdownÂ  InÂ  Table     italics bold strikethroughÂ  code    Code Blocks Code block with backticks html\r\u0026lt;!DOCTYPE html\u0026gt;\r\u0026lt;html lang=\u0026quot;en\u0026quot;\u0026gt;\r\u0026lt;head\u0026gt;\r\u0026lt;meta charset=\u0026quot;UTF-8\u0026quot;\u0026gt;\r\u0026lt;title\u0026gt;Example HTML5 Document\u0026lt;/title\u0026gt;\r\u0026lt;/head\u0026gt;\r\u0026lt;body\u0026gt;\r\u0026lt;p\u0026gt;Test\u0026lt;/p\u0026gt;\r\u0026lt;/body\u0026gt;\r\u0026lt;/html\u0026gt;\rCode block indented with four spaces \u0026lt;!DOCTYPE html\u0026gt;\r\u0026lt;html lang=\u0026quot;en\u0026quot;\u0026gt;\r\u0026lt;head\u0026gt;\r\u0026lt;meta charset=\u0026quot;UTF-8\u0026quot;\u0026gt;\r\u0026lt;title\u0026gt;Example HTML5 Document\u0026lt;/title\u0026gt;\r\u0026lt;/head\u0026gt;\r\u0026lt;body\u0026gt;\r\u0026lt;p\u0026gt;Test\u0026lt;/p\u0026gt;\r\u0026lt;/body\u0026gt;\r\u0026lt;/html\u0026gt;\r Code block with Hugo\u0026rsquo;s internal highlight shortcode 1 2 3 4 5 6 7 8 9 10  \u0026lt;!DOCTYPE html\u0026gt;\r\u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt;\r\u0026lt;head\u0026gt;\r\u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt;\r\u0026lt;title\u0026gt;Example HTML5 Document\u0026lt;/title\u0026gt;\r\u0026lt;/head\u0026gt;\r\u0026lt;body\u0026gt;\r\u0026lt;p\u0026gt;Test\u0026lt;/p\u0026gt;\r\u0026lt;/body\u0026gt;\r\u0026lt;/html\u0026gt;   List Types Ordered List  First item Second item Third item  Unordered List  List item Another item And another item  Nested list  Item   First Sub-item Second Sub-item  Other Elements â€” abbr, sub, sup, kbd, mark GIF is a bitmap image format.\nH2O\nXn + Yn: Zn\nPress CTRL+ALT+Delete to end the session.\nMost salamanders are nocturnal, and hunt for insects, worms, and other small creatures.\n The above quote is excerpted from Rob Pike\u0026rsquo;s talk during Gopherfest, November 18, 2015. \u0026#x21a9;\u0026#xfe0e;\n  ","description":"Sample article showcasing basic Markdown syntax and formatting for HTML elements.","id":3,"section":"posts","tags":["markdown","css","html","themes"],"title":"Markdown Syntax Guide","uri":"https://mrxiaoling.github.io/en/posts/markdown-syntax/"},{"content":"Code Syntax Highlighting Verify the following code blocks render as code blocks and highlight properly.\nMore about tuning syntax highlighting is the Hugo documentation.\nDiff 1 2 3 4 5 6 7 8 9 10  *** /path/to/original\t\u0026#39;\u0026#39;timestamp\u0026#39;\u0026#39;\r--- /path/to/new\t\u0026#39;\u0026#39;timestamp\u0026#39;\u0026#39;\r***************\r*** 1 ****\r! This is a line.\r--- 1 ---\r! This is a replacement line.\rIt is important to spell\r-removed line\r+new line\r  *** /path/to/original\t\u0026#39;\u0026#39;timestamp\u0026#39;\u0026#39;\r--- /path/to/new\t\u0026#39;\u0026#39;timestamp\u0026#39;\u0026#39;\r***************\r*** 1 ****\r! This is a line.\r--- 1 ---\r! This is a replacement line.\rIt is important to spell\r-removed line\r+new line\rMakefile CC=gcc\rCFLAGS=-I.\rhellomake: hellomake.o hellofunc.o\r$(CC) -o hellomake hellomake.o hellofunc.o -I.\r1 2 3 4 5  CC=gcc\rCFLAGS=-I.\rhellomake: hellomake.o hellofunc.o\r$(CC) -o hellomake hellomake.o hellofunc.o -I.\r  JSON 1 2 3  {\u0026#34;employees\u0026#34;:[\r{\u0026#34;firstName\u0026#34;:\u0026#34;John\u0026#34;, \u0026#34;lastName\u0026#34;:\u0026#34;Doe\u0026#34;},\r]}\r  Markdown 1 2 3  **bold** *italics* [link](www.example.com)\r  JavaScript 1  document.write(\u0026#39;Hello, world!\u0026#39;);\r  CSS 1 2 3  body {\rbackground-color: red;\r}\r  Objective C 1 2 3 4 5 6  #import \u0026lt;stdio.h\u0026gt;\r\rint main (void)\r{\rprintf (\u0026#34;Hello world!\\n\u0026#34;);\r}\r  Python 1  print \u0026#34;Hello, world!\u0026#34;\r  XML 1 2 3 4 5  \u0026lt;employees\u0026gt;\r\u0026lt;employee\u0026gt;\r\u0026lt;firstName\u0026gt;John\u0026lt;/firstName\u0026gt; \u0026lt;lastName\u0026gt;Doe\u0026lt;/lastName\u0026gt;\r\u0026lt;/employee\u0026gt;\r\u0026lt;/employees\u0026gt;\r  Perl 1  print \u0026#34;Hello, World!\\n\u0026#34;;\r  Bash 1  echo \u0026#34;Hello World\u0026#34;\r  PHP 1  \u0026lt;?php echo \u0026#39;\u0026lt;p\u0026gt;Hello World\u0026lt;/p\u0026gt;\u0026#39;; ?\u0026gt;   CoffeeScript 1  console.log(â€œHello world!â€);\r  C# 1 2 3 4 5 6 7 8  using System;\rclass Program\r{\rpublic static void Main(string[] args)\r{\rConsole.WriteLine(\u0026#34;Hello, world!\u0026#34;);\r}\r}\r  C++ 1 2 3 4 5 6 7  #include \u0026lt;iostream.h\u0026gt;\r\rmain()\r{\rcout \u0026lt;\u0026lt; \u0026#34;Hello World!\u0026#34;;\rreturn 0;\r}\r  SQL 1 2  SELECT column_name,column_name\rFROM table_name;\r  Go 1 2 3 4 5  package main\rimport \u0026#34;fmt\u0026#34;\rfunc main() {\rfmt.Println(\u0026#34;Hello, ä¸–ç•Œ\u0026#34;)\r}\r  Ruby 1  puts \u0026#34;Hello, world!\u0026#34;\r  Java 1 2 3 4 5 6 7 8 9 10 11 12  import javax.swing.JFrame; //Importing class JFrame\rimport javax.swing.JLabel; //Importing class JLabel\rpublic class HelloWorld {\rpublic static void main(String[] args) {\rJFrame frame = new JFrame(); //Creating frame\r frame.setTitle(\u0026#34;Hi!\u0026#34;); //Setting title frame\r frame.add(new JLabel(\u0026#34;Hello, world!\u0026#34;));//Adding text to frame\r frame.pack(); //Setting size to smallest\r frame.setLocationRelativeTo(null); //Centering frame\r frame.setVisible(true); //Showing frame\r }\r}\r  Latex Equation 1  \\frac{d}{dx}\\left( \\int_{0}^{x} f(u)\\,du\\right)=f(x).\r  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38  import {x, y} as p from \u0026#39;point\u0026#39;;\rconst ANSWER = 42;\rclass Car extends Vehicle {\rconstructor(speed, cost) {\rsuper(speed);\rvar c = Symbol(\u0026#39;cost\u0026#39;);\rthis[c] = cost;\rthis.intro = `This is a car runs at\r${speed}.`;\r}\r}\rfor (let num of [1, 2, 3]) {\rconsole.log(num + 0b111110111);\r}\rfunction $initHighlight(block, flags) {\rtry {\rif (block.className.search(/\\bno\\-highlight\\b/) != -1)\rreturn processBlock(block.function, true, 0x0F) + \u0026#39; class=\u0026#34;\u0026#34;\u0026#39;;\r} catch (e) {\r/* handle exception */\rvar e4x =\r\u0026lt;div\u0026gt;Example\r\u0026lt;p\u0026gt;1234\u0026lt;/p\u0026gt;\u0026lt;/div\u0026gt;;\r }\rfor (var i = 0 / 2; i \u0026lt; classes.length; i++) {\r// \u0026#34;0 / 2\u0026#34; should not be parsed as regexp\r if (checkCondition(classes[i]) === undefined)\rreturn /\\d+[\\s/]/g;\r}\rconsole.log(Array.every(classes, Boolean));\r}\rexport $initHighlight;\r  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  \u0026lt;!DOCTYPE html\u0026gt;\r\u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt;\r\u0026lt;head\u0026gt;\r\u0026lt;meta charset=\u0026#34;utf-8\u0026#34;\u0026gt;\r\u0026lt;title\u0026gt;Hello world\u0026lt;/title\u0026gt;\r\u0026lt;link href=\u0026#39;http://fonts.googleapis.com/css?family=Roboto:400,400italic,700,700italic\u0026#39; rel=\u0026#39;stylesheet\u0026#39; type=\u0026#39;text/css\u0026#39;\u0026gt;\r\u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;index.css\u0026#34; /\u0026gt;\r\u0026lt;/head\u0026gt;\r\u0026lt;body\u0026gt;\r\u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt;\u0026lt;/div\u0026gt;\r\u0026lt;script src=\u0026#34;//cdnjs.cloudflare.com/ajax/libs/less.js/2.5.1/less.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt;\r\u0026lt;script src=\u0026#34;vendor/prism.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt;\r\u0026lt;script src=\u0026#34;examples.bundle.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt;\r\u0026lt;/body\u0026gt;\r\u0026lt;/html\u0026gt;\r  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41  /*********************************************************\r* General\r*/\rpre[class*=\u0026#34;language-\u0026#34;],\rcode {\rcolor: #5c6e74;\rfont-size: 13px;\rtext-shadow: none;\rfont-family: Consolas, Monaco, \u0026#39;Andale Mono\u0026#39;, \u0026#39;Ubuntu Mono\u0026#39;, monospace;\rdirection: ltr;\rtext-align: left;\rwhite-space: pre;\rword-spacing: normal;\rword-break: normal;\rline-height: 1.5;\rtab-size: 4;\rhyphens: none;\r}\rpre[class*=\u0026#34;language-\u0026#34;]::selection,\rcode::selection {\rtext-shadow: none;\rbackground: #b3d4fc;\r}\r@media print {\rpre[class*=\u0026#34;language-\u0026#34;],\rcode {\rtext-shadow: none;\r}\r}\rpre[class*=\u0026#34;language-\u0026#34;] {\rpadding: 1em;\rmargin: .5em 0;\roverflow: auto;\rbackground: #f8f5ec;\r}\r:not(pre) \u0026gt; code {\rpadding: .1em .3em;\rborder-radius: .3em;\rcolor: #db4c69;\rbackground: #f9f2f4;\r}\r  ","description":"Syntax highlighting test","id":4,"section":"posts","tags":["hugo"],"title":"Syntax highlighting","uri":"https://mrxiaoling.github.io/en/posts/syntax-highlight/"},{"content":"We need goldmark katex entension which is not yet we have: [https://github.com/gohugoio/hugo/issues/6544](https://github.com/gohugoio/hugo/issues/6544)\r Mathematical notation in a Hugo project can be enabled by using third party JavaScript libraries.\nIn this example we will be using KaTeX\n Create a partial under /layouts/partials/math.html Within this partial reference the Auto-render Extension or host these scripts locally. Include the partial in your templates like so:  {{ if or .Params.math .Site.Params.math }}\r{{ partial \u0026quot;math.html\u0026quot; . }}\r{{ end }}\r To enable KaTex globally set the parameter math to true in a project\u0026rsquo;s configuration To enable KaTex on a per page basis include the parameter math: true in content files.  Note: Use the online reference of Supported TeX Functions\nExamples Inline math: $$ \\varphi = \\dfrac{1+\\sqrt5}{2}= 1.6180339887â€¦ $$\nBlock math:\n$$\n\\varphi = 1+\\frac{1} {1+\\frac{1} {1+\\frac{1} {1+\\cdots} } }\n$$\n","description":"A brief guide to setup KaTeX","id":5,"section":"posts","tags":null,"title":"Math Typesetting","uri":"https://mrxiaoling.github.io/en/posts/math-typesetting/"},{"content":"Emoji can be enabled in a Hugo project in a number of ways.\nThe emojify function can be called directly in templates or Inline Shortcodes.\nTo enable emoji globally, set enableEmoji to true in your siteâ€™s configuration and then you can type emoji shorthand codes directly in content files; e.g.\nğŸ™ˆ ğŸ™ˆ ğŸ™‰ ğŸ™‰ ğŸ™Š ğŸ™Š\nThe Emoji cheat sheet is a useful reference for emoji shorthand codes.\nN.B. The above steps enable Unicode Standard emoji characters and sequences in Hugo, however the rendering of these glyphs depends on the browser and the platform. To style the emoji you can either use a third party emoji font or a font stack; e.g.\n1 2 3  .emoji {\rfont-family: Apple Color Emoji,Segoe UI Emoji,NotoColorEmoji,Segoe UI Symbol,Android Emoji,EmojiSymbols;\r}  ","description":"Guide to emoji usage in Hugo","id":6,"section":"posts","tags":["emoji","gamoji","namoji","bamoji","amoji"],"title":"Emoji Support","uri":"https://mrxiaoling.github.io/en/posts/emoji-support/"},{"content":"digraph G {\rsubgraph cluster_0 {\rstyle=filled;\rcolor=lightgrey;\rnode [style=filled,color=white];\ra0 -\u0026gt; a1 -\u0026gt; a2 -\u0026gt; a3;\rlabel = \u0026quot;process #1\u0026quot;;\r}\rsubgraph cluster_1 {\rnode [style=filled];\rb0 -\u0026gt; b1 -\u0026gt; b2 -\u0026gt; b3;\rlabel = \u0026quot;process #2\u0026quot;;\rcolor=blue\r}\rstart -\u0026gt; a0;\rstart -\u0026gt; b0;\ra1 -\u0026gt; b3;\rb2 -\u0026gt; a3;\ra3 -\u0026gt; a0;\ra3 -\u0026gt; end;\rb3 -\u0026gt; end;\rstart [shape=Mdiamond];\rend [shape=Msquare];\r}\r","description":"A hack to put Graphviz on the web.","id":7,"section":"posts","tags":[""],"title":"Viz support","uri":"https://mrxiaoling.github.io/en/posts/test-viz/"},{"content":"{ \u0026quot;signal\u0026quot;: [ {\u0026quot;name\u0026quot;: \u0026quot;CLK\u0026quot;, \u0026quot;wave\u0026quot;: \u0026quot;p.....|...\u0026quot;},\r{\u0026quot;name\u0026quot;:\u0026quot;DAT\u0026quot;, \u0026quot;wave\u0026quot;:\u0026quot;x.345x|=.x\u0026quot;, \u0026quot;data\u0026quot;:[\u0026quot;A\u0026quot;,\u0026quot;B\u0026quot;,\u0026quot;C\u0026quot;,\u0026quot;D\u0026quot;]},\r{\u0026quot;name\u0026quot;: \u0026quot;REQ\u0026quot;, \u0026quot;wave\u0026quot;: \u0026quot;0.1..0|1.0\u0026quot;},\r{},\r{\u0026quot;name\u0026quot;: \u0026quot;ACK\u0026quot;, \u0026quot;wave\u0026quot;: \u0026quot;1.....|01.\u0026quot;}\r]}\r","description":"WaveDrom is a Free and Open Source online digital timing diagram (waveform) rendering engine that uses javascript, HTML5 and SVG to convert a WaveJSON input text description into SVG vector graphics.","id":8,"section":"posts","tags":[""],"title":"Wavedrom support","uri":"https://mrxiaoling.github.io/en/posts/test-wavedrom/"},{"content":"{\r\u0026quot;type\u0026quot;: \u0026quot;bar\u0026quot;,\r\u0026quot;data\u0026quot;: {\r\u0026quot;labels\u0026quot;: [\u0026quot;One\u0026quot;, \u0026quot;Two\u0026quot;, \u0026quot;Three\u0026quot;, \u0026quot;Four\u0026quot;, \u0026quot;Five\u0026quot;, \u0026quot;Six\u0026quot;],\r\u0026quot;datasets\u0026quot;: [{\r\u0026quot;label\u0026quot;: \u0026quot;# of Votes\u0026quot;,\r\u0026quot;data\u0026quot;: [12, 19, 3, 5, 3, 8]\r}]\r}\r}\r{\r\u0026quot;type\u0026quot;: \u0026quot;line\u0026quot;,\r\u0026quot;data\u0026quot;: {\r\u0026quot;labels\u0026quot;: [\u0026quot;One\u0026quot;, \u0026quot;Two\u0026quot;, \u0026quot;Three\u0026quot;, \u0026quot;Four\u0026quot;, \u0026quot;Five\u0026quot;, \u0026quot;Six\u0026quot;],\r\u0026quot;datasets\u0026quot;: [\r{\r\u0026quot;label\u0026quot;: \u0026quot;# of Votes\u0026quot;,\r\u0026quot;data\u0026quot;: [12, 19, 3, 5, 2, 3],\r\u0026quot;backgroundColor\u0026quot;:\u0026quot;transparent\u0026quot;,\r\u0026quot;borderColor\u0026quot;:\u0026quot;orange\u0026quot;\r},\r{\r\u0026quot;label\u0026quot;: \u0026quot;Some other set\u0026quot;,\r\u0026quot;data\u0026quot;: [15, 8, 13, 5, 5, 9],\r\u0026quot;backgroundColor\u0026quot;:\u0026quot;transparent\u0026quot;,\r\u0026quot;borderColor\u0026quot;:\u0026quot;#44ccff\u0026quot;\r}\r]\r}\r}\r","description":"Simple yet flexible JavaScript charting for designers \u0026 developers","id":9,"section":"posts","tags":[""],"title":"Chart support","uri":"https://mrxiaoling.github.io/en/posts/test-chartjs/"},{"content":"Alice-\u0026gt;Bob: Hello Bob, how are you?\rNote right of Bob: Bob thinks\rBob--\u0026gt;Alice: I am good thanks!\rTitle: Here is a title\rA-\u0026gt;B: Normal line\rB--\u0026gt;C: Dashed line\rC-\u0026gt;\u0026gt;D: Open arrow\rD--\u0026gt;\u0026gt;A: Dashed open arrow\r","description":"Generates UML sequence diagrams from simple text","id":10,"section":"posts","tags":[""],"title":"JS Sequence Diagram support","uri":"https://mrxiaoling.github.io/en/posts/test-js-sequence-diagrams/"},{"content":"graph TD;\rA--\u0026gt;B;\rA--\u0026gt;C;\rB--\u0026gt;D;\rC--\u0026gt;D;\rsequenceDiagram\rparticipant Alice\rparticipant Bob\rAlice-\u0026gt;John: Hello John, how are you?\rloop Healthcheck\rJohn-\u0026gt;John: Fight against hypochondria\rend\rNote right of John: Rational thoughts \u0026lt;br/\u0026gt;prevail...\rJohn--\u0026gt;Alice: Great!\rJohn-\u0026gt;Bob: How about you?\rBob--\u0026gt;John: Jolly good!\rgraph TD\rA[Hard] --\u0026gt;|Text| B(Round)\rB --\u0026gt; C{Decision}\rC --\u0026gt;|One| D[Result 1]\rC --\u0026gt;|Two| E[Result 2]\rgantt\rsection Section\rCompleted :done, des1, 2014-01-06,2014-01-08\rActive :active, des2, 2014-01-07, 3d\rParallel 1 : des3, after des1, 1d\rParallel 2 : des4, after des1, 1d\rParallel 3 : des5, after des3, 1d\rParallel 4 : des6, after des4, 1d\rclassDiagram\rClass01 \u0026lt;|-- AveryLongClass : Cool\r\u0026lt;\u0026lt;interface\u0026gt;\u0026gt; Class01\rClass09 --\u0026gt; C2 : Where am i?\rClass09 --* C3\rClass09 --|\u0026gt; Class07\rClass07 : equals()\rClass07 : Object[] elementData\rClass01 : size()\rClass01 : int chimp\rClass01 : int gorilla\rclass Class10 {\r\u0026lt;\u0026lt;service\u0026gt;\u0026gt;\rint id\rsize()\r}\rstateDiagram\r[*] --\u0026gt; Still\rStill --\u0026gt; [*]\rStill --\u0026gt; Moving\rMoving --\u0026gt; Still\rMoving --\u0026gt; Crash\rCrash --\u0026gt; [*]\rpie\r\u0026quot;Dogs\u0026quot; : 386\r\u0026quot;Cats\u0026quot; : 85\r\u0026quot;Rats\u0026quot; : 15 ","description":"Generate diagrams, charts, graphs or flows from markdown-like text via javascript.","id":11,"section":"posts","tags":["diagram"],"title":"Mermaid support","uri":"https://mrxiaoling.github.io/en/posts/test-mermaid/"},{"content":"When $a \\ne 0$, there are two solutions to $(ax^2 + bx + c = 0)$ and they are\n$$x = {-b \\pm \\sqrt{b^2-4ac} \\over 2a}.$$\n","description":"A JavaScript display engine for mathematics that works in all browsers.No more setup for readers. It just works.","id":12,"section":"posts","tags":[""],"title":"MathJax support","uri":"https://mrxiaoling.github.io/en/posts/test-mathjax/"},{"content":"The following\n$$ \\int_{a}^{b} x^2 dx $$\nIs an integral\n$$ \\varphi = 1+\\frac{1} {1+\\frac{1} {1+\\frac{1} {1+\\cdots} } } $$\nEnable Katex in the config file by setting the katex param to true. This will import the necessary Katex CSS/JS.\nSee the online reference of supported TeX functions.\nNote: For inline math to render correctly, your content file extension must be .mmark. See the official mmark site.\nInline math: $ \\varphi = \\dfrac{1+\\sqrt5}{2}= 1.6180339887â€¦ $\rInline math: $ \\varphi = \\dfrac{1+\\sqrt5}{2}= 1.6180339887â€¦ $\nBlock math:\r$$ \\varphi = 1+\\frac{1} {1+\\frac{1} {1+\\frac{1} {1+\\cdots} } } $$\rBlock math:\n$$ \\varphi = 1+\\frac{1} {1+\\frac{1} {1+\\frac{1} {1+\\cdots} } } $$\n","description":"KaTeX is a fast, easy-to-use JavaScript library for TeX math rendering on the web.","id":13,"section":"posts","tags":[""],"title":"Katex support","uri":"https://mrxiaoling.github.io/en/posts/test-katex/"},{"content":"st=\u0026gt;start: Start|past:\u0026gt;http://www.google.com[blank]\re=\u0026gt;end: End|future:\u0026gt;http://www.google.com\rop1=\u0026gt;operation: My Operation|past\rop2=\u0026gt;operation: Stuff|current\rsub1=\u0026gt;subroutine: My Subroutine|invalid\rcond=\u0026gt;condition: Yes\ror No?|approved:\u0026gt;http://www.google.com\rc2=\u0026gt;condition: Good idea|rejected\rio=\u0026gt;inputoutput: catch something...|future\rst-\u0026gt;op1(right)-\u0026gt;cond\rcond(yes, right)-\u0026gt;c2\rcond(no)-\u0026gt;sub1(left)-\u0026gt;op1\rc2(yes)-\u0026gt;io-\u0026gt;e\rc2(no)-\u0026gt;op2-\u0026gt;e\r","description":"flowchart.js is a flowchart DSL and SVG render that runs in the browser and terminal. Nodes and connections are defined in separately so that nodes can be reused and connections can be quickly changed.","id":14,"section":"posts","tags":[""],"title":"Flowchart support","uri":"https://mrxiaoling.github.io/en/posts/test-flowchart/"},{"content":"Sample images from Pixabay\n","description":"cartoon gallery","id":15,"section":"gallery","tags":null,"title":"Cartoon","uri":"https://mrxiaoling.github.io/en/gallery/cartoon/"},{"content":"Sample images from Pixabay\n","description":"photo gallery","id":16,"section":"gallery","tags":null,"title":"Photo","uri":"https://mrxiaoling.github.io/en/gallery/photo/"},{"content":"Written in Go, Hugo is an open source static site generator available under the Apache Licence 2.0. Hugo supports TOML, YAML and JSON data file types, Markdown and HTML content files and uses shortcodes to add rich content. Other notable features are taxonomies, multilingual mode, image processing, custom output formats, HTML/CSS/JS minification and support for Sass SCSS workflows.\nHugo makes use of a variety of open source projects including:\n https://github.com/russross/blackfriday https://github.com/alecthomas/chroma https://github.com/muesli/smartcrop https://github.com/spf13/cobra https://github.com/spf13/viper  Hugo is ideal for blogs, corporate websites, creative portfolios, online magazines, single page applications or even a website with thousands of pages.\nHugo is for people who want to hand code their own website without worrying about setting up complicated runtimes, dependencies and databases.\nWebsites built with Hugo are extremelly fast, secure and can be deployed anywhere including, AWS, GitHub Pages, Heroku, Netlify and any other hosting provider.\nLearn more and contribute on GitHub.\n","description":"Hugo, the worldâ€™s fastest framework for building websites","id":21,"section":"","tags":null,"title":"About","uri":"https://mrxiaoling.github.io/en/about/"},{"content":"ç¬¬ä¸‰ç«    CSMA\n Carrier Sense Multiple Access ï¼Œè½½æ³¢ç›‘å¬å¤šè·¯è®¿é—®    FCS\n Frame Check Sequenceï¼Œå¸§æ£€éªŒåºåˆ—    PPP\n Point-to-Point Protocolï¼Œç‚¹å¯¹ç‚¹åè®®    LCP\n Link Control Protocol    NCP\n Netwotrk Control Protocol    IPCP\n IP Control Protocol    PAP\n Password Authentication Protocol    CHAP\n Challenge Handshake Authentication Protocol    MTU\n Maximum Transmission Unitï¼Œæœ€å¤§ä¼ è¾“å•ä½    CIDR\n Classless Inter-Domain Routingï¼Œæ— ç±»å‹åŸŸé—´é€‰è·¯    VLSM\n Variable Length Subnet Maskingï¼Œå¯å˜é•¿å­ç½‘æ©ç     DSCP\n Differential Services Codepointï¼Œå·®åˆ†æœåŠ¡ä»£ç ç‚¹    ECN\n Explicit Congestion Notificationï¼Œæ˜¾å¼æ‹¥å¡é€šå‘Š    ARP\n Address Resolution Protocolï¼Œåœ°å€è§£æåè®®    ACK\n Positive Acknowledgement ï¼Œæ„ä¸ºä»¥æ¥æ”¶    MSL\n maximum segment lifetime .æœ€å¤§åˆ†æ®µå¯¿å‘½    MSS\n Maximum Segment Size,æœ€å¤§æ¶ˆæ¯é•¿åº¦    ","description":"","id":25,"section":"posts","tags":null,"title":"","uri":"https://mrxiaoling.github.io/en/posts/%E5%9B%BE%E8%A7%A3tcpip/%E5%90%8D%E8%AF%8D%E7%BC%A9%E5%86%99/"},{"content":"Adapteræ¨¡å¼  å‚è€ƒï¼š1.ã€Šå›¾è§£è®¾è®¡æ¨¡å¼ã€‹\n  åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œé€‚é…å™¨å¾ˆå¸¸è§ï¼Œæ¯”å¦‚ç”µå­äº§å“çš„ä¾›ç”µç”µå‹ç”µæµéƒ½æœ‰ä¸€ä¸ªé¢å®šå€¼ï¼Œåƒç›´æµ5V1Aï¼Œ5V2Aç­‰ï¼Œä½†æ˜¯å®¶åº­ç”¨ç”µåªèƒ½æä¾›äº¤æµ220Vï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªé€‚é…å™¨å°†äº¤æµ220Vzhuanhuan åœ¨ç¨‹åºä¸­ï¼Œç»å¸¸å­˜åœ¨ç°æœ‰çš„ç¨‹åºæ— æ³•ç›´æ¥ä½¿ç”¨ï¼Œéœ€è¦åšé€‚å½“çš„å˜æ¢åæ‰èƒ½ä½¿ç”¨ã€‚è¿™ç§ç”¨äºå¡«è¡¥ç°æœ‰çš„ç¨‹åºå’Œæ‰€éœ€çš„ç¨‹åºä¹‹é—´å·®å¼‚çš„è®¾è®¡æ¨¡å¼å°±æ˜¯Adapteræ¨¡å¼  ä»€ä¹ˆæ—¶å€™ä½¿ç”¨é€‚é…å™¨æ¨¡å¼ï¼Ÿ   å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬å¹¶éä»é›¶å¼€å§‹ç¼–ç¨‹ï¼Œç»å¸¸ä¼šç”¨åˆ°ç°æœ‰çš„ç±»ï¼Œç‰¹åˆ«æ˜¯å½“ç°æœ‰çš„ç±»å·²ç»è¢«å……åˆ†æµ‹è¯•è¿‡ï¼ŒBUGå¾ˆå°‘ï¼Œè€Œä¸”ç”¨äºå…¶ä»–è½¯ä»¶æ—¶ï¼Œæ›´æ„¿æ„å°†è¿™äº›ç±»ä½œä¸ºç»„ä»¶é‡å¤ä½¿ç”¨ã€‚\n  Adapteræ¨¡å¼æœ‰ä¸¤ç§\n   ç±»é€‚é…å™¨æ¨¡å¼ï¼ˆä½¿ç”¨ç»§æ‰¿çš„é€‚é…å™¨ï¼‰ å¯¹è±¡é€‚é…å™¨æ¨¡å¼ï¼ˆä½¿ç”¨å§”æ‰˜çš„é€‚é…å™¨ï¼‰  JDKé‡Œçš„Adapteræ¨¡å¼ java.util.Arrays#asList()\njavax.swing.JTable(TableModel)\njava.io.InputStreamReader(InputStream)\njava.io.OutputStreamWriter(OutputStream)\njavax.xml.bind.annotation.adapters.XmlAdapter#marshal()\njavax.xml.bind.annotation.adapters.XmlAdapter#unmarshal()\n\r\rInputStreamReader\r\rInputStreamReadeæ³¨é‡Šé‡Œå†™é“ï¼š\n An InputStreamReader is a bridge from byte streams to character streams: It reads bytes and decodes them into characters using a specified ï¼ˆInputStreamReaderæ˜¯ä»å­—èŠ‚æµåˆ°å­—ç¬¦æµçš„æ¡¥æ¢ï¼šå®ƒè¯»å–å­—èŠ‚å¹¶ä½¿ç”¨æŒ‡å®šçš„å­—èŠ‚å°†å…¶è§£ç ä¸ºå­—ç¬¦ï¼‰ \r\r\n\r\rArrays\r\r1 2 3 4 5 6 7 8 9 10 11 12 13 14  /**\r* Returns a fixed-size list backed by the specified array. (Changes to\r* the returned list \u0026#34;write through\u0026#34; to the array.) This method acts\r* as bridge between array-based and collection-based APIs, in\r* combination with {@link Collection#toArray}. *è¿”å›ç”±æŒ‡å®šæ•°ç»„æ”¯æŒçš„å›ºå®šå¤§å°çš„åˆ—è¡¨ã€‚æ­¤æ–¹æ³•ä¸{@link Collectionï¼ƒtoArray}ç»“åˆä½¿ç”¨ï¼Œ\r*å……å½“åŸºäºæ•°ç»„çš„APIå’ŒåŸºäºé›†åˆçš„APIä¹‹é—´çš„æ¡¥æ¢ã€‚\r*The returned list is serializable and implements {@link RandomAccess}.\r*/\r@SafeVarargs\r@SuppressWarnings(\u0026#34;varargs\u0026#34;)\rpublic static \u0026lt;T\u0026gt; List\u0026lt;T\u0026gt; asList(T... a) {\rreturn new ArrayList\u0026lt;\u0026gt;(a);\r}\r  \r\r\nç±»é€‚é…å™¨æ¨¡å¼ UMLç±»å›¾å¦‚ä¸‹ å„éƒ¨åˆ†ä»£ç å¦‚ä¸‹ 1 2 3 4 5 6 7  /**\r* â€œéœ€æ±‚â€æ¥å£ï¼Œæ¯”å¦‚è¯´â€œè½¬æ¢ä¸ºç›´æµ12Vâ€\r*/\rpublic interface Print {\rpublic abstract void printWeak() ;\rpublic abstract void printStrong() ;\r}\r  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  /**\r* ç°æœ‰æ¡ä»¶ï¼Œæ¯”å¦‚äº¤æµ220V\r*/\rpublic class Banner {\rprivate String string;\rpublic Banner (String string) {\rthis.string = string ;\r}\rpublic void showWithParen() {\rSystem.out.println(\u0026#34;(\u0026#34; + string + \u0026#34;)\u0026#34;);\r}\rpublic void showWithAster() {\rSystem.out.println(\u0026#34;*\u0026#34; + string + \u0026#34;*\u0026#34;);\r}\r}\r  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  /**\r* é€‚é…å™¨ï¼Œè´Ÿè´£å°†ç°æœ‰çš„ï¼ˆBannerï¼‰è½¬æ¢æˆéœ€æ±‚ï¼ˆPrintï¼‰\r*/\rpublic class PrintBanner extends Banner implements Print {\rpublic PrintBanner (String string) {\rsuper(string);\r}\r@Override\rpublic void printWeak() {\rshowWithParen();\r}\r@Override\rpublic void printStrong() {\rshowWithAster();\r}\r}\r  1 2 3 4 5 6 7  public class Main {\rpublic static void main(String[] args) {\rPrint p = new PrintBanner(\u0026#34;Hello\u0026#34;) ;\rp.printStrong();\rp.printWeak();\r}\r}\r  ä»£ç åˆ†æ åœ¨Mainç±»ä¸­å°†PrintBannerç±»çš„å®ä¾‹ä¿å­˜åœ¨äº†Printç±»å‹çš„å˜é‡ä¸­ï¼Œå¯¹Mainç±»çš„ä»£ç è€Œè¨€ã€‚Bannerç±»ã€showWithParenæ–¹æ³•å’ŒshowWithAsteræ–¹æ³•è¢«å®Œå…¨éšè—èµ·æ¥äº†ï¼Œå°±å¥½æ¯”åªéœ€è¦çŸ¥é“è®¾å¤‡åœ¨5V1Aå°±èƒ½æ­£å¸¸å……ç”µï¼Œè€Œ220Væ€ä¹ˆè½¬æ¢æˆ5Vçš„è¿‡ç¨‹å¹¶ä¸å…³å¿ƒï¼Œè¿™æ ·å°±å¯ä»¥ä¸ç”¨å¯¹Mainç±»è¿›è¡Œä¿®æ”¹çš„æƒ…å†µä¸‹æ”¹å˜Printbannerç±»çš„å…·ä½“å®ç°ã€‚\nå¯¹è±¡é€‚é…å™¨ UMLç±»å›¾å¦‚ä¸‹ å„éƒ¨åˆ†ä»£ç å¦‚ä¸‹  Mainç±»å’ŒBanneråŒä¸Š  1 2 3 4  public abstract class Print {\rpublic abstract void printWeak() ;\rpublic abstract void printStrong() ;\r}\r  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  public class PrintBanner extends Print {\rprivate Banner banner;\rpublic PrintBanner (String string) {\rthis.banner = new Banner(string);\r}\r@Override\rpublic void printWeak() {\rbanner.showWithParen();\r}\r@Override\rpublic void printStrong() {\rbanner.showWithAster();\r}\r}\r  å¯èƒ½çš„åº”ç”¨åœºæ™¯-ç‰ˆæœ¬æ›´æ–°ä¸å…¼å®¹æ€§  è½¯ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ€»æ˜¯ä¼´éšç‰ˆæœ¬çš„å‡çº§ï¼Œåœ¨å‡çº§çš„è¿‡ç¨‹ä¸­å°±ä¼šå‡ºç°äºæ—§ç‰ˆæœ¬çš„å…¼å®¹æ€§é—®é¢˜ï¼Œè¿™æ—¶å°±å¯ä»¥ä½¿ç”¨Adapteræ¨¡å¼è¿›è¡Œå…¼å®¹ï¼Œå¸®åŠ©æˆ‘ä»¬åŒæ—¶ç»´æŠ¤æ–°ç‰ˆæœ¬å’Œæ—§ç‰ˆæœ¬ã€‚  ","description":"tabs, code-tabs, expand, alert, warning, notice, img, box","id":26,"section":"posts","tags":["è®¾è®¡æ¨¡å¼"],"title":"Adapteræ¨¡å¼","uri":"https://mrxiaoling.github.io/en/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/adapter%E6%A8%A1%E5%BC%8F/"},{"content":"FactoryMethodæ¨¡å¼  å‚è€ƒï¼š1.ã€Šå›¾è§£è®¾è®¡æ¨¡å¼ã€‹\nhttps://www.cnblogs.com/Bobby0322/p/4179921.html\nhttps://blog.csdn.net/qqqqq1993qqqqq/article/details/77332087\nhttps://blog.csdn.net/w372426096/article/details/78009310\n æ¨¡å¼å®šä¹‰  å·¥å‚æ–¹æ³•æ¨¡å¼åˆç§°ä¸ºå·¥å‚æ¨¡å¼ï¼Œä¹Ÿå«è™šæ‹Ÿæ„é€ å™¨ï¼ˆVirtual Constructorï¼‰æ¨¡å¼æˆ–è€…å¤šæ€å·¥å‚æ¨¡å¼ï¼ˆPolymorphic Factoryï¼‰ ; çˆ¶ç±»è´Ÿè´£å®šä¹‰åˆ›å»ºå¯¹è±¡çš„å…¬å…±æ¥å£**ï¼Œè€Œå­ç±»åˆ™è´Ÿè´£ç”Ÿæˆå…·ä½“çš„å¯¹è±¡ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯å°†ç±»çš„å®ä¾‹åŒ–æ“ä½œå»¶è¿Ÿåˆ°å­ç±»ä¸­å®Œæˆï¼Œå³ç”±å­ç±»æ¥å†³å®šç©¶ç«Ÿåº”è¯¥å®ä¾‹åŒ–ï¼ˆåˆ›å»ºï¼‰å“ªä¸€ä¸ªç±»**ã€‚  è§£å†³ä½•ç§é—®é¢˜   åœ¨ç®€å•å·¥å‚æ¨¡å¼ä¸­ï¼Œå°†å®ä¾‹åŒ–å¯¹è±¡çš„å·¥ä½œæ¨è¿Ÿåˆ°äº†ä¸“é—¨è´Ÿè´£åˆ›å»ºå¯¹è±¡çš„å·¥å‚ç±»ä¸­ï¼Œè¿™æ ·ï¼Œåœ¨æˆ‘ä»¬äº‹å…ˆé¢„çŸ¥çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æ ¹æ®æˆ‘ä»¬çš„éœ€è¦åŠ¨æ€åˆ›å»ºäº§å“ç±»ã€‚ï¼›\n  ä½†æ˜¯ï¼Œæˆ‘ä»¬çš„é¢„çŸ¥æ˜¯æœ‰é™çš„ï¼Œå®¢æˆ·çš„å˜åŒ–å¯èƒ½æ˜¯æ— é™çš„ã€‚æ‰€ä»¥ï¼Œå°±å‡ºç°äº†é—®é¢˜ï¼Œä¸€æ—¦å®¢æˆ·çš„å˜åŒ–è¶…è¶Šäº†æˆ‘ä»¬çš„é¢„çŸ¥ï¼Œæˆ‘ä»¬å°±å¿…é¡»ä¿®æ”¹æˆ‘ä»¬çš„æºä»£ç äº†ã€‚è¿™æ˜¯è®¾è®¡æ¨¡å¼æ‰€ä¸å…è®¸çš„ ï¼›\n  é—®é¢˜ï¼šå…·ä½“å·¥å‚ç±»çš„åˆ›å»ºå·¥ä½œä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„è¦æ±‚äº†ï¼Œåˆ›å»ºçš„å·¥ä½œå˜åŒ–äº†ï¼›\n  è§£å†³æ€è·¯ï¼šå“ªé‡Œå˜åŒ–ï¼Œå°è£…å“ªé‡Œã€‚æŠŠå…·ä½“å·¥å‚å°è£…èµ·æ¥ã€‚\n  æ¨¡å¼å¥½å¤„  ï¼Ÿ  æ¨¡å¼é€‚åˆåœºæ™¯   åˆ›å»ºå¯¹è±¡éœ€è¦å¤§é‡é‡å¤çš„ä»£ç ;\n  åˆ›å»ºå¯¹è±¡éœ€è¦è®¿é—®æŸäº›ä¿¡æ¯ï¼Œè€Œè¿™äº›ä¿¡æ¯ä¸åº”è¯¥åŒ…å«åœ¨å¤åˆç±»ä¸­;\n  åˆ›å»ºå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå¿…é¡»é›†ä¸­ç®¡ç†ï¼Œä»¥ä¿è¯åœ¨æ•´ä¸ªç¨‹åºä¸­å…·æœ‰ä¸€è‡´çš„è¡Œä¸ºã€‚\n  JDKé‡Œçš„Factory Methodæ¨¡å¼   Collectionä¸­çš„Iteratoræ–¹æ³• ï¼š å¯¹äºiterator()æ–¹æ³•æ¥è¯´Collectionå°±æ˜¯ä¸€ä¸ªæ ¹æŠ½è±¡å·¥å‚ï¼Œä¸‹é¢è¿˜æœ‰Listç­‰æ¥å£ä½œä¸ºæŠ½è±¡å·¥å‚ï¼Œå†å¾€ä¸‹æœ‰ArrayListç­‰å…·ä½“å·¥å‚\n  JDBCï¼š åœ¨ä½¿ç”¨JDBCè¿›è¡Œæ•°æ®åº“å¼€å‘æ—¶ï¼Œå¦‚æœæ•°æ®åº“ç”±MySQLæ”¹ä¸ºOracleæˆ–å…¶ä»–ï¼Œåˆ™åªéœ€è¦æ”¹ä¸€ä¸‹æ•°æ®åº“é©±åŠ¨åç§°å°±å¯ä»¥ï¼Œå…¶ä»–éƒ½ä¸ç”¨ä¿®æ”¹ï¼ˆå‰ææ˜¯ä½¿ç”¨çš„éƒ½æ˜¯æ ‡å‡†SQLè¯­å¥ï¼‰ï¼›\n  å¦‚æœéœ€è¦è®¾è®¡ä¸€ä¸ªè¿æ¥é‚®ä»¶æœåŠ¡å™¨çš„æ¡†æ¶ï¼Œé‚£ä¹ˆå°±è¦è€ƒè™‘åˆ°è¿æ¥é‚®ä»¶æœåŠ¡å™¨æœ‰å‡ ç§æ–¹å¼ï¼šPOP3ã€SMTPã€HTTPã€‚å°±å¯ä»¥å®šä¹‰ä¸€ä¸ªè¿æ¥é‚®ä»¶æœåŠ¡å™¨æ¥å£ï¼Œåœ¨æ­¤æ¥å£ä¸­å®šä¹‰ä¸€äº›å¯¹é‚®ä»¶æ“ä½œçš„æ¥å£æ–¹æ³•ï¼ŒæŠŠè¿™ä¸‰ç§è¿æ¥æ–¹å¼å°è£…æˆäº§å“ç±»ï¼Œå®ç°æ¥å£ä¸­å®šä¹‰çš„æŠ½è±¡æ–¹æ³•ã€‚å†å®šä¹‰æŠ½è±¡å·¥å‚å’Œå…·ä½“å·¥å‚ï¼Œå½“é€‰æ‹©ä¸åŒçš„å·¥å‚æ—¶ï¼Œå¯¹åº”åˆ°äº§ç”Ÿç›¸åº”çš„è¿æ¥é‚®ä»¶äº§å“å¯¹è±¡ã€‚é‡‡ç”¨è¿™ç§å·¥å‚æ–¹æ³•æ¨¡å¼çš„è®¾è®¡ï¼Œå°±å¯ä»¥åšåˆ°è‰¯å¥½çš„æ‰©å±•æ€§ã€‚æ¯”å¦‚æŸäº›é‚®ä»¶æœåŠ¡å™¨æä¾›äº†WebServiceæ¥å£ï¼Œåªéœ€è¦å¢åŠ ä¸€ä¸ªäº§å“ç±»å’Œå·¥å‚ç±»å°±å¯ä»¥äº†ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹åŸæ¥ä»£ç ï¼›\n  Springæ¡†æ¶ä¸­çš„Beanå·¥å‚ï¼Œè¿™æ˜¯ä¸€ä¸ªå¤æ‚å¯¹è±¡ï¼Œæ‰€ä»¥é€‚åˆç”¨å·¥å‚æ¨¡å¼ ã€‚\n  UMLç±»å›¾å¦‚ä¸‹ å„éƒ¨åˆ†ä»£ç å¦‚ä¸‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14  package cn.ling.factorymethod;\rpublic abstract class Factory {\rpublic final Product create(String owner) {\rProduct p = createProduct(owner) ;\rregisterProduct(p);\rreturn p;\r}\rprotected abstract void registerProduct(Product p);\rprotected abstract Product createProduct(String owner);\r}\r  1 2 3 4 5 6  package cn.ling.factorymethod;\rpublic abstract class Product {\rpublic abstract void use();\r}\r  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22  package cn.ling.factorymethod;\rimport java.util.ArrayList;\rimport java.util.List;\rpublic class IDCardFactory extends Factory{\rprivate List owners = new ArrayList();\r@Override\rprotected void registerProduct(Product p) {\rowners.add(((IDCard)p).getOwner()) ;\r}\r@Override\rprotected Product createProduct(String owner) {\rreturn new IDCard(owner) ;\r}\rpublic List getOwners() {\rreturn owners ;\r}\r}\r  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  package cn.ling.factorymethod;\rpublic class IDCard extends Product {\rprivate String owner ;\r//ä¸èƒ½ä¸ºpublicï¼Œè¿™æ ·ä½¿å¾—åŒ…å¤–çš„ç±»æ— æ³•é€šè¿‡newæ„é€ å‡ºIDCardç±»çš„å®ä¾‹ï¼›\r //è¿™æ ·å°±å¯ä»¥å¼ºè¿«å¤–éƒ¨é€šè¿‡IDCardFactoryæ¥ç”ŸæˆIDCardçš„å®ä¾‹\r IDCard (String owner) {\rSystem.out.println(\u0026#34;åˆ¶ä½œ\u0026#34; + owner + \u0026#34;çš„IDå¡\u0026#34;);\rthis.owner = owner ;\r}\r@Override\rpublic void use() {\rSystem.out.println(\u0026#34;ä½¿ç”¨\u0026#34; + owner + \u0026#34;çš„IDå¡\u0026#34;);\r}\rpublic String getOwner() {\rreturn owner;\r}\r}\r  1 2 3 4 5 6 7 8 9 10 11 12 13  package cn.ling.factorymethod;\rpublic class Main {\rpublic static void main(String[] args) {\rFactory factory = new IDCardFactory() ;\rProduct card1 = factory.create(\u0026#34;xiaoming\u0026#34;);\rProduct card2 = factory.create(\u0026#34;xiaohong\u0026#34;);\rProduct card3 = factory.create(\u0026#34;xiaogang\u0026#34;);\rcard1.use();\rcard2.use();\rcard3.use();\r}\r}\r  ","description":"tabs, code-tabs, expand, alert, warning, notice, img, box","id":27,"section":"posts","tags":["è®¾è®¡æ¨¡å¼"],"title":"FactoryMethodæ¨¡å¼","uri":"https://mrxiaoling.github.io/en/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/factory%E6%A8%A1%E5%BC%8F/"},{"content":"æ•°æ®é“¾è·¯çš„ä½œç”¨ IPï¼ˆInternet Protocolï¼‰  IP ä½äºç¬¬ä¸‰å±‚-ç½‘ç»œå±‚ï¼Œä¸»è¦ä½œç”¨æ˜¯å®ç°ç»ˆç«¯èŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡ï¼Œä¹Ÿå«ç‚¹å¯¹ç‚¹ï¼ˆend-to-endï¼‰é€šä¿¡ ä¸‰å¤§ä½œç”¨æ¨¡å—ï¼š  IPå¯»å€ è·¯ç”±ï¼ˆæœ€ç»ˆèŠ‚ç‚¹ä¸ºæ­¢çš„è½¬å‘ï¼‰ IPåˆ†åŒ…ä¸ç»„åŒ…    IPä¸æ•°æ®é“¾è·¯  æ•°æ®é“¾è·¯å¥½æ¯”ä¸€ä¸ªä¸ªäº¤é€šä¸­è½¬ç«™ï¼Œå¦‚ç«è½¦ï¼Œæ±½è½¦ï¼Œé£æœºï¼Œåªè´Ÿè´£æŸä¸€ä¸ªåŒºé—´ä¹‹é—´çš„é€šä¿¡ä¼ è¾“ IPåˆ™å¦‚è¡Œç¨‹è¡¨ï¼Œåªæœ‰å‡ºå‘ç‚¹å’Œç»ˆç‚¹ï¼ŒIPè´Ÿè´£å°†æ•°æ®åŒ…å‘é€ç»™æœ€ç»ˆçš„ç›®æ ‡åœ°å€ï¼Œå³ç‚¹å¯¹ç‚¹é€šä¿¡ åªæœ‰è¡Œç¨‹è¡¨æ²¡æœ‰äº¤é€šå·¥å…·å°±æ— æ³•åˆ°è¾¾ç›®çš„åœ°ï¼Œåªæœ‰äº¤é€šå·¥å…·æ²¡æœ‰ç›®çš„åœ°ï¼ŒåŒæ ·å»ä¸äº†ç»ˆç‚¹ã€‚ è®¡ç®—æœºç½‘ç»œä¸­éœ€è¦æ•°æ®é“¾è·¯å±‚å’Œç½‘ç»œå±‚è¿™ä¸ªåˆ†å±‚æ‰èƒ½å®ç°å‘æœ€ç»ˆç›®æ ‡åœ°å€çš„é€šä¿¡  è·¯ç”±æ§åˆ¶ï¼ˆRoutingï¼‰  å‘é€æ•°æ®è‡³æœ€ç»ˆç›®æ ‡åœ°å€  HOPï¼ˆè·³ï¼‰æŒ‡ç½‘ç»œä¸­çš„ä¸€ä¸ªåŒºé—´ï¼ŒIPåŒ…åœ¨ç½‘ç»œä¸­çš„ä¸€ä¸ªä¸ªè·³é—´è¢«è½¬å‘ã€‚ è·¯ç”±å™¨æˆ–ä¸»æœºåœ¨è½¬å‘IPæ•°æ®åŒ…æ—¶åªæŒ‡å®šä¸‹ä¸€ä¸ªè·¯ç”±å™¨æˆ–ä¸»æœºï¼Œè€Œä¸æ˜¯å°†åˆ°æœ€ç»ˆç›®æ ‡åœ°å€ä¸ºæ­¢çš„æ‰€æœ‰é€šè·¯éƒ½æŒ‡å®šå‡ºæ¥     è·¯ç”±æ§åˆ¶è¡¨  æ‰€æœ‰ä¸»æœºä¸ºç»´æŠ¤ç€ä¸€å¼ è·¯ç”±æ§åˆ¶è¡¨ï¼ˆRouting Tableï¼‰ã€‚è¯¥è¡¨è®°å½•IPæ•°æ®åœ¨ä¸‹ä¸€æ­¥åº”è¯¥å‘ç»™å“ªä¸ªè·¯ç”±å™¨ã€‚IPåŒ…æ ¹æ®è¯¥è¡¨åœ¨å„ä¸ªæ•°æ®é“¾è·¯ä¸Šä¼ è¾“    IPåˆ†ç‰‡å¤„ç†  ä¸åŒé“¾è·¯ä¹‹é—´çš„MTUä¸åŒï¼Œæœ‰æ—¶IPæ•°æ®åŒ…å¤§å°æ¯”MTUå¤§ï¼Œæ‰€ä»¥è¿›è¡Œåˆ†ç‰‡å¤„ç†  IPé¢å‘æ— è¿æ¥  åœ¨å‘åŒ…å‰ï¼Œä¸éœ€è¦å»ºç«‹ä¸å¯¹ç«¯ç›®æ ‡åœ°å€ä¹‹é—´çš„è¿æ¥ï¼ŒåŸå› å¦‚ä¸‹ï¼š  ç®€åŒ–ï¼šç®¡ç†æ¯ä¸ªè¿æ¥æ˜¯ä¸€ä»¶å¤æ‚çš„äº‹ æé€Ÿï¼šé€šä¿¡å‰è¦å»ºç«‹è¿æ¥ä¼šé™ä½å¤„ç†é€Ÿåº¦    IPåœ°å€  IPåœ°å€ç”±ç½‘ç»œæ ‡å¿—å’Œä¸»æœºæ ‡å¿—ä¸¤éƒ¨åˆ†ç»„æˆ IPåœ°å€åˆ†ç±»ï¼šA,B,C,Då››ç±»  Aç±»ï¼šé¦–ä½ä»¥â€œ0â€å¼€å¤´çš„åœ°å€ï¼Œ1~8ä½æ˜¯å…¶ç½‘ç»œè¡¨æ ‡è¯†ï¼ŒèŒƒå›´ï¼š0.0.0.0~127.0.0.0 Bç±»ï¼šå‰ä¸¤ä½ä¸ºâ€œ10â€ï¼Œ1~16ä½ä¸ºå…¶ç½‘ç»œæ ‡è¯†ï¼ŒèŒƒå›´ï¼š128.0.0.1~191.255.0.0 Cç±»ï¼šå‰ä¸‰ä½ä¸ºâ€œ110â€ï¼Œ1~24ä½ä¸ºå…¶ç½‘ç»œæ ‡è¯†ï¼ŒèŒƒå›´ï¼š192.168.0.0~239.255.255.0 Dç±»ï¼šå‰å››ä½ä¸ºâ€œ1110â€ï¼Œ1~32ä½ä¸ºå…¶ç½‘ç»œæ ‡è¯†ï¼ŒèŒƒå›´ï¼š224.0.0.0~239.255.255.255ï¼ˆæ²¡æœ‰ä¸»æœºæ ‡è¯†ï¼Œå¸¸ç”¨äºå¤šæ’­ï¼‰   IPåœ°å€ä¸­çš„ä¸»æœºåœ°å€ä¸èƒ½å…¨éƒ¨ä¸º0æˆ–è€…å…¨éƒ¨ä¸º1ï¼Œå…¨éƒ¨ä¸º0è¡¨ç¤ºå¯¹åº”çš„ç½‘ç»œåœ°å€æˆ–IPåœ°å€ä¸å¯è·çŸ¥çš„æƒ…å†µä¸‹æ‰ä½¿ç”¨ã€‚å…¨éƒ¨ä¸º1çš„ä¸»æœºåœ°å€é€šå¸¸ä½œä¸ºå¹¿æ’­åœ°å€ã€‚å› æ­¤åœ¨åˆ†é…åœ°å€æ—¶åº”è¯¥å»æ‰è¿™ä¸¤ç§æƒ…å†µã€‚  å¹¿æ’­åœ°å€  å¹¿æ’­åœ°å€ç”¨äºåœ¨åŒä¸€ä¸ªé“¾è·¯ä¸­äº’ç›¸è¿æ¥çš„ä¸»æœºä¹‹é—´å‘é€æ•°æ®ï¼Œä¸»æœºåœ°å€éƒ¨åˆ†å…¨éƒ¨è®¾ç½®ä¸º1å°±æˆäº†å¹¿æ’­åœ°å€ï¼ˆä»¥å¤ªç½‘ä¸­MACåœ°å€çš„æ‰€æœ‰ä½éƒ½ä¸º1æ—¶ï¼Œæˆä¸ºå¹¿æ’­åœ°å€ï¼Œå› æ­¤å¹¿æ’­çš„IPåŒ…ä»¥æ•°æ®é“¾è·¯çš„å¸§çš„å½¢å¼å‘é€æ—¶ï¼Œå¾—é€šè¿‡MACåœ°å€ä¸ºå…¨1çš„è½¬å‘ï¼‰ å¹¿æ’­åˆ†ä¸ºæœ¬åœ°å¹¿æ’­å’Œç›´æ¥å¹¿æ’­  æœ¬åœ°å¹¿æ’­ï¼šåœ¨æœ¬ç½‘ç»œå†…çš„å¹¿æ’­å«åšæœ¬åœ°å¹¿æ’­ï¼Œå¦‚ç½‘ç»œåœ°å€ä¸º192.168.0.0/24ï¼Œå¹¿æ’­åœ°å€ä¸º192.168.0.255.è¿™ä¸ªå¹¿æ’­åœ°å€çš„IPåŒ…ä¼šè¢«è·¯ç”±å™¨å±è”½ï¼Œä¸ä¼šä¼ åˆ°192.168.0.0/24ä»¥å¤–çš„é“¾è·¯ä¸Š ç›´æ¥å¹¿æ’­ï¼šåœ¨ä¸åŒç½‘ç»œä¹‹é—´å¹¿æ’­å«ç›´æ¥å¹¿æ’­ï¼Œå¦‚ç½‘ç»œåœ°å€ä¸º192.168.0.0/24çš„ä¸»æœºå‘192.168.1.255/24çš„ç›®æ ‡åœ°å€å‘é€IPåŒ…ï¼Œæ”¶åˆ°è¿™ä¸ªåŒ…çš„è·¯ç”±å™¨å°†æ•°æ®è½¬å‘ç»™192.168.1.0/24ï¼Œä»è€Œä½¿å¾—ç½‘ç»œåœ°å€ä¸º192.168.1.1~192.168.1.254çš„ä¸»æœºéƒ½èƒ½æ¥æ”¶åˆ°è¿™ä¸ªåŒ…ã€‚    IPå¤šæ’­  å¤šæ’­ç”¨äºå°†åŒ…å‘é€ç»™ç‰¹å®šç»„å†…çš„æ‰€æœ‰ä¸»æœºã€‚å¹¿æ’­ä¼šå°†æ•°æ®å‘é€ç»™æ‰€æœ‰ä¸»æœºï¼Œå†ç”±è¿™äº›ä¸»æœºIPä¹‹ä¸Šçš„ä¸€å±‚å»åˆ¤æ–­æ˜¯å¦æ¥æ”¶æ•°æ®ï¼Œé€ æˆä¸å¿…è¦çš„æµé‡ï¼Œè€Œä¸”å¹¿æ’­æ— æ³•ç©¿é€è·¯ç”±ã€‚å¤šæ’­åˆ™å¯ä»¥ç©¿é€è·¯ç”±ï¼Œè¿˜å¯ä»¥å®ç°åªç»™é‚£äº›å¿…è¦çš„ç»„å‘é€æ•°æ®åŒ…ã€‚   å¤šæ’­å¤šä½¿ç”¨Dç±»åœ°å€ã€‚IPåœ°å€å‰å››ä½ä¸ºâ€œ1110â€,å°±å¯ä»¥è®¤ä¸ºæ˜¯å¤šæ’­åœ°å€ï¼Œå‰©ä¸‹çš„28ä½å¯ä»¥æˆä¸ºå¤šæ’­çš„ç»„æ’­å·ã€‚ä»224.0.0.0åˆ°239.255.255.255éƒ½æ˜¯å¤šæ’­åœ°å€çš„å¯ç”¨èŒƒå›´ã€‚å…¶ä¸­ä»224.0.0.0åˆ°224.0.0.255çš„èŒƒå›´ä¸éœ€è¦è·¯ç”±æ§åˆ¶ï¼Œåœ¨åŒä¸€ä¸ªé“¾è·¯å†…ä¹Ÿèƒ½å®ç°å¤šæ’­ã€‚åœ¨è¿™ä¸ªèŒƒå›´ä¹‹å¤–è®¾ç½®å¤šæ’­åœ°å€ä¼šç»™å…¨ç½‘æ‰€æœ‰ç»„å†…æˆå‘˜å‘é€å¤šæ’­çš„åŒ…ï¼ˆå¯ä»¥åˆ©ç”¨TTLï¼ˆç”Ÿå­˜æ—¶é—´ï¼ŒTime To Liveï¼‰é™åˆ¶åŒ…çš„åˆ°è¾¾ï¼‰ã€‚  å­ç½‘æ©ç   å¦‚ä½•ç†è§£å­ç½‘æ©ç ï¼š https://www.zhihu.com/question/56895036\n   ä¸€ä¸ªIPåœ°å€åªè¦ç¡®å®šäº†åˆ†ç±»ï¼Œä¹Ÿå°±ç¡®å®šäº†ç½‘ç»œæ ‡è¯†å’Œä¸»æœºæ ‡è¯†ã€‚ç½‘ç»œæ ‡è¯†ç›¸åŒçš„è®¡ç®—æœºå¿…é¡»åŒå±äºåŒä¸€ä¸ªé“¾è·¯ï¼ŒBç±»IPç½‘ç»œç†è®ºä¸Šå…è®¸65000å¤šå°è®¡ç®—æœºè¿æ¥ï¼Œç„¶è€Œå®é™…æ¶æ„ä¸­ä¸€èˆ¬ä¸ä¼šåœ¨åŒä¸€é“¾è·¯ä¸Šè¿æ¥è¿™ä¹ˆå¤šè®¡ç®—æœºçš„æƒ…å†µã€‚ç›´æ¥ä½¿ç”¨Aç±»å’ŒBç±»åœ°å€æœ‰ç‚¹æµªè´¹ï¼Œæ‰€ä»¥éœ€è¦ä¸€ç§æ–°çš„ç»„åˆæ–¹å¼æ¥å‡å°‘è¿™ç§æµªè´¹ã€‚\n  å­ç½‘æ©ç ä¹Ÿæ˜¯ä¸€ä¸ª32ä½çš„æ•°å­—ï¼Œå¯¹åº”IPåœ°å€ç½‘ç»œæ ‡è¯†éƒ¨åˆ†çš„ä½å…¨éƒ¨ä¸º\u0026rsquo;1\u0026rsquo;ï¼Œå¯¹åº”çš„IPåœ°å€ä¸»æœºæ ‡è¯†çš„éƒ¨åˆ†å…¨éƒ¨ä¸ºâ€œ0â€ï¼Œä»è€ŒIPåœ°å€å¯ä»¥ä¸å†å—é™äºè‡ªå·±çš„ç±»åˆ«ï¼Œè€Œæ˜¯å¯ä»¥ç”¨è¿™æ ·çš„å­ç½‘æ©ç è‡ªç”±çš„å®šä½è‡ªå·±çš„ç½‘ç»œæ ‡è¯†é•¿åº¦ï¼Œå­ç½‘æ©ç å¿…é¡»æ˜¯IPåœ°å€çš„é¦–ä½å¼€å§‹è¿ç»­çš„â€œ1â€ã€‚\n  è¡¨ç¤ºæ–¹å¼ï¼š\n å°†IPåœ°å€ä¸å­ç½‘æ©ç çš„åœ°å€åˆ†åˆ«ç”¨ä¸¤è¡Œæ¥è¡¨ç¤º åç¼€æ³•ï¼šåœ¨æ¯ä¸ªIPåœ°å€åé¢è¿½åŠ ç½‘ç»œåœ°å€çš„ä½æ•°ç”¨â€œ/â€éš”å¼€å¦‚ï¼š172.20.100.63 /26    CIDRä¸VLSM  CIDR: https://zh.wikipedia.org/wiki/%E6%97%A0%E7%B1%BB%E5%88%AB%E5%9F%9F%E9%97%B4%E8%B7%AF%E7%94%B1\n  IPåœ°å€åˆ†ç±»é€ æˆAç±»ç½‘å€ç”¨çš„å¾ˆå°‘ï¼ŒCç±»å¯å…è®¸è¿æ¥çš„ä¸»æœºæ•°é‡åªæœ‰254ï¼ŒBç±»åœ°å€è¢«å¤§é‡ç”³è¯·ï¼Œå¯¼è‡´ç¼ºä¹Bç±»åœ°å€ç¼ºä¹ï¼› å› æ­¤å¼€å§‹æ”¾å¼ƒIPåœ°å€çš„åˆ†ç±»ï¼Œé‡‡ç”¨ä»»æ„é•¿åº¦åˆ†å‰²IPåœ°å€çš„ç½‘ç»œæ ‡è¯†å’Œä¸»æœºæ ‡è¯†ï¼Œè¿™ç§æ–¹å¼å«CIDRï¼ˆClassless Inter-Domain Routingï¼Œæ— ç±»å‹åŸŸé—´è·¯ç”±ï¼‰; CIDRä¸»è¦æ˜¯ä¸€ä¸ªæŒ‰ä½çš„ã€åŸºäºå‰ç¼€çš„ï¼Œç”¨äºè§£é‡ŠIPåœ°å€çš„æ ‡å‡†ã€‚å®ƒé€šè¿‡æŠŠå¤šä¸ªåœ°å€å—ç»„åˆåˆ°ä¸€ä¸ªè·¯ç”±è¡¨è¡¨é¡¹è€Œä½¿å¾—è·¯ç”±æ›´åŠ æ–¹ä¾¿ã€‚è¿™äº›åœ°å€å—å«åšCIDRåœ°å€å— CIDRæ˜¯ä¸€ä¸ªç”¨äºç»™ç”¨æˆ·åˆ†é…IPåœ°å€ä»¥åŠåœ¨äº’è”ç½‘ä¸Šæœ‰æ•ˆåœ°è·¯ç”±IPæ•°æ®åŒ…çš„å¯¹IPåœ°å€è¿›è¡Œå½’ç±»çš„æ–¹æ³•ã€‚  CIDRè¡¨ç¤º  IPv4çš„CIDRåœ°å€å—çš„è¡¨ç¤ºæ–¹æ³•å’ŒIPv4åœ°å€çš„è¡¨ç¤ºæ–¹æ³•æ˜¯ç›¸ä¼¼çš„ï¼šç”±å››éƒ¨åˆ†ç»„æˆçš„ç‚¹åˆ†åè¿›åˆ¶åœ°å€ï¼Œåè·Ÿä¸€ä¸ªæ–œçº¿ï¼Œæœ€åæ˜¯èŒƒå›´åœ¨0åˆ°32ä¹‹é—´çš„ä¸€ä¸ªæ•°å­—ï¼šA.B.C.D/Nã€‚ç‚¹åˆ†åè¿›åˆ¶çš„éƒ¨åˆ†å’ŒIPv4åœ°å€ä¸€æ ·æ˜¯ä¸€ä¸ªè¢«åˆ†æˆå››ä¸ªå…«ä½ä½ç»„çš„32ä½äºŒè¿›åˆ¶æ•°ï¼Œæ–œçº¿åé¢çš„æ•°å­—å°±æ˜¯å‰ç¼€é•¿åº¦ï¼› å› ä¸ºIPv4åœ°å€çš„é•¿åº¦æ€»æ˜¯32ä½ï¼ŒNä½é•¿çš„CIDRå‰ç¼€å°±æ„å‘³ç€åœ°å€é‡Œå‰Nä½åŒ¹é…ï¼Œå{\\displaystyle 32-N}32-Nä½ä¸åŒ¹é…ã€‚è¿™äº›ä½æœ‰{\\displaystyle 2^{(32-N)}}2^{{(32-N)}}ç§ä¸åŒçš„ç»„åˆï¼Œå³{\\displaystyle 2^{(32-N)}}2^{{(32-N)}}ä¸ªIPv4åœ°å€ä¸CIDRåœ°å€å—çš„å‰ç¼€åŒ¹é…ã€‚å‰ç¼€è¶ŠçŸ­å°±èƒ½åŒ¹é…è¶Šå¤šçš„åœ°å€ï¼Œè¶Šé•¿å°±åŒ¹é…å¾—è¶Šå°‘ã€‚ä¸€ä¸ªåœ°å€å¯èƒ½ä¸å¤šä¸ªé•¿åº¦ä¸åŒçš„CIDRå‰ç¼€åŒ¹é…ã€‚  CIDRä¸å­ç½‘æ©ç   å­ç½‘æ©ç æ˜¯ä¸€ç§æŠŠå‰ç¼€ç¼–æˆä¸€ç§ä¸IPåœ°å€ç›¸ä¼¼çš„å½¢å¼çš„æ©ç ã€‚ä¸€ä¸ªå­ç½‘æ©ç ä¸€å…±æœ‰32ä½ï¼Œè¢«åˆ†ä¸ºè¿ç»­çš„ä¸¤éƒ¨åˆ†ï¼Œé«˜ä½éƒ¨åˆ†çš„æ¯ä¸€ä½éƒ½è¢«è®¾ä¸ºäºŒè¿›åˆ¶çš„1ï¼Œå…¶ä½™éƒ¨åˆ†çš„æ¯ä¸€ä½å‡è¢«è®¾ä¸ºäºŒè¿›åˆ¶çš„0ã€‚å…¶ä¸­ä¸º1çš„ä½çš„æ•°ç›®å’Œå‰ç¼€çš„é•¿åº¦ç›¸åŒã€‚å®ƒä¹Ÿè¢«å†™æˆç‚¹åˆ†åè¿›åˆ¶çš„å½¢å¼ã€‚å­ç½‘æ©ç çš„ä½œç”¨å’Œå‰ç¼€ä¸€æ ·ï¼Œä½†æ˜¯æ©ç è¿™ç§å½¢å¼å‡ºç°å¾—æ¯”å‰ç¼€è¦æ—©ï¼› CIDRç”¨å¯å˜é•¿å­ç½‘æ©ç  ï¼ˆVLSM,Variable Length Subnet Maskingï¼‰ï¼Œæ ¹æ®å„äººéœ€è¦æ¥åˆ†é…IPåœ°å€ï¼Œè€Œä¸æ˜¯æŒ‰ç…§ä¸€ä¸ªå…¨ç½‘ç»œçº¦å®šçš„è§„åˆ™ã€‚æ‰€ä»¥ï¼Œç½‘ç»œ/ä¸»æœºçš„åˆ’åˆ†å¯ä»¥åœ¨åœ°å€å†…çš„ä»»æ„ä½ç½®è¿›è¡Œã€‚è¿™ä¸ªåˆ’åˆ†å¯ä»¥æ˜¯é€’å½’è¿›è¡Œçš„ï¼Œå³é€šè¿‡å¢åŠ æ©ç ä½æ•°ï¼Œæ¥ä½¿ä¸€éƒ¨åˆ†åœ°å€è¢«ç»§ç»­åˆ†ä¸ºæ›´å°çš„éƒ¨åˆ†ã€‚æ•´ä¸ªäº’è”ç½‘ç°åœ¨éƒ½åœ¨ä½¿ç”¨CIDR/VLSMç½‘ç»œåœ°å€ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒCIDRä¹Ÿåº”ç”¨åœ¨å…¶ä»–æ–¹é¢ï¼Œå°¤å…¶æ˜¯å¤§å‹ç§äººç½‘ç»œã€‚åœ¨æ™®é€šå¤§å°çš„å±€åŸŸç½‘é‡Œåˆ™è¾ƒå°‘åº”ç”¨ï¼Œå› ä¸ºè¿™äº›å±€åŸŸç½‘ä¸€èˆ¬ä½¿ç”¨ç§æœ‰ç½‘ç»œã€‚  å‰ç¼€èšåˆ  CIDRçš„ä¸€ä¸ªå¥½å¤„åœ¨äºå‰ç¼€è·¯ç”±èšåˆï¼Œä¾‹å¦‚ï¼Œ16ä¸ªåŸæ¥çš„Cç±»ï¼ˆ/24ï¼‰ç½‘ç»œç°åœ¨å¯ä»¥èšåˆåœ¨ä¸€èµ·ï¼Œå¯¹å¤–æ˜¾ç¤ºäº†ä¸€ä¸ª/20çš„ç½‘ç»œäº†ï¼ˆå¦‚æœè¿™äº›ç½‘ç»œçš„çš„åœ°å€å‰20ä½éƒ½ç›¸åŒï¼‰ã€‚ä¸¤ä¸ªå¯¹é½çš„/20ç½‘ç»œåˆå¯è¿›ä¸€æ­¥èšåˆä¸º/19ï¼Œä¾æ­¤ç±»æ¨ã€‚è¿™æœ‰æ•ˆåœ°å‡å°‘äº†è¦å¯¹å¤–æ˜¾ç¤ºçš„ç½‘ç»œæ•°ï¼Œé˜²æ­¢äº†è·¯ç”±è¡¨çˆ†ç‚¸ï¼Œä¹Ÿéåˆ¶äº†äº’è”ç½‘è¿›ä¸€æ­¥æ‰©å¤§ã€‚ é€šå¸¸æ¥è¯´ï¼Œå­ç½‘ä¸­çš„ç¬¬ä¸€ä¸ªåœ°å€ï¼ˆä¸»æœºæ ‡è¯†ç¬¦ä¸­çš„æ‰€æœ‰äºŒè¿›åˆ¶é›¶çš„åœ°å€ï¼‰éƒ½ä¿ç•™ç”¨äºå¼•ç”¨ç½‘ç»œæœ¬èº«ï¼Œè€Œæœ€åä¸€ä¸ªåœ°å€ç”¨ä½œå¹¿æ’­åœ°å€ç”¨äºç½‘ç»œï¼› è¿™æ ·å¯ä»¥å°†å¯ç”¨äºä¸»æœºçš„åœ°å€æ•°é‡å‡å°‘2ä¸ªã€‚ç»“æœï¼Œä¸»æœºæ ‡è¯†ç¬¦ä¸­åªæœ‰ä¸€ä¸ªäºŒè¿›åˆ¶æ•°å­—çš„/31ç½‘ç»œå°†æ— æ³•ä½¿ç”¨ï¼Œå› ä¸ºè¿™æ ·çš„å­ç½‘åœ¨å‡å°‘ä¹‹åå°†ä¸æä¾›å¯ç”¨çš„ä¸»æœºåœ°å€ã€‚RFC 3021ä¸ºâ€œå…¨ä¸ºä¸€çš„ä¸»æœºâ€å’Œâ€œå…¨ä¸ºé›¶çš„ä¸»æœºâ€è§„åˆ™åˆ›å»ºäº†ä¸€ä¸ªä¾‹å¤–ï¼Œä»¥ä½¿/31ç½‘ç»œå¯ç”¨äºç‚¹å¯¹ç‚¹é“¾æ¥ã€‚/31åœ°å€ï¼ˆå•ä¸»æœºç½‘ç»œï¼‰å¿…é¡»é€šè¿‡æ˜ç¡®çš„è·¯ç”±è§„åˆ™è®¿é—®ï¼Œå› ä¸ºåœ¨è¿™ç§ç½‘ç»œä¸­æ²¡æœ‰ç½‘å…³çš„ç©ºé—´ã€‚ åœ¨å¤§äº*/31*æˆ–*/32*çš„è·¯ç”±å­ç½‘ä¸­ï¼Œå¯ç”¨ä¸»æœºåœ°å€çš„æ•°ç›®é€šå¸¸å‡å°‘ä¸¤ä¸ªï¼Œå³ä¿ç•™ä½œä¸ºå¹¿æ’­åœ°å€çš„æœ€å¤§åœ°å€å’Œæ ‡è¯†ç½‘ç»œæœ¬èº«çš„æœ€å°åœ°å€ã€‚     IP/CIDR Î” ä¸æœ€åä¸€ä¸ªåœ°å€çš„å·®å€¼ æ©ç  ä¸»æœºæ•° (*) ç±»åˆ« å¤‡æ³¨     a.b.c.d**/32** +0.0.0.0 255.255.255.255 1 1/256 C    a.b.c.d**/31** +0.0.0.1 255.255.255.254 2 1/128 C d = 0 \u0026hellip; (2n) \u0026hellip; 254   a.b.c.d**/30** +0.0.0.3 255.255.255.252 4 1/64 C d = 0 \u0026hellip; (4n) \u0026hellip; 252   a.b.c.d**/29** +0.0.0.7 255.255.255.248 8 1/32 C d = 0 \u0026hellip; (8n) \u0026hellip; 248   a.b.c.d**/28** +0.0.0.15 255.255.255.240 16 1/16 C d = 0 \u0026hellip; (16n) \u0026hellip; 240   a.b.c.d**/27** +0.0.0.31 255.255.255.224 32 1/8 C d = 0 \u0026hellip; (32n) \u0026hellip; 224   a.b.c.d**/26** +0.0.0.63 255.255.255.192 64 1/4 C d = 0, 64, 128, 192   a.b.c.d**/25** +0.0.0.127 255.255.255.128 128 1/2 C d = 0, 128   a.b.c.0**/24** +0.0.0.255 255.255.255.000 256 1 C    a.b.c.0**/23** +0.0.1.255 255.255.254.000 512 2 C c = 0 \u0026hellip; (2n) \u0026hellip; 254   a.b.c.0**/22** +0.0.3.255 255.255.252.000 1,024 4 C c = 0 \u0026hellip; (4n) \u0026hellip; 252   a.b.c.0**/21** +0.0.7.255 255.255.248.000 2,048 8 C c = 0 \u0026hellip; (8n) \u0026hellip; 248   a.b.c.0**/20** +0.0.15.255 255.255.240.000 4,096 16 C c = 0 \u0026hellip; (16n) \u0026hellip; 240   a.b.c.0**/19** +0.0.31.255 255.255.224.000 8,192 32 C c = 0 \u0026hellip; (32n) \u0026hellip; 224   a.b.c.0**/18** +0.0.63.255 255.255.192.000 16,384 64 C c = 0, 64, 128, 192   a.b.c.0**/17** +0.0.127.255 255.255.128.000 32,768 128 C c = 0, 128   a.b.0.0**/16** +0.0.255.255 255.255.000.000 65,536 256 C = 1 B    a.b.0.0**/15** +0.1.255.255 255.254.000.000 131,072 2 B b = 0 \u0026hellip; (2n) \u0026hellip; 254   a.b.0.0**/14** +0.3.255.255 255.252.000.000 262,144 4 B b = 0 \u0026hellip; (4n) \u0026hellip; 252   a.b.0.0**/13** +0.7.255.255 255.248.000.000 524,288 8 B b = 0 \u0026hellip; (8n) \u0026hellip; 248   a.b.0.0**/12** +0.15.255.255 255.240.000.000 1,048,576 16 B b = 0 \u0026hellip; (16n) \u0026hellip; 240   a.b.0.0**/11** +0.31.255.255 255.224.000.000 2,097,152 32 B b = 0 \u0026hellip; (32n) \u0026hellip; 224   a.b.0.0**/10** +0.63.255.255 255.192.000.000 4,194,304 64 B b = 0, 64, 128, 192   a.b.0.0**/9** +0.127.255.255 255.128.000.000 8,388,608 128 B b = 0, 128   a.0.0.0**/8** +0.255.255.255 255.000.000.000 16,777,216 256 B = 1 A    a.0.0.0**/7** +1.255.255.255 254.000.000.000 33,554,432 2 A a = 0 \u0026hellip; (2n) \u0026hellip; 254   a.0.0.0**/6** +3.255.255.255 252.000.000.000 67,108,864 4 A a = 0 \u0026hellip; (4n) \u0026hellip; 252   a.0.0.0**/5** +7.255.255.255 248.000.000.000 134,217,728 8 A a = 0 \u0026hellip; (8n) \u0026hellip; 248   a.0.0.0**/4** +15.255.255.255 240.000.000.000 268,435,456 16 A a = 0 \u0026hellip; (16n) \u0026hellip; 240   a.0.0.0**/3** +31.255.255.255 224.000.000.000 536,870,912 32 A a = 0 \u0026hellip; (32n) \u0026hellip; 224   a.0.0.0**/2** +63.255.255.255 192.000.000.000 1,073,741,824 64 A a = 0, 64, 128, 192   a.0.0.0**/1** +127.255.255.255 128.000.000.000 2,147,483,648 128 A a = 0, 128   0.0.0.0**/0** +255.255.255.255 000.000.000.000 4,294,967,296 256 A     å…¨å±€åœ°å€ä¸ç§æœ‰åœ°å€  è¦æ˜¯å…¨éƒ¨IPéƒ½è¦æ±‚å”¯ä¸€åŒ–ï¼ŒIPåœ°å€ä¸è¶³çš„é—®é¢˜ä¼šæ›´åŠ æ˜æ˜¾ï¼Œæ‰€ä»¥å‡ºç°äº†ç§æœ‰åœ°å€ï¼Œåœ°å€èŒƒå›´å¦‚ä¸‹ï¼š  Aç±»ï¼š10.0.0.0~10.255.255.255 ï¼ˆ10/8ï¼‰ Bç±»ï¼š172.16.0.0~172.31.255.255 ï¼ˆ172.16/12ï¼‰ Cç±»ï¼š192.168.0.0~192.168.255.255ï¼ˆ192.168/16ï¼‰   åœ¨è¿™äº›ç§æœ‰IPåœ°å€èŒƒå›´ä¹‹å¤–çš„éƒ½æ˜¯å…¨å±€IPï¼Œå…¨å±€IPåŸºæœ¬ä¸Šè¦æ±‚åœ¨æ•´ä¸ªäº’è”ç½‘èŒƒå›´å†…ä¿æŒå”¯ä¸€ï¼ˆåœ¨ä½¿ç”¨ä»»æ’­çš„æƒ…å†µä¸‹ï¼Œå¤šå°ä¸»æœºæˆ–è€…è·¯ç”±å™¨å¯ä»¥è®¾ç½®åŒä¸€ä¸ªIPï¼‰ï¼Œè€Œç§æœ‰åœ°å€åªéœ€è¦åœ¨åŒä¸€ä¸ªåŸŸå†…ä¿è¯å”¯ä¸€å³å¯ã€‚  è·¯ç”±æ§åˆ¶  è·¯ç”±æ§åˆ¶è¡¨ä¸­è®°å½•ç€ç½‘ç»œåœ°å€ä¸ä¸‹ä¸€æ­¥åº”è¯¥å‘é€çš„è·¯ç”±å™¨çš„åœ°å€ã€‚è·¯ç”±å™¨æ ¹æ®IPåŒ…çš„ç›®æ ‡åœ°å€ä»æ§åˆ¶è¡¨ä¸­æ‰¾åˆ°ä¸è¯¥åœ°å€å…·æœ‰ç›¸åŒåœ°å€çš„è®°å½•ï¼Œæ ¹æ®è¯¥è®°å½•å°†IPåŒ…è½¬å‘ç»™ç›¸åº”çš„çš„ä¸‹ä¸€ä¸ªè·¯ç”±å™¨ã€‚å¦‚æœè·¯ç”±æ§åˆ¶è¡¨å­˜åœ¨å¤šæ¡ç›¸åŒç½‘ç»œåœ°å€çš„è®°å½•ï¼Œå°±é€‰æ‹©ç½‘ç»œåœ°å€ç›¸åŒä½æ•°æœ€å¤šçš„ï¼Œä¹Ÿå«æœ€é•¿åŒ¹é…ï¼› é»˜è®¤è·¯ç”±ï¼š  é»˜è®¤è·¯ç”±æ˜¯æŒ‡è·¯ç”±è¡¨ä¸­ä»»ä½•ä¸€ä¸ªåœ°å€éƒ½èƒ½ä¸ä¹‹åŒ¹é…çš„è®°å½•ï¼Œä¸€èˆ¬æ ‡è®°ä¸º0.0.0.0/0æˆ–è€…default   ä¸»æœºè·¯ç”±ï¼š  IPåœ°å€/32ä¹Ÿè¢«ç§°ä¸ºä¸»æœºè·¯ç”±ï¼ˆHost Routeï¼‰ï¼Œæ•´ä¸ªIPåœ°å€çš„æ‰€æœ‰ä½éƒ½å‚ä¸è·¯ç”±ã€‚è¿›è¡Œä¸»æœºè·¯ç”±æ„å‘³ç€åŸºäºä¸»æœºä¸Šç½‘å¡é…ç½®çš„IPåœ°å€æœ¬èº«ï¼Œè€Œä¸æ˜¯åŸºäºè¯¥åœ°å€çš„ç½‘ç»œéƒ¨åˆ†è¿›è¡Œè·¯ç”± ä¸»æœºè·¯ç”±å¤šç”¨äºä¸å¸Œæœ›é€šè¿‡ç½‘ç»œåœ°å€è·¯ç”±çš„æƒ…å†µï¼Œä½†ä¼šå¯¼è‡´è·¯ç”±è¡¨è†¨å¤§ï¼Œè·¯ç”±ç¬¦åˆå¢åŠ ï¼Œè¿›è€Œé€ æˆç½‘ç»œæ€§èƒ½ä¸‹é™ã€‚   ç¯å›åœ°å€  å³localhost(127.0.0.1),ç”¨äºåœ¨åŒä¸€å°è®¡ç®—æœºä¸Šçš„ç¨‹åºä¹‹é—´è¿›è¡Œç½‘ç»œé€šä¿¡ï¼Œä½¿ç”¨è¿™ä¸ªIPæ—¶ï¼Œæ•°æ®åŒ…ä¸ä¼šæµå‘ç½‘ç»œ   è·¯ç”±æ§åˆ¶è¡¨çš„èšåˆ  å¦‚å°†192.168.2.0/24ä¸192.168.3.0/24èšåˆæˆ192.168.2.0/23    IPåˆ†å‰²å¤„ç†ä¸å†æ„æˆå¤„ç†  IPæŠ¥æ–‡çš„åˆ†ç‰‡ï¼ˆIP Fragmentationï¼‰ä¸é‡ç»„  å½“IPæ•°æ®æŠ¥å¤§äºé“¾è·¯MTUæ—¶ï¼Œè·¯ç”±å™¨å°±ä¼šå°†æ•°æ®åŒ…ä»¥8ä¸ªå­—èŠ‚çš„å€æ•°ä¸ºå•ä½è¿›è¡Œåˆ†ç‰‡å¤„ç†ï¼Œæœ€ååœ¨ç›®æ ‡ä¸»æœºé‡ç»„åˆ†ç‰‡   è·¯å¾„MTUå‘ç°  åˆ†ç‰‡ä»»åŠ¡å¯¹è·¯ç”±å™¨çš„è´Ÿæ‹…å¤ªé‡ï¼Œè€Œä¸”è¿˜æœ‰æœ‰åˆ†ç‰‡ä¸¢å¤±çš„é£é™©ï¼Œæ‰€ä»¥æœ‰äº†è·¯å¾„MTUå‘ç° è·¯å¾„MTUå‘ç°æŒ‡ä»å‘é€ç«¯åˆ°æ¥æ”¶ç«¯ä¸éœ€è¦åˆ†ç‰‡æ—¶MTUçš„å¤§å°ï¼Œå³è·¯å¾„ä¸­å­˜åœ¨çš„æ‰€æœ‰æ•°æ®é“¾è·¯ä¸­æœ€å°çš„MTUï¼Œä»è€Œé¿å…äº†åœ¨ä¸­é€”çš„è·¯ç”±å™¨ä¸Šè¿›è¡Œåˆ†ç‰‡å¤„ç† åŸç†ï¼ˆä»¥UDPä¸ºä¾‹ï¼‰ï¼š  é¦–å…ˆåœ¨å‘é€ç«¯å‘é€IPæ•°æ®æŠ¥æ—¶å°†é¦–éƒ¨çš„åˆ†ç‰‡ç¦æ­¢æ ‡å¿—è®¾ç½®ä¸º1ï¼Œè¿™æ ·é€”ä¸­çš„è·¯ç”±å™¨å³æ—¶é‡åˆ°éœ€è¦åˆ†ç‰‡æ‰èƒ½å¤„ç†çš„å¤§åŒ…ï¼Œä¹Ÿä¸ä¼šå¤„ç†ï¼Œè€Œæ˜¯å°†å…¶ä¸¢å¼ƒï¼Œéšåé€šè¿‡ICMPçš„ä¸å¯è¾¾æ¶ˆæ¯å°†æ•°æ®é“¾è·¯ä¸Šçš„MTUç»™å‘é€ç«¯ ä¸‹ä¸€æ¬¡ï¼Œä»å‘é€ç»™åŒä¸€ä¸ªç›®æ ‡çš„IPæ•°æ®æŠ¥è·å¾—ICMPæ‰€é€šçŸ¥çš„MTUå€¼åï¼Œå°†å®ƒè®¾ç½®ä¸ºå½“å‰MTUï¼Œå‘é€ç«¯è¿›è¡Œåˆ†ç‰‡å¤„ç†ï¼Œ å¦‚æ­¤åå¤è¿›è¡Œï¼Œç›´åˆ°å‘åˆ°æ¥æ”¶ç«¯å‰æ²¡æœ‰å†æ”¶åˆ°ICMPï¼Œå°±è®¤ä¸ºæœ€åä¸€æ¬¡ICMPæ‰€é€šçŸ¥çš„MTUæ˜¯åˆé€‚çš„MTU è€Œåœ¨TCPçš„æƒ…å†µä¸‹ï¼Œä¼šæ ¹æ®è·¯å¾„MTUå‘ç°è®¡ç®—å‡ºæœ€å¤§æ®µMSSï¼Œåˆ†ç‰‡å¤„ç†åˆ™äº¤ç»™äº†TCPå±‚ï¼Œè€ŒIPå±‚ä¸å†è´Ÿè´£åˆ†ç‰‡      IPv4é¦–éƒ¨   ç‰ˆæœ¬\n IPv4ç‰ˆæœ¬å·å³ä¸º4ï¼ŒIPv6ç‰ˆæœ¬å·ä¸º6    é¦–éƒ¨é•¿åº¦\n è¡¨æ˜IPé¦–éƒ¨çš„å¤§å°ï¼Œå•ä½ä¸º4å­—èŠ‚ã€‚å¯¹äºæ²¡æœ‰å¯é€‰é¡¹çš„IPåŒ…ï¼Œåˆ™è®¾ç½®ä¸º5 ï¼Œå³IPé¦–éƒ¨çš„å¤§å°ä¸ºï¼š4x5=20å­—èŠ‚    åŒºåˆ†æœåŠ¡\n è¡¨ç¤ºæœåŠ¡è´¨é‡    DSCPæ®µä¸ECNæ®µ\n  DSCPï¼ˆDifferential Services Codepointï¼Œå·®åˆ†æœåŠ¡ä»£ç ç‚¹ï¼‰ï¼Œç”¨äºè´¨é‡æ§åˆ¶\n  ECNï¼ˆExplicit Congestion Notificationï¼Œæ˜¾å¼æ‹¥å¡é€šå‘Šï¼‰ï¼Œç”¨äºæŠ¥å‘Šç½‘ç»œæ‹¥å¡æƒ…å†µï¼Œç”±ä¸¤ä¸ªæ¯”ç‰¹æ„æˆ\n     æ¯”ç‰¹ä½ ç®€ç§° å«ä¹‰     6 ECT ECN-Capable Transport   7 CE Congenstion Experienced     ç¬¬å…­ä½çš„ECTç”¨äºé€šå‘Šä¸Šå±‚TCPå±‚åè®®æ˜¯å¦å¤„ç†ECNï¼Œå½“è·¯ç”±å™¨åœ¨è½¬å‘ECNä¸º1çš„åŒ…çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå‡ºç°ç½‘ç»œæ‹¥å¡çš„æƒ…å†µï¼Œåˆ™å°†CEä½è®¾ç½®ä¸º1.      æ€»é•¿åº¦\n IPé¦–éƒ¨ä¸æ•°æ®éƒ¨åˆ†åˆèµ·æ¥çš„æ€»å­—èŠ‚æ•°ã€‚è¯¥å­—æ®µé•¿16æ¯”ç‰¹ï¼Œæ‰€ä»¥IPåŒ…çš„æœ€å¤§é•¿åº¦ä¸º65535å­—èŠ‚    æ ‡å¿—\n ç”¨äºè¡¨ç¤ºåŒ…è¢«åˆ†ç‰‡çš„ç›¸å…³ä¿¡æ¯    ç‰‡åç§»\n ç”¨äºè¡¨ç¤ºæ¯ä¸€ä¸ªåˆ†æ®µç›¸å¯¹äºåŸå§‹æ•°æ®çš„ä½ç½®ã€‚ç¬¬ä¸€ä¸ªåˆ†ç‰‡å¯¹åº”çš„å€¼ä¸º0.FOå 13ä½ï¼Œå› æ­¤æœ€å¤šå¯è¡¨è¾¾8192ä¸ªç›¸å¯¹ä½ç½®ï¼Œå•ä½ä¸º8å­—èŠ‚ï¼Œå› æ­¤æœ€å¤§å¯è¡¨ç¤ºåŸå§‹æ•°æ®8x8192=65535ä¸ªå­—èŠ‚çš„ä½ç½®    ç”Ÿå­˜æ—¶é—´\n æŒ‡å¯ä»¥ä¸­è½¬å¤šå°‘ä¸ªè·¯ç”±å™¨ï¼Œæ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨ã€‚TTLå‡1ï¼Œç›´åˆ°å˜æˆ0åˆ™ä¸¢å¼ƒè¯¥åŒ…ï¼Œç»è¿‡è·¯ç”±å™¨çš„ä¸ªæ•°ä¸ä¼šè¶…è¿‡256ä¸ªï¼Œå› æ­¤å¯ä»¥é¿å…IPåŒ…åœ¨ç½‘ç»œå†…æ— é™ä¼ é€’çš„é—®é¢˜    åè®®\n è¡¨ç¤ºIPé¦–éƒ¨çš„ä¸‹ä¸€ä¸ªé¦–éƒ¨éš¶å±äºå“ªä¸ªåè®®ã€‚    é¦–éƒ¨æ ¡éªŒå’Œ\n æŒ‡æ ¡éªŒæ•°æ®æŠ¥çš„é¦–éƒ¨ï¼Œä¸æ ¡éªŒæ•°æ®éƒ¨åˆ† ç”¨æ¥ç¡®ä¿IPæ•°æ®åŒ…ä¸è¢«ç ´å é¦–å…ˆå°†è¯¥æ ¡éªŒå’Œçš„æ‰€æœ‰ä½ç½®è®¾ç½®ä¸º0ï¼Œç„¶åä»¥16æ¯”ç‰¹ä¸ºå•ä½åˆ’åˆ†IPé¦–éƒ¨ï¼Œå¹¶ç”¨1è¡¥æ•°è®¡ç®—æ‰€æœ‰16ä½çš„å’Œï¼Œæœ€åå°†æ‰€å¾—åˆ°çš„å’Œçš„1è¡¥æ•°èµ‹ç»™é¦–éƒ¨æ ¡éªŒå’Œå­—æ®µ    æºåœ°å€\n è¡¨ç¤ºå‘é€ç«¯IPåœ°å€    ç›®æ ‡åœ°å€\n è¡¨ç¤ºæ¥æ”¶ç«¯IPåœ°å€    å¯é€‰é¡¹\n é•¿åº¦å¯å˜ï¼Œé€šå¸¸åªç”¨åœ¨å®éªŒå’Œè¯Šæ–­æ—¶ä½¿ç”¨    å¡«å……\n åœ¨æœ‰å¯é€‰é¡¹çš„æƒ…å†µä¸‹ï¼Œé¦–éƒ¨é•¿åº¦æœ‰å¯èƒ½ä¸æ˜¯32æ¯”ç‰¹çš„æ•´æ•°å€ï¼Œé€šè¿‡å‘å­—æ®µå¡«å……0ï¼Œè°ƒæ•´ä¸º32æ¯”ç‰¹çš„æ•´æ•°å€    IPv6é¦–éƒ¨æ ¼å¼  IPv6ä¸ºäº†å‡è½»è·¯ç”±å™¨çš„è´Ÿæ‹…ï¼Œçœç•¥äº†é¦–éƒ¨æ ¡éªŒå’Œå­—æ®µï¼Œå› ä¸ºTCPå’ŒUDPåœ¨åšæ ¡éªŒå’Œè®¡ç®—çš„æ—¶å€™ä½¿ç”¨ä¼ªé¦–éƒ¨ï¼Œæ‰€ä»¥å¯ä»¥éªŒè¯IPåœ°å€æˆ–åè®®æ˜¯å¦æ­£ç¡® ç‰ˆæœ¬  åŒIPv4   é€šä¿¡é‡ç±»  ç›¸å½“äºIPvçš„TOS   æµæ ‡å·  å‡†å¤‡ç”¨äºæœåŠ¡è´¨é‡æ§åˆ¶   æœ‰æ•ˆè½½è·é•¿åº¦  æŒ‡åŒ…çš„æ•°æ®éƒ¨åˆ†ï¼Œä¸åŒ…æ‹¬é¦–éƒ¨   ä¸‹ä¸€ä¸ªé¦–éƒ¨  ç›¸å½“äºIPv4çš„åè®®å­—æ®µ   è·³æ•°é™åˆ¶  ç›¸å½“äºIPv4çš„TTL   æºåœ°å€ ç›®æ ‡åœ°å€  IPv6æ‰©å±•é¦–éƒ¨  IPv6çš„é¦–éƒ¨é•¿åº¦å›ºå®šï¼Œæ— æ³•å°†å¯é€‰é¡¹åŠ å…¥å…¶ä¸­ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯é€šè¿‡æ‰©å±•é¦–éƒ¨å¯¹åŠŸèƒ½æœ‰äº†æ•ˆæ‰©å±•ã€‚ IPv6æ‰©å±•é¦–éƒ¨é€šå¸¸ä»‹äºIPv6é¦–éƒ¨ä¸TCP/UDPé¦–éƒ¨ä¸­é—´ IPv6é¦–éƒ¨ä¸­æ²¡æœ‰æ ‡è¯†ä»¥åŠæ ‡è¯†å­—æ®µï¼Œåœ¨éœ€è¦å¯¹IPæ•°æ®æŠ¥è¿›è¡Œåˆ†ç‰‡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ‰©å±•é¦–éƒ¨  ã€‚\n","description":"tabs, code-tabs, expand, alert, warning, notice, img, box","id":28,"section":"posts","tags":["å›¾è§£TCPIP"],"title":"IP","uri":"https://mrxiaoling.github.io/en/posts/%E5%9B%BE%E8%A7%A3tcpip/ip%E5%8D%8F%E8%AE%AE/"},{"content":"ä»…å‡­IPæ— æ³•å®Œæˆé€šä¿¡  å®é™…ä½¿ç”¨ä¸­å¾ˆå°‘è¾“å…¥IPï¼Œè€Œæ˜¯ç›´æ¥è¾“å…¥ç½‘å€ æ•°æ®é“¾è·¯å±‚ä¹Ÿä¸ä½¿ç”¨IPåœ°å€ï¼Œåœ¨ä»¥å¤ªç½‘çš„æƒ…å†µä¸‹åªä½¿ç”¨MACåœ°å€  DNS  IPåœ°å€ä¸ä¾¿è®°å¿†ï¼Œä½¿ç”¨æ›´å¤šçš„æ˜¯åŸŸå DNSç»´æŠ¤çš„æ˜¯åŸŸåï¼ˆä¸»æœºåï¼‰å’ŒIPåœ°å€ä¹‹é—´çš„å¯¹åº”å…³ç³»  åŸŸåçš„æ„æˆ  DNSçš„åˆ†å±‚ç±»ä¼¼äºå€’æŒ‚çš„æ ‘ï¼Œæœ€é¡¶å±‚çš„æ˜¯æ ‘çš„æ ¹ï¼ˆRootï¼‰ï¼Œç¬¬äºŒå±‚æ˜¯å›½å®¶åŸŸåï¼ˆcn,jp,ukï¼‰å’Œeduï¼Œcomç­‰ç‰¹å®šé¢†åŸŸçš„åŸŸå åŸŸåæœåŠ¡å™¨  æŒ‡ç®¡ç†åŸŸåçš„ä¸»æœºå’Œç›¸åº”çš„è½¯ä»¶ æ ¹åŸŸåæœåŠ¡å™¨æ³¨å†Œç€æ ¹ä»¥ä¸‹ç¬¬ä¸€å±‚åŸŸåæœåŠ¡å™¨çš„IPåœ°å€ï¼›ç±»ä¼¼çš„ï¼Œæ¯ä¸€å±‚åŸŸåæœåŠ¡å™¨æ³¨å†Œç€å…¶ä¸‹ä¸€å±‚åŸŸåæœåŠ¡å™¨çš„IPåœ°å€   è§£æå™¨ï¼ˆResolverï¼‰  è¿›è¡ŒDNSæŸ¥è¯¢çš„ä¸»æœºå’Œè½¯ä»¶å«åšDNSè§£æå™¨    DNSæŸ¥è¯¢  è§£æå™¨ä¸ºäº†æŸ¥IPåœ°å€ï¼Œé¦–å…ˆå‘åŸŸåæœåŠ¡å™¨è¿›è¡ŒæŸ¥è¯¢ï¼Œæ¥æ”¶è¿™ä¸ªæŸ¥è¯¢è¯·æ±‚çš„åŸŸåæœåŠ¡å™¨é¦–å…ˆä¼šåœ¨è‡ªå·±çš„æ•°æ®åº“è¿›è¡ŒæŸ¥æ‰¾ï¼Œå¦‚æœæŸ¥åˆ°äº†å°±è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå¦åˆ™åˆ™å‘ä¸Šä¸€å±‚åŸŸåæœåŠ¡å™¨è¯·æ±‚æŸ¥è¯¢ï¼Œä»¥æ­¤ç±»æ¨  ARP  ARPä»¥ç›®æ ‡IPåœ°å€ä¸ºçº¿ç´¢ï¼Œç”¨æ¥å®šä½ä¸‹ä¸€ä¸ªåº”è¯¥æ¥æ”¶æ•°æ®åˆ†åŒ…çš„ç½‘ç»œè®¾å¤‡å¯¹åº”çš„MACåœ°å€ã€‚å¦‚æœç›®æ ‡ä¸»æœºä¸å†åŒä¸€ä¸ªé“¾è·¯ä¸Šå°±å¯ä»¥é€šè¿‡ARPæŸ¥æ‰¾ä¸‹ä¸€è·³è·¯ç”±å™¨çš„MACåœ°å€ ARPåªé€‚ç”¨äºIPv4,IPv6ä½¿ç”¨ICMPv6ä»£æ›¿ARP  ARPå·¥ä½œæœºåˆ¶  å‘é€ä¸»æœºä¼šé€šè¿‡å¹¿æ’­å‘é€ä¸€ä¸ªARPè¯·æ±‚åŒ…ï¼Œè¿™ä¸ªåŒ…ä¸­åŒ…å«ç›®æ ‡ä¸»æœºçš„IPåœ°å€ï¼Œå¹¿æ’­çš„åŒ…å¯ä»¥è¢«åŒä¸€ä¸ªé“¾è·¯ä¸Šæ‰€æœ‰çš„ä¸»æœºæˆ–è·¯ç”±å™¨ç»“æŸï¼Œå¦‚æœARPè¯·æ±‚åŒ…çš„ç›®æ ‡IPåœ°å€ä¸è‡ªå·±IPåœ°å€ä¸€è‡´ï¼Œé‚£ä¹ˆè¿™ä¸ªèŠ‚ç‚¹å°±å°†è‡ªå·±çš„MACåœ°å€å¡å…¥ARPå“åº”åŒ…è¿”å›ç»™å‘é€ä¸»æœº é€šå¸¸ä¼šå°†è·å–åˆ°çš„MACåœ°å€ç¼“å­˜åˆ°ARPç¼“å­˜è¡¨ä¸­ä¸€æ®µæ—¶é—´  RARP  Reverse Address Resolution Protocolï¼Œæ˜¯ä¸€ç§ä»MACå®šä½IPåœ°å€çš„ä¸€ç§åè®®  ICMP  Internet Control Message Protocol ï¼Œ äº’è”ç½‘æ§åˆ¶æ¶ˆæ¯åè®® ä¸»è¦åŠŸèƒ½ï¼š  ç¡®è®¤IPåŒ…æ˜¯å¦æˆåŠŸé€è¾¾ç›®æ ‡åœ°å€ï¼Œé€šçŸ¥åœ¨å‘é€è¿‡ç¨‹å½“ä¸­IPåŒ…è¢«åºŸå¼ƒçš„å…·ä½“çš„åŸå› ï¼Œæ”¹å–„ç½‘ç»œè®¾ç½®   ICMPçš„æ¶ˆæ¯ç±»å‹  é€šçŸ¥å‡ºé”™åŸå› çš„é”™è¯¯æ¶ˆæ¯ ç”¨äºè¯Šæ–­çš„æŸ¥è¯¢æ¶ˆæ¯   ä¸»è¦çš„ICMPæ¶ˆæ¯  ICMPç›®æ ‡ä¸å¯è¾¾æ¶ˆæ¯ï¼ˆç±»å‹3ï¼‰ ICMPé‡å®šå‘æ¶ˆæ¯ï¼ˆç±»å‹5ï¼‰  å¦‚æœè·¯ç”±å™¨å‘ç°å‘é€ç«¯ä¸»æœºä½¿ç”¨äº†æ¬¡ä¼˜çš„è·¯å¾„å‘é€æ•°æ®ï¼Œé‚£ä¹ˆä»–ä¼šè¿”å›ä¸€ä¸ªICMPé‡å®šå‘çš„æ¶ˆæ¯ç»™ä¸»æœºï¼Œåœ¨è¿™ä¸ªæ¶ˆæ¯ä¸­åŒ…å«äº†æœ€åˆé€‚çš„è·¯ç”±ä¿¡æ¯å’Œæºæ•°æ®   ICMPè¶…æ—¶æ¶ˆæ¯ï¼ˆç±»å‹11ï¼‰  IPåŒ…ä¸­TTLå‡åˆ°0è¢«ä¸¢å¼ƒæ—¶IPè·¯ç”±å™¨å°†ä¼šå‘é€ä¸€ä¸ªICMPè¶…æ—¶çš„æ¶ˆæ¯ï¼Œå¹¶é€šçŸ¥è¯¥åŒ…å·²è¢«ä¸¢å¼ƒ   ICMPå›é€æ¶ˆæ¯ï¼ˆç±»å‹0ã€8ï¼‰  ç”¨äºè¿›è¡Œé€šä¿¡çš„ä¸»æœºæˆ–è€…è·¯ç”±å™¨ä¹‹é—´ï¼Œåˆ¤æ–­æ‰€å‘é€çš„æ•°æ®åŒ…æ˜¯å¦æˆåŠŸåˆ°è¾¾å¯¹ç«¯çš„ä¸€ç§æ¶ˆæ¯ï¼ŒåŒ…æ‹¬å‘å¯¹ç«¯ä¸»æœºå‘é€å›é€è¯·æ±‚çš„æ¶ˆæ¯ï¼ˆICMP Echo Request Messageï¼Œç±»å‹8ï¼‰å’Œæ¥æ”¶ç«¯ä¸»æœºå‘å›æ¥çš„å›é€åº”ç­”æ¶ˆæ¯ï¼ˆICMP Echo Reply Messageï¼Œç±»å‹0ï¼‰ï¼Œpingå‘½ä»¤å°±æ˜¯åˆ©ç”¨è¿™ä¸ªæ¶ˆæ¯å®ç°çš„      DHCP  Dynamic Host Configuration Protocolï¼ŒåŠ¨æ€ä¸»æœºè®¾ç½®åè®® å·¥ä½œæœºåˆ¶  é¦–å…ˆéœ€è¦æœ‰DHCPæœåŠ¡å™¨ï¼Œç„¶åå°†DHCPæ‰€è¦åˆ†é…çš„IPåœ°å€è®¾ç½®åˆ°æœåŠ¡å™¨ä¸Šï¼Œæ­¤å¤–è¿˜éœ€è¦å°†ç›¸åº”çš„å­ç½‘æ©ç ã€è·¯ç”±æ§åˆ¶ä¿¡æ¯ä»¥åŠDNSæœåŠ¡å™¨çš„åœ°å€ç­‰è®¾ç½®åˆ°æœåŠ¡å™¨ä¸Š    NAT  Network Address Translator ç”¨äºåœ¨æœ¬åœ°ç½‘ç»œä¸­ä½¿ç”¨ç§æœ‰åœ°å€ï¼Œåœ¨è¿æ¥äº’è”ç½‘æ—¶è½¬ç”¨å…¨å±€IPåœ°å€ ä¾‹å¦‚10.0.0.10çš„ä¸»æœºä¸163.221.120.9çš„ä¸»æœºé€šä¿¡ï¼Œåˆ©ç”¨NATï¼Œå›¾ä¸­çš„NATè·¯ç”±å™¨å°†å‘é€æºåœ°å€ä»10.0.0.10è½¬æ¢ä¸ºå…¨å±€IPåœ°å€202.244.174.37å†å‘é€æ•°æ®ï¼ŒåŒç†ï¼Œå½“åŒ…ä»163.221.120.9å‘è¿‡æ¥æ—¶ï¼Œç›®æ ‡åœ°å€202.244.174.37å…ˆè¢«è½¬æ¢æˆç§æœ‰IPåœ°å€10.0.0.10ä»¥åå†è¢«è½¬å‘ã€‚ NATè·¯ç”±å™¨å†…éƒ¨æœ‰ä¸€å¼ è‡ªåŠ¨ç”Ÿæˆçš„è½¬æ¢åœ°å€çš„è¡¨ NATçš„æ½œåœ¨é—®é¢˜ï¼š  æ— æ³•ä»NATå¤–éƒ¨å‘å†…éƒ¨æœåŠ¡å™¨å»ºç«‹è¿æ¥ è½¬æ¢è¡¨çš„ç”Ÿæˆä¸è½¬æ¢æ“ä½œéœ€è¦ä¸€å®šçš„å¼€é”€ é€šä¿¡è¿‡ç¨‹ä¸­ä¸€æ—¦NATé‡åˆ°å¼‚å¸¸éœ€è¦é‡æ–°å¯åŠ¨æ—¶ï¼Œæ‰€æœ‰çš„TCPè¿æ¥éƒ½ä¼šè¢«é‡ç½®    IPéš§é“  ç½‘ç»œAï¼ŒBä½¿ç”¨IPV6ï¼Œä¸­é—´çš„ç½‘ç»œCä½¿ç”¨IPv4ï¼Œç½‘ç»œAå’ŒBæ— æ³•ç›´æ¥è¿›è¡Œé€šä¿¡ï¼Œéœ€è¦é‡‡ç”¨IPéš§é“çš„åŠŸèƒ½ IPéš§é“ä¸­å¯ä»¥å°†ä»ç½‘ç»œAå‘è¿‡æ¥çš„IPV6çš„åŒ…ç»Ÿåˆä¸ºä¸€ä¸ªæ•°æ®ï¼Œå†ä¸ºä¹‹è¿½åŠ ä¸€ä¸ªIPv4çš„é¦–éƒ¨è½¬å‘ç»™ç½‘ç»œC è¿™ç§åœ¨ç½‘ç»œå±‚çš„é¦–éƒ¨åé¢ç»§ç»­è¿½åŠ ç½‘ç»œå±‚é¦–éƒ¨çš„é€šä¿¡æ–¹æ³•å°±å«åšIPéš§é“  ","description":"tabs, code-tabs, expand, alert, warning, notice, img, box","id":29,"section":"posts","tags":["å›¾è§£TCPIP"],"title":"IPåè®®ç›¸å…³æŠ€æœ¯","uri":"https://mrxiaoling.github.io/en/posts/%E5%9B%BE%E8%A7%A3tcpip/ip%E5%8D%8F%E8%AE%AE%E7%9B%B8%E5%85%B3%E6%8A%80%E6%9C%AF/"},{"content":"Iteratoræ¨¡å¼  å‚è€ƒï¼š1.ã€Šå›¾è§£è®¾è®¡æ¨¡å¼ã€‹\n2. https://blog.csdn.net/Lammonpeter/article/details/82142020 3. JDKé‡Œçš„Iteratoræ¨¡å¼ï¼š https://www.cnblogs.com/tstd/p/5049338.html\n  Iteratoræ¨¡å¼é€‚ç”¨äºæ•°æ®é›†åˆä¸­æŒ‰ç…§é¡ºåºéå†é›†åˆï¼›  ä¸ºä»€ä¹ˆåœ¨éå†çš„æ—¶å€™è¦é¢å¤–å¼•å…¥è¿­ä»£å™¨è¿™ç§å¤æ‚çš„æ¨¡å¼å‘¢ï¼Ÿ  å¼•å…¥è¿­ä»£å™¨è®¾è®¡æ¨¡å¼çš„ä¸€ä¸ªé‡è¦ç†ç”±æ˜¯ï¼šå°†å®ç°å’Œéå†è¿›è¡Œäº†åˆ†ç¦»ï¼Œä¹Ÿå°±æ˜¯è¯´éå†çš„è¿‡ç¨‹å®Œå…¨ä¸ä¾èµ–ä¸ä½ æ‰€é€‰æ‹©çš„é›†åˆæ˜¯å¦‚ä½•å®ç°çš„ ï¼Œ å¦‚æœå¼€å‘è€…æ¢äº†å…¶ä»–çš„å®¹å™¨æ¥æ‰¿è½½æ•°æ®ï¼Œé‚£ä¹ˆåªéœ€è¦ä¿®æ”¹é›†åˆçš„å®ç°æ–¹å¼å³å¯ï¼Œå®Œå…¨ä¸éœ€è¦å»ä¿®æ”¹éå†çš„è¿‡ç¨‹ä»£ç ï¼Œè¿™å°±æé«˜äº†ä»£ç çš„â€œå¯å¤ç”¨æ€§â€å’Œâ€œå¯é æ€§â€ã€‚  JDKé‡Œçš„Iteratorè®¾è®¡æ¨¡å¼ å¯ä»¥çœ‹åˆ°ä»–ä»¬éƒ½å®ç°äº†Iterableæ¥å£ï¼ŒIterableæ¥å£çš„ä»£ç å¦‚ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24  /**\r* Implementing this interface allows an object to be the target of\r* the \u0026#34;for-each loop\u0026#34; statement. */\rpublic interface Iterable\u0026lt;T\u0026gt; {\r/**\r* Returns an iterator over elements of type {@code T}.\r*\r* @return an Iterator.\r*/\rIterator\u0026lt;T\u0026gt;\rIterator\u0026lt;T\u0026gt; iterator();\rdefault void forEach(Consumer\u0026lt;? super T\u0026gt; action) {\rObjects.requireNonNull(action);\rfor (T t : this) {\raction.accept(t);\r}\r}\rdefault Spliterator\u0026lt;T\u0026gt; spliterator() {\rreturn Spliterators.spliteratorUnknownSize(iterator(), 0);\r}\r}\r  æ­£å¦‚JDKæ³¨é‡Šé‡Œè¯´çš„ï¼Œ å®ç°iterableæ¥å£çš„ç±»å¯ä»¥ä½¿ç”¨â€œforeachâ€æ“ä½œï¼Œç„¶åå¹¶è¦æ±‚å®ç°Iterator iterator()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªIteratoræ¥å£å¯¹è±¡ ï¼Œæ‰€ä»¥ä½¿ç”¨è¿™äº›é›†åˆæ—¶å¯ä»¥ç›´æ¥ä½¿ç”¨Iteratoræ¨¡å¼è¿›è¡Œéå†\n1 2 3 4  ArrayList\u0026lt;String\u0026gt; arrayList = new ArrayList\u0026lt;\u0026gt;();\rarrayList.add(\u0026#34;a\u0026#34;);\rarrayList.add(\u0026#34;a\u0026#34;);\rIterator iterator = arrayList.iterator();\r  ç¤ºä¾‹ç¨‹åºçš„UMLç±»å¦‚ä¸‹ å®ä¾‹ç¨‹åºä»£ç å¦‚ä¸‹ 1 2 3 4 5 6  /**\r* è¦éå†çš„é›†åˆçš„æ¥å£ï¼Œå®ç°è¯¥æ¥å£çš„ç±»å°†æˆä¸ºå¯ä»¥ä¿å­˜å¤šä¸ªå…ƒç´ çš„é›†åˆ\r*/\rpublic interface Aggregate {\rpublic abstract Iterator iterator();\r}\r  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24  public class BookShelf implements Aggregate {\rprivate Book [] books ;\rprivate int last = 0;\rpublic BookShelf (int maxsize) {\rthis.books = new Book[maxsize];\r}\rpublic Book getBookAt(int index) {\rreturn books[index];\r}\rpublic void appendBook (Book book) {\rthis.books[last] = book ;\rlast++;\r}\rpublic int getLength() {\rreturn last ;\r}\r@Override\rpublic Iterator iterator() {\rreturn new BookShelfIterator(this);\r}\r}\r  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27  /**\r* ç”¨äºéå†ä¹¦æ¶é›†åˆé‡Œçš„ä¹¦\r*/\rpublic class BookShelfIterator implements Iterator {\rprivate BookShelf bookShelf ;\rprivate int index ;\rpublic BookShelfIterator(BookShelf bookShelf) {\rthis.bookShelf = bookShelf ;\rthis.index = 0 ;\r}\r@Override\rpublic boolean hasNext() {\rif (index \u0026lt; bookShelf.getLength()) {\rreturn true;\r} else {\rreturn false;\r}\r}\r@Override\rpublic Object next() {\rBook book = bookShelf.getBookAt(index) ;\rindex ++;\rreturn book;\r}\r}\r  1 2 3 4 5 6 7 8 9 10 11  public class Book {\rprivate String name ;\rpublic Book (String name) {\rthis.name = name ;\r}\rpublic String getName() {\rreturn name;\r}\r}\r  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  /**\r*æµ‹è¯•ä»£ç \r*/\rpublic class Main {\rpublic static void main(String[] args) {\rBookShelf bookShelf = new BookShelf(5);\rbookShelf.appendBook(new Book(\u0026#34;å›¾è§£è®¾è®¡æ¨¡å¼\u0026#34;));\rbookShelf.appendBook(new Book(\u0026#34;Javaç¼–ç¨‹æ€æƒ³\u0026#34;));\rbookShelf.appendBook(new Book(\u0026#34;ç®—æ³•\u0026#34;));\rbookShelf.appendBook(new Book(\u0026#34;TCP/IPåè®®ï¼šå·1\u0026#34;));\rIterator iterator = bookShelf.iterator();\rwhile (iterator.hasNext()) {\rBook book = (Book) iterator.next();\rSystem.out.println(book.getName());\r}\r}\r}\r  æ ¸å¿ƒä»£ç   æ ¸å¿ƒä»£ç ä¸»è¦æ˜¯BookShelfIteratorç±»å®ç°Iteratoræ¥å£å¹¶é‡å†™hasNext()å’Œnext()æ–¹æ³•ï¼šhasNext()æ–¹æ³•ç”¨äºæ£€æµ‹é›†åˆéå†çš„è¾¹ç•Œæ¡ä»¶ï¼Œè€Œnext()æ–¹æ³•åˆ™åƒæ˜¯éå†æŒ‡é’ˆã€‚  ","description":"tabs, code-tabs, expand, alert, warning, notice, img, box","id":30,"section":"posts","tags":["è®¾è®¡æ¨¡å¼"],"title":"Iteratoræ¨¡å¼","uri":"https://mrxiaoling.github.io/en/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/iterator%E6%A8%A1%E5%BC%8F/"},{"content":"è¿è¡Œæ—¶æ•°æ®åŒº  Java8å†…å­˜æ¨¡å‹\nStringç±»å’Œå¸¸é‡æ± ï¼ˆè¡¥å……å†…å®¹ï¼‰\nå‡ ç§å¸¸é‡æ± \nMardword\nString s=new String(\u0026ldquo;abc\u0026rdquo;)åˆ›å»ºäº†2ä¸ªå¯¹è±¡çš„åŸå› \n   ç¨‹åºè®¡æ•°å™¨\n å¯çœ‹æˆæ˜¯å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨ï¼› å­—èŠ‚ç è§£é‡Šå™¨å·¥ä½œæ—¶å°±æ˜¯é€šè¿‡æ”¹å˜è®¡æ•°å™¨çš„å€¼æ¥é€‰å–ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ï¼› åˆ†æ”¯ï¼Œå¾ªç¯ï¼Œè·³è½¬ï¼Œå¼‚å¸¸å¤„ç†ï¼Œçº¿ç¨‹æ¢å¤éƒ½éœ€è¦ä¾èµ–å®ƒæ¥å®Œæˆï¼› å¦‚æœæ‰§è¡Œçš„æ˜¯æœ¬åœ°æ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨çš„å€¼ä¸ºç©ºï¼ˆundefinedï¼‰    è™šæ‹Ÿæœºæ ˆ\n è™šæ‹Ÿæœºæ ˆæè¿°çš„æ˜¯Javaæ–¹æ³•æ‰§è¡Œçš„çº¿ç¨‹å†…å­˜æ¨¡å‹ï¼šæ¯ä¸ªæ–¹æ³•è¢«æ‰§è¡Œçš„æ—¶å€™ï¼ŒJavaè™šæ‹Ÿæœºéƒ½ ä¼šåŒæ­¥åˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼ˆStack Frameï¼‰ç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€è¿æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡ æ¯ã€‚æ¯ä¸€ä¸ªæ–¹æ³•è¢«è°ƒç”¨ç›´è‡³æ‰§è¡Œå®Œæ¯•çš„è¿‡ç¨‹ï¼Œå°±å¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­ä»å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ï¼› å±€éƒ¨å˜é‡è¡¨å­˜æ”¾äº†ç¼–è¯‘æœŸå¯çŸ¥çš„å„ç§Javaè™šæ‹ŸæœºåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆbooleanã€byteã€charã€shortã€intã€ floatã€longã€doubleï¼‰ã€å¯¹è±¡å¼•ç”¨ï¼ˆreferenceç±»å‹ï¼Œå®ƒå¹¶ä¸ç­‰åŒäºå¯¹è±¡æœ¬èº«ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªæŒ‡å‘å¯¹è±¡èµ·å§‹ åœ°å€çš„å¼•ç”¨æŒ‡é’ˆï¼Œä¹Ÿå¯èƒ½æ˜¯æŒ‡å‘ä¸€ä¸ªä»£è¡¨å¯¹è±¡çš„å¥æŸ„æˆ–è€…å…¶ä»–ä¸æ­¤å¯¹è±¡ç›¸å…³çš„ä½ç½®ï¼‰å’ŒreturnAddress ç±»å‹ï¼ˆæŒ‡å‘äº†ä¸€æ¡å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼‰ï¼› è¿™äº›æ•°æ®ç±»å‹åœ¨å±€éƒ¨å˜é‡è¡¨ä¸­çš„å­˜å‚¨ç©ºé—´ä»¥**å±€éƒ¨å˜é‡æ§½ï¼ˆSlotï¼‰**æ¥è¡¨ç¤ºï¼Œå…¶ä¸­64ä½é•¿åº¦çš„longå’Œ doubleç±»å‹çš„æ•°æ®ä¼šå ç”¨ä¸¤ä¸ªå˜é‡æ§½ï¼Œå…¶ä½™çš„æ•°æ®ç±»å‹åªå ç”¨ä¸€ä¸ªã€‚å±€éƒ¨å˜é‡è¡¨æ‰€éœ€çš„å†…å­˜ç©ºé—´åœ¨ç¼– è¯‘æœŸé—´å®Œæˆåˆ†é…ï¼Œå½“è¿›å…¥ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•éœ€è¦åœ¨æ ˆå¸§ä¸­åˆ†é…å¤šå¤§çš„å±€éƒ¨å˜é‡ç©ºé—´æ˜¯å®Œå…¨ç¡®å®š çš„ï¼Œåœ¨æ–¹æ³•è¿è¡ŒæœŸé—´ä¸ä¼šæ”¹å˜å±€éƒ¨å˜é‡è¡¨çš„å¤§å°ã€‚è¯·è¯»è€…æ³¨æ„ï¼Œè¿™é‡Œè¯´çš„â€œå¤§å°â€æ˜¯æŒ‡å˜é‡æ§½çš„æ•°é‡ï¼Œ è™šæ‹ŸæœºçœŸæ­£ä½¿ç”¨å¤šå¤§çš„å†…å­˜ç©ºé—´ï¼ˆè­¬å¦‚æŒ‰ç…§1ä¸ªå˜é‡æ§½å ç”¨32ä¸ªæ¯”ç‰¹ã€64ä¸ªæ¯”ç‰¹ï¼Œæˆ–è€…æ›´å¤šï¼‰æ¥å®ç°ä¸€ ä¸ªå˜é‡æ§½ï¼Œè¿™æ˜¯å®Œå…¨ç”±å…·ä½“çš„è™šæ‹Ÿæœºå®ç°è‡ªè¡Œå†³å®šçš„äº‹æƒ…ã€‚    æœ¬åœ°æ–¹æ³•æ ˆ\n è™šæ‹Ÿæœºæ ˆä¸ºæ‰§è¡ŒJavaæ–¹æ³•ï¼ˆå­—èŠ‚ç ï¼‰æœåŠ¡ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆä¸ºæœ¬åœ°æ–¹æ³•æœåŠ¡ã€‚    Javaå †\n Javaå †ï¼ˆJava Heapï¼‰æ˜¯è™šæ‹Ÿæœºæ‰€ç®¡ç†çš„å†…å­˜ä¸­æœ€å¤§çš„ä¸€å—ã€‚Javaå †æ˜¯è¢«æ‰€ æœ‰çº¿ç¨‹å…±äº«çš„ä¸€å—å†…å­˜åŒºåŸŸï¼Œåœ¨è™šæ‹Ÿæœºå¯åŠ¨æ—¶åˆ›å»ºã€‚æ­¤å†…å­˜åŒºåŸŸçš„å”¯ä¸€ç›®çš„å°±æ˜¯å­˜æ”¾å¯¹è±¡å®ä¾‹ï¼ŒJava ä¸–ç•Œé‡Œâ€œå‡ ä¹â€æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹éƒ½åœ¨è¿™é‡Œåˆ†é…å†…å­˜ï¼› æ ¹æ®ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹çš„è§„å®šï¼ŒJavaå †å¯ä»¥å¤„äºç‰©ç†ä¸Šä¸è¿ç»­çš„å†…å­˜ç©ºé—´ä¸­ï¼Œä½†åœ¨é€»è¾‘ä¸Šå®ƒåº”è¯¥ è¢«è§†ä¸ºè¿ç»­çš„ï¼Œè¿™ç‚¹å°±åƒæˆ‘ä»¬ç”¨ç£ç›˜ç©ºé—´å»å­˜å‚¨æ–‡ä»¶ä¸€æ ·ï¼Œå¹¶ä¸è¦æ±‚æ¯ä¸ªæ–‡ä»¶éƒ½è¿ç»­å­˜æ”¾ã€‚ä½†å¯¹äºå¤§ å¯¹è±¡ï¼ˆå…¸å‹çš„å¦‚æ•°ç»„å¯¹è±¡ï¼‰ï¼Œå¤šæ•°è™šæ‹Ÿæœºå®ç°å‡ºäºå®ç°ç®€å•ã€å­˜å‚¨é«˜æ•ˆçš„è€ƒè™‘ï¼Œå¾ˆå¯èƒ½ä¼šè¦æ±‚è¿ç»­çš„ å†…å­˜ç©ºé—´ï¼› Javaå †æ—¢å¯ä»¥è¢«å®ç°æˆå›ºå®šå¤§å°çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯æ‰©å±•çš„ï¼Œä¸è¿‡å½“å‰ä¸»æµçš„Javaè™šæ‹Ÿæœºéƒ½æ˜¯æŒ‰ç…§å¯æ‰© å±•æ¥å®ç°çš„ï¼ˆé€šè¿‡å‚æ•°-Xmxå’Œ-Xmsè®¾å®šï¼‰ã€‚    æ–¹æ³•åŒº\n ç”¨äºå­˜å‚¨å·²è¢«è™šæ‹ŸæœºåŠ è½½ çš„ç±»å‹ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç¼“å­˜ç­‰æ•°æ®ï¼› è™½ç„¶ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­æŠŠ æ–¹æ³•åŒºæè¿°ä¸ºå †çš„ä¸€ä¸ªé€»è¾‘éƒ¨åˆ†ï¼Œä½†æ˜¯å®ƒå´æœ‰ä¸€ä¸ªåˆ«åå«ä½œâ€œéå †â€ï¼ˆNon-Heapï¼‰ï¼Œç›®çš„æ˜¯ä¸Javaå †åŒº åˆ†å¼€æ¥ï¼› ä¸æ°¸ä¹…ä»£çš„åŒºåˆ«ï¼šæ–¹æ³•åŒºæ˜¯JVM çš„è§„èŒƒï¼Œè€Œåè€…åˆ™æ˜¯ JVM è§„èŒƒçš„ä¸€ç§å®ç°ï¼Œå¹¶ä¸”åªæœ‰ HotSpot æ‰æœ‰ â€œPermGen spaceâ€ï¼Œè€Œå¯¹äºå…¶ä»–ç±»å‹çš„è™šæ‹Ÿæœºï¼Œå¦‚ JRockitï¼ˆOracleï¼‰ã€J9ï¼ˆIBMï¼‰ å¹¶æ²¡æœ‰â€œPermGen spaceâ€ã€‚    è¿è¡Œæ—¶å¸¸é‡æ± \n è¿è¡Œæ—¶å¸¸é‡æ± æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼› ç”¨äºå­˜æ”¾ç¼–è¯‘æœŸç”Ÿ æˆçš„å„ç§å­—é¢é‡ä¸ç¬¦å·å¼•ç”¨ï¼Œè¿™éƒ¨åˆ†å†…å®¹å°†åœ¨ç±»åŠ è½½åå­˜æ”¾åˆ°æ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± ä¸­ï¼› è¿è¡Œæ—¶å¸¸é‡æ± ç›¸å¯¹äºClassæ–‡ä»¶å¸¸é‡æ± çš„å¦å¤–ä¸€ä¸ªé‡è¦ç‰¹å¾æ˜¯å…·å¤‡åŠ¨æ€æ€§ï¼ŒJavaè¯­è¨€å¹¶ä¸è¦æ±‚å¸¸é‡ ä¸€å®šåªæœ‰ç¼–è¯‘æœŸæ‰èƒ½äº§ç”Ÿï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¹¶éé¢„ç½®å…¥Classæ–‡ä»¶ä¸­å¸¸é‡æ± çš„å†…å®¹æ‰èƒ½è¿›å…¥æ–¹æ³•åŒºè¿è¡Œæ—¶å¸¸ é‡æ± ï¼Œè¿è¡ŒæœŸé—´ä¹Ÿå¯ä»¥å°†æ–°çš„å¸¸é‡æ”¾å…¥æ± ä¸­ï¼Œè¿™ç§ç‰¹æ€§è¢«å¼€å‘äººå‘˜åˆ©ç”¨å¾—æ¯”è¾ƒå¤šçš„ä¾¿æ˜¯Stringç±»çš„ intern()æ–¹æ³•ã€‚    ç›´æ¥å†…å­˜\n ç›´æ¥å†…å­˜å¹¶ä¸æ˜¯è™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿä¸æ˜¯è™šæ‹Ÿæœºè§„èŒƒä¸­å®šä¹‰çš„å†…å­˜åŒºåŸŸï¼Œä½†æ˜¯è¿™éƒ¨åˆ†å†…å­˜ä¹Ÿè¢«é¢‘ç¹åœ°ä½¿ç”¨ã€‚è€Œä¸”ä¹Ÿå¯èƒ½å¯¼è‡´OutOfMemoryErrorå¼‚å¸¸å‡ºç°ã€‚    Javaå¯¹è±¡ å¯¹è±¡çš„åˆ›å»º  ç±»åŠ è½½æ£€æŸ¥ï¼š è™šæ‹Ÿæœºé‡åˆ°ä¸€æ¡ new æŒ‡ä»¤æ—¶ï¼Œé¦–å…ˆå°†å»æ£€æŸ¥è¿™ä¸ªæŒ‡ä»¤çš„å‚æ•°æ˜¯å¦èƒ½åœ¨å¸¸é‡æ± ä¸­å®šä½åˆ°è¿™ä¸ªç±»çš„ç¬¦å·å¼•ç”¨ï¼Œå¹¶ä¸”æ£€æŸ¥è¿™ä¸ªç¬¦å·å¼•ç”¨ä»£è¡¨çš„ç±»æ˜¯å¦å·²è¢«åŠ è½½è¿‡ã€è§£æå’Œåˆå§‹åŒ–è¿‡ã€‚å¦‚æœæ²¡æœ‰ï¼Œé‚£å¿…é¡»å…ˆæ‰§è¡Œç›¸åº”çš„ç±»åŠ è½½è¿‡ç¨‹ã€‚ åˆ†é…å†…å­˜ï¼š åœ¨ç±»åŠ è½½æ£€æŸ¥é€šè¿‡åï¼Œæ¥ä¸‹æ¥è™šæ‹Ÿæœºå°†ä¸ºæ–°ç”Ÿå¯¹è±¡åˆ†é…å†…å­˜ã€‚å¯¹è±¡æ‰€éœ€çš„å†…å­˜å¤§å°åœ¨ç±»åŠ è½½å®Œæˆåä¾¿å¯ç¡®å®šï¼Œä¸ºå¯¹è±¡åˆ†é…ç©ºé—´çš„ä»»åŠ¡ç­‰åŒäºæŠŠä¸€å—ç¡®å®šå¤§å°çš„å†…å­˜ä» Java å †ä¸­åˆ’åˆ†å‡ºæ¥ã€‚åˆ†é…æ–¹å¼æœ‰ â€œæŒ‡é’ˆç¢°æ’ï¼ˆBump The Pointerï¼‰â€ å’Œ â€œç©ºé—²åˆ—è¡¨ï¼ˆFree Listï¼‰â€ ä¸¤ç§ï¼Œé€‰æ‹©é‚£ç§åˆ†é…æ–¹å¼ç”± Java å †æ˜¯å¦è§„æ•´å†³å®šï¼Œè€ŒJavaå †æ˜¯å¦è§„æ•´åˆç”±æ‰€é‡‡ç”¨çš„åƒåœ¾æ”¶é›†å™¨æ˜¯å¦å¸¦æœ‰å‹ç¼©æ•´ç†åŠŸèƒ½å†³å®šã€‚å½“ä½¿ç”¨Serialã€ParNewç­‰å¸¦å‹ç¼© æ•´ç†è¿‡ç¨‹çš„æ”¶é›†å™¨æ—¶ï¼Œç³»ç»Ÿé‡‡ç”¨çš„åˆ†é…ç®—æ³•æ˜¯æŒ‡é’ˆç¢°æ’ï¼Œæ—¢ç®€å•åˆé«˜æ•ˆï¼›è€Œå½“ä½¿ç”¨CMSè¿™ç§åŸºäºæ¸…é™¤ ï¼ˆSweepï¼‰ç®—æ³•çš„æ”¶é›†å™¨æ—¶ï¼Œç†è®ºä¸Š[1]å°±åªèƒ½é‡‡ç”¨è¾ƒä¸ºå¤æ‚çš„ç©ºé—²åˆ—è¡¨æ¥åˆ†é…å†…å­˜ã€‚ åˆå§‹åŒ–é›¶å€¼ï¼š å†…å­˜åˆ†é…å®Œæˆåï¼Œè™šæ‹Ÿæœºéœ€è¦å°†åˆ†é…åˆ°çš„å†…å­˜ç©ºé—´éƒ½åˆå§‹åŒ–ä¸ºé›¶å€¼ï¼ˆä¸åŒ…æ‹¬å¯¹è±¡å¤´ï¼‰ï¼Œè¿™ä¸€æ­¥æ“ä½œä¿è¯äº†å¯¹è±¡çš„å®ä¾‹å­—æ®µåœ¨ Java ä»£ç ä¸­å¯ä»¥ä¸èµ‹åˆå§‹å€¼å°±ç›´æ¥ä½¿ç”¨ï¼Œç¨‹åºèƒ½è®¿é—®åˆ°è¿™äº›å­—æ®µçš„æ•°æ®ç±»å‹æ‰€å¯¹åº”çš„é›¶å€¼ã€‚JVMé€šè¿‡ä»¥ä¸‹ä¸¤ç§æ‰‹æ®µä¿è¯çº¿ç¨‹å®‰å…¨æ€§  CAS+å¤±è´¥é‡è¯•ï¼š CAS æ˜¯ä¹è§‚é”çš„ä¸€ç§å®ç°æ–¹å¼ã€‚æ‰€è°“ä¹è§‚é”å°±æ˜¯ï¼Œæ¯æ¬¡ä¸åŠ é”è€Œæ˜¯å‡è®¾æ²¡æœ‰å†²çªè€Œå»å®ŒæˆæŸé¡¹æ“ä½œï¼Œå¦‚æœå› ä¸ºå†²çªå¤±è´¥å°±é‡è¯•ï¼Œç›´åˆ°æˆåŠŸä¸ºæ­¢ã€‚è™šæ‹Ÿæœºé‡‡ç”¨ CAS é…ä¸Šå¤±è´¥é‡è¯•çš„æ–¹å¼ä¿è¯æ›´æ–°æ“ä½œçš„åŸå­æ€§ã€‚ TLABï¼ˆThread Local Allocation Bufferï¼‰ï¼š ä¸ºæ¯ä¸€ä¸ªçº¿ç¨‹é¢„å…ˆåœ¨EdenåŒºåˆ†é…ä¸€å—å„¿å†…å­˜ï¼ŒJVMåœ¨ç»™çº¿ç¨‹ä¸­çš„å¯¹è±¡åˆ†é…å†…å­˜æ—¶ï¼Œé¦–å…ˆåœ¨TLABåˆ†é…ï¼Œå½“å¯¹è±¡å¤§äºTLABä¸­çš„å‰©ä½™å†…å­˜æˆ–TLABçš„å†…å­˜å·²ç”¨å°½æ—¶ï¼Œå†é‡‡ç”¨ä¸Šè¿°çš„CASè¿›è¡Œå†…å­˜åˆ†é…   è®¾ç½®å¯¹è±¡å¤´ï¼š åˆå§‹åŒ–é›¶å€¼å®Œæˆä¹‹åï¼Œè™šæ‹Ÿæœºè¦å¯¹å¯¹è±¡è¿›è¡Œå¿…è¦çš„è®¾ç½®ï¼Œä¾‹å¦‚è¿™ä¸ªå¯¹è±¡æ˜¯é‚£ä¸ªç±»çš„å®ä¾‹ã€å¦‚ä½•æ‰èƒ½æ‰¾åˆ°ç±»çš„å…ƒæ•°æ®ä¿¡æ¯ã€å¯¹è±¡çš„å“ˆå¸Œå—ã€å¯¹è±¡çš„ GC åˆ†ä»£å¹´é¾„ç­‰ä¿¡æ¯ã€‚ è¿™äº›ä¿¡æ¯å­˜æ”¾åœ¨å¯¹è±¡å¤´ä¸­ã€‚ æ‰§è¡Œ init æ–¹æ³•ï¼š åœ¨ä¸Šé¢å·¥ä½œéƒ½å®Œæˆä¹‹åï¼Œä»è™šæ‹Ÿæœºçš„è§†è§’æ¥çœ‹ï¼Œä¸€ä¸ªæ–°çš„å¯¹è±¡å·²ç»äº§ç”Ÿäº†ï¼Œä½†ä» Java ç¨‹åºçš„è§†è§’æ¥çœ‹ï¼Œå¯¹è±¡åˆ›å»ºæ‰åˆšå¼€å§‹ï¼Œ\u0026lt;init\u0026gt; æ–¹æ³•ï¼ˆå³æ„é€ å‡½æ•°ï¼‰è¿˜æ²¡æœ‰æ‰§è¡Œï¼Œæ‰€æœ‰çš„å­—æ®µéƒ½è¿˜ä¸ºé›¶ã€‚æ‰€ä»¥ä¸€èˆ¬æ¥è¯´ï¼Œæ‰§è¡Œ new æŒ‡ä»¤ä¹‹åä¼šæ¥ç€æ‰§è¡Œ \u0026lt;init\u0026gt; æ–¹æ³•ï¼ŒæŠŠå¯¹è±¡æŒ‰ç…§ç¨‹åºå‘˜çš„æ„æ„¿è¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™æ ·ä¸€ä¸ªçœŸæ­£å¯ç”¨çš„å¯¹è±¡æ‰ç®—å®Œå…¨äº§ç”Ÿå‡ºæ¥ã€‚  å¯¹è±¡çš„å†…å­˜å¸ƒå±€  åœ¨HotSpotè™šæ‹Ÿæœºé‡Œï¼Œå¯¹è±¡åœ¨å †å†…å­˜çš„å­˜å‚¨å¸ƒå±€å¯åˆ’åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†å¯¹è±¡å¤´ï¼ˆHeaderï¼‰ã€å®ä¾‹æ•°æ®ï¼ˆInstance Dataï¼‰ã€å’Œå¯¹é½å¡«å……ï¼ˆPaddingï¼‰    å¯¹è±¡å¤´åŒ…æ‹¬ä¸¤ç±»ä¿¡æ¯ï¼š\n  Markwordï¼šæ˜¯ç”¨äºå­˜å‚¨å¯¹è±¡è‡ªèº«çš„è¿è¡Œæ—¶æ•°æ®ï¼Œå¦‚å“ˆ å¸Œç ï¼ˆHashCodeï¼‰ã€GCåˆ†ä»£å¹´é¾„ã€é”çŠ¶æ€æ ‡å¿—ã€çº¿ç¨‹æŒæœ‰çš„é”ã€åå‘çº¿ç¨‹IDã€åå‘æ—¶é—´æˆ³ç­‰ï¼Œè¿™éƒ¨åˆ†æ•°æ®çš„é•¿åº¦åœ¨32ä½å’Œ64ä½çš„è™šæ‹Ÿæœºï¼ˆæœªå¼€å¯å‹ç¼©æŒ‡é’ˆï¼‰ä¸­åˆ†åˆ«ä¸º32ä¸ªæ¯”ç‰¹å’Œ64ä¸ªæ¯”ç‰¹ã€‚å¯¹è±¡éœ€è¦å­˜å‚¨çš„è¿è¡Œæ—¶æ•°æ®å¾ˆå¤šï¼Œå…¶å®å·²ç»è¶…å‡ºäº†32ã€64ä½Bitmapç»“æ„æ‰€èƒ½è®°å½•çš„æœ€å¤§é™åº¦ï¼Œä½†å¯¹è±¡å¤´é‡Œçš„ä¿¡æ¯æ˜¯ä¸å¯¹è±¡è‡ªèº«å®šä¹‰çš„æ•°æ®æ— å…³çš„é¢å¤–å­˜å‚¨æˆæœ¬ï¼Œè€ƒè™‘åˆ°è™šæ‹Ÿæœºçš„ç©ºé—´æ•ˆ ç‡ï¼ŒMark Wordè¢«è®¾è®¡æˆä¸€ä¸ªæœ‰ç€åŠ¨æ€å®šä¹‰çš„æ•°æ®ç»“æ„ï¼Œä»¥ä¾¿åœ¨æå°çš„ç©ºé—´å†…å­˜å‚¨å°½é‡å¤šçš„æ•°æ®ï¼Œæ ¹ æ®å¯¹è±¡çš„çŠ¶æ€å¤ç”¨è‡ªå·±çš„å­˜å‚¨ç©ºé—´ã€‚ä¾‹å¦‚åœ¨32ä½çš„HotSpotè™šæ‹Ÿæœºä¸­ï¼Œå¦‚å¯¹è±¡æœªè¢«åŒæ­¥é”é”å®šçš„çŠ¶æ€ ä¸‹ï¼ŒMark Wordçš„32ä¸ªæ¯”ç‰¹å­˜å‚¨ç©ºé—´ä¸­çš„25ä¸ªæ¯”ç‰¹ç”¨äºå­˜å‚¨å¯¹è±¡å“ˆå¸Œç ï¼Œ4ä¸ªæ¯”ç‰¹ç”¨äºå­˜å‚¨å¯¹è±¡åˆ†ä»£å¹´ é¾„ï¼Œ2ä¸ªæ¯”ç‰¹ç”¨äºå­˜å‚¨é”æ ‡å¿—ä½ï¼Œ1ä¸ªæ¯”ç‰¹å›ºå®šä¸º0ï¼Œåœ¨å…¶ä»–çŠ¶æ€ï¼ˆè½»é‡çº§é”å®šã€é‡é‡çº§é”å®šã€GCæ ‡ è®°ã€å¯åå‘ï¼‰\n   å­˜å‚¨å†…å®¹ lockæ ‡å¿—ä½ çŠ¶æ€(lockå’Œbiased_lockå…±åŒè¡¨ç¤ºå¯¹è±¡å¤„äºä»€ä¹ˆé”çŠ¶æ€ã€‚)     å¯¹è±¡hashç ã€å¯¹è±¡åˆ†ä»£å¹´é¾„ 01 æœªé”å®šï¼‰ï¼ˆbased_lock = 0ï¼‰   æŒ‡å‘é”è®°å½•çš„æŒ‡é’ˆ 00 è½»é‡çº§é”ï¼ˆbased_lock = 1ï¼‰   æŒ‡å‘é‡é‡çº§é”çš„æŒ‡é’ˆ 10 è†¨èƒ€ï¼ˆé‡é‡çº§é”å®šï¼‰   ç©ºï¼Œä¸éœ€è¦è®°å½•ä¿¡æ¯ 11 GCæ ‡è®°   åå‘çº¿ç¨‹IDã€åå‘æ—¶é—´æˆ³ã€å¯¹è±¡åˆ†ä»£å¹´é¾„ 01 å¯åå‘    biased_lockï¼šå¯¹è±¡æ˜¯å¦å¯ç”¨åå‘é”æ ‡è®°ï¼Œåªå 1ä¸ªäºŒè¿›åˆ¶ä½ã€‚ä¸º1æ—¶è¡¨ç¤ºå¯¹è±¡å¯ç”¨åå‘é”ï¼Œä¸º0æ—¶è¡¨ç¤ºå¯¹è±¡æ²¡æœ‰åå‘é”ã€‚lockå’Œbiased_lockå…±åŒè¡¨ç¤ºå¯¹è±¡å¤„äºä»€ä¹ˆé”çŠ¶æ€ã€‚\nageï¼š4ä½çš„Javaå¯¹è±¡å¹´é¾„ã€‚åœ¨GCä¸­ï¼Œå¦‚æœå¯¹è±¡åœ¨SurvivoråŒºå¤åˆ¶ä¸€æ¬¡ï¼Œå¹´é¾„å¢åŠ 1ã€‚å½“å¯¹è±¡è¾¾åˆ°è®¾å®šçš„é˜ˆå€¼æ—¶ï¼Œå°†ä¼šæ™‹å‡åˆ°è€å¹´ä»£ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¹¶è¡ŒGCçš„å¹´é¾„é˜ˆå€¼ä¸º15ï¼Œå¹¶å‘GCçš„å¹´é¾„é˜ˆå€¼ä¸º6ã€‚ç”±äºageåªæœ‰4ä½ï¼Œæ‰€ä»¥æœ€å¤§å€¼ä¸º15ï¼Œè¿™å°±æ˜¯-XX:MaxTenuringThresholdé€‰é¡¹æœ€å¤§å€¼ä¸º15çš„åŸå› ã€‚\nidentity_hashcodeï¼š31ä½çš„å¯¹è±¡æ ‡è¯†hashCodeï¼Œé‡‡ç”¨å»¶è¿ŸåŠ è½½æŠ€æœ¯ã€‚è°ƒç”¨æ–¹æ³•System.identityHashCode()è®¡ç®—ï¼Œå¹¶ä¼šå°†ç»“æœå†™åˆ°è¯¥å¯¹è±¡å¤´ä¸­ã€‚å½“å¯¹è±¡åŠ é”åï¼ˆåå‘ã€è½»é‡çº§ã€é‡é‡çº§ï¼‰ï¼ŒMarkWordçš„å­—èŠ‚æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´ä¿å­˜hashCodeï¼Œå› æ­¤è¯¥å€¼ä¼šç§»åŠ¨åˆ°ç®¡ç¨‹Monitorä¸­ã€‚\nthreadï¼šæŒæœ‰åå‘é”çš„çº¿ç¨‹IDã€‚\nepochï¼šåå‘é”çš„æ—¶é—´æˆ³ã€‚\nptr_to_lock_recordï¼šè½»é‡çº§é”çŠ¶æ€ä¸‹ï¼ŒæŒ‡å‘æ ˆä¸­é”è®°å½•çš„æŒ‡é’ˆã€‚\nptr_to_heavyweight_monitorï¼šé‡é‡çº§é”çŠ¶æ€ä¸‹ï¼ŒæŒ‡å‘å¯¹è±¡ç›‘è§†å™¨Monitorçš„æŒ‡é’ˆã€‚\n  ç±»å‹æŒ‡é’ˆï¼šå³å¯¹è±¡æŒ‡å‘å®ƒçš„ç±»å‹å…ƒæ•°æ®çš„æŒ‡é’ˆï¼ŒJavaè™šæ‹Ÿæœºé€šè¿‡è¿™ä¸ªæŒ‡é’ˆ æ¥ç¡®å®šè¯¥å¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ï¼›å¦‚æœå¯¹ è±¡æ˜¯ä¸€ä¸ªJavaæ•°ç»„ï¼Œé‚£åœ¨å¯¹è±¡å¤´ä¸­è¿˜å¿…é¡»æœ‰ä¸€å—ç”¨äºè®°å½•æ•°ç»„é•¿åº¦çš„æ•°æ®ï¼Œå› ä¸ºè™šæ‹Ÿæœºå¯ä»¥é€šè¿‡æ™®é€š Javaå¯¹è±¡çš„å…ƒæ•°æ®ä¿¡æ¯ç¡®å®šJavaå¯¹è±¡çš„å¤§å°ï¼Œä½†æ˜¯å¦‚æœæ•°ç»„çš„é•¿åº¦æ˜¯ä¸ç¡®å®šçš„ï¼Œå°†æ— æ³•é€šè¿‡å…ƒæ•°æ®ä¸­çš„ ä¿¡æ¯æ¨æ–­å‡ºæ•°ç»„çš„å¤§å°ã€‚\n    å®ä¾‹æ•°æ®\n å¯¹è±¡çœŸæ­£å­˜å‚¨çš„æœ‰æ•ˆä¿¡æ¯ï¼Œå³æˆ‘ä»¬åœ¨ç¨‹åºä»£ç é‡Œé¢æ‰€å®šä¹‰çš„å„ç§ç±»å‹çš„å­— æ®µå†…å®¹ï¼Œæ— è®ºæ˜¯ä»çˆ¶ç±»ç»§æ‰¿ä¸‹æ¥çš„ï¼Œè¿˜æ˜¯åœ¨å­ç±»ä¸­å®šä¹‰çš„å­—æ®µéƒ½å¿…é¡»è®°å½•èµ·æ¥ã€‚    å¯¹é½å¡«å……ï¼š\n ä¸æ˜¯å¿…é¡»çš„ï¼Œä»…èµ·å ä½ä½œç”¨ï¼›ç”±äºHotSpotè™šæ‹Ÿæœºçš„è‡ªåŠ¨å†…å­˜ç®¡ç†ç³»ç»Ÿè¦æ±‚å¯¹è±¡èµ·å§‹åœ°å€å¿…é¡»æ˜¯8å­—èŠ‚çš„æ•´æ•°å€ï¼Œæ¢å¥è¯è¯´å°±æ˜¯ ä»»ä½•å¯¹è±¡çš„å¤§å°éƒ½å¿…é¡»æ˜¯8å­—èŠ‚çš„æ•´æ•°å€ã€‚    å¯¹è±¡çš„è®¿é—®å®šä½  å¥æŸ„è®¿é—®  ä½¿ç”¨å¥æŸ„è®¿é—®çš„è¯ï¼ŒJavaå †ä¸­å°†å¯èƒ½ä¼šåˆ’åˆ†å‡ºä¸€å—å†…å­˜æ¥ä½œä¸ºå¥æŸ„æ± ï¼Œreferenceä¸­å­˜å‚¨çš„å°± æ˜¯å¯¹è±¡çš„å¥æŸ„åœ°å€ï¼Œè€Œå¥æŸ„ä¸­åŒ…å«äº†å¯¹è±¡å®ä¾‹æ•°æ®ä¸ç±»å‹æ•°æ®å„è‡ªå…·ä½“çš„åœ°å€ä¿¡æ¯ ä½¿ç”¨å¥æŸ„æ¥è®¿é—®çš„æœ€å¤§å¥½å¤„å°±æ˜¯referenceä¸­å­˜å‚¨çš„æ˜¯ç¨³å®šå¥æŸ„åœ° å€ï¼Œåœ¨å¯¹è±¡è¢«ç§»åŠ¨ï¼ˆåƒåœ¾æ”¶é›†æ—¶ç§»åŠ¨å¯¹è±¡æ˜¯éå¸¸æ™®éçš„è¡Œä¸ºï¼‰æ—¶åªä¼šæ”¹å˜å¥æŸ„ä¸­çš„å®ä¾‹æ•°æ®æŒ‡é’ˆï¼Œè€Œ referenceæœ¬èº«ä¸éœ€è¦è¢«ä¿®æ”¹ã€‚   æŒ‡é’ˆè®¿é—®  æœä½¿ç”¨ç›´æ¥æŒ‡é’ˆè®¿é—®çš„è¯ï¼ŒJavaå †ä¸­å¯¹è±¡çš„å†…å­˜å¸ƒå±€å°±å¿…é¡»è€ƒè™‘å¦‚ä½•æ”¾ç½®è®¿é—®ç±»å‹æ•°æ®çš„ç›¸å…³ ä¿¡æ¯ï¼Œreferenceä¸­å­˜å‚¨çš„ç›´æ¥å°±æ˜¯å¯¹è±¡åœ°å€ï¼Œå¦‚æœåªæ˜¯è®¿é—®å¯¹è±¡æœ¬èº«çš„è¯ï¼Œå°±ä¸éœ€è¦å¤šä¸€æ¬¡é—´æ¥è®¿é—® çš„å¼€é”€ ä½¿ç”¨ç›´æ¥æŒ‡é’ˆæ¥è®¿é—®æœ€å¤§çš„å¥½å¤„å°±æ˜¯é€Ÿåº¦æ›´å¿«ï¼Œå®ƒèŠ‚çœäº†ä¸€æ¬¡æŒ‡é’ˆå®šä½çš„æ—¶é—´å¼€é”€    Stringç±»å’Œå¸¸é‡æ± \u0026amp;åŒ…è£…ç±»å’Œå¸¸é‡æ±  1ã€Stringå¯¹è±¡çš„ä¸¤ç§åˆ›å»ºæ–¹å¼ 1 2 3  String str1 = \u0026#34;abcd\u0026#34;;\rString str2 = new String(\u0026#34;abcd\u0026#34;);\rSystem.out.println(str1==str2);//false\r   ç¬¬ä¸€ç§æ–¹å¼æ˜¯åœ¨å¸¸é‡æ± ä¸­æ‹¿å¯¹è±¡ï¼Œç¬¬äºŒç§æ–¹å¼æ˜¯ç›´æ¥åœ¨å †å†…å­˜ç©ºé—´åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚  2ã€Stringç±»çš„å¸¸é‡æ± çš„ä½¿ç”¨æ–¹æ³•  ç›´æ¥ä½¿ç”¨åŒå¼•å·å£°æ˜å‡ºæ¥çš„ String å¯¹è±¡ä¼šç›´æ¥å­˜å‚¨åœ¨å¸¸é‡æ± ä¸­ å¦‚æœä¸æ˜¯ç”¨åŒå¼•å·å£°æ˜çš„ String å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ String æä¾›çš„ intern æ–¹String.intern() æ˜¯ä¸€ä¸ª Native æ–¹æ³•ï¼Œå®ƒçš„ä½œç”¨æ˜¯ï¼šå¦‚æœè¿è¡Œæ—¶å¸¸é‡æ± ä¸­å·²ç»åŒ…å«ä¸€ä¸ªç­‰äºæ­¤ String å¯¹è±¡å†…å®¹çš„å­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›å¸¸é‡æ± ä¸­è¯¥å­—ç¬¦ä¸²çš„å¼•ç”¨ï¼›å¦‚æœæ²¡æœ‰ï¼Œåˆ™åœ¨å¸¸é‡æ± ä¸­åˆ›å»ºä¸æ­¤ String å†…å®¹ç›¸åŒçš„å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›å¸¸é‡æ± ä¸­åˆ›å»ºçš„å­—ç¬¦ä¸²çš„å¼•ç”¨ã€‚  1 2 3 4 5 6 7  String s1 = new String(\u0026#34;è®¡ç®—æœº\u0026#34;);\rString s2 = s1.intern();\rString s3 = \u0026#34;è®¡ç®—æœº\u0026#34;;\rSystem.out.println(s2);//è®¡ç®—æœº\r //falseï¼Œå› ä¸ºä¸€ä¸ªæ˜¯å †å†…å­˜ä¸­çš„Stringå¯¹è±¡ä¸€ä¸ªæ˜¯å¸¸é‡æ± ä¸­çš„Stringå¯¹è±¡ï¼Œ\r System.out.println(s1 == s2);\rSystem.out.println(s3 == s2);//trueï¼Œå› ä¸ºä¸¤ä¸ªéƒ½æ˜¯å¸¸é‡æ± ä¸­çš„Stringå¯¹\r  3ã€å­—ç¬¦ä¸²æ‹¼æ¥ 1 2 3 4 5 6 7 8 9  String str1 = \u0026#34;str\u0026#34;;\rString str2 = \u0026#34;ing\u0026#34;;\rString str3 = \u0026#34;str\u0026#34; + \u0026#34;ing\u0026#34;;//å¸¸é‡æ± ä¸­çš„å¯¹è±¡\rString str4 = str1 + str2; //åœ¨å †ä¸Šåˆ›å»ºçš„æ–°çš„å¯¹è±¡\tString str5 = \u0026#34;string\u0026#34;;//å¸¸é‡æ± ä¸­çš„å¯¹è±¡\rSystem.out.println(str3 == str4);//false\rSystem.out.println(str3 == str5);//true\rSystem.out.println(str4 == str5);//false\r   å°½é‡é¿å…å¤šä¸ªå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå› ä¸ºè¿™æ ·ä¼šé‡æ–°åˆ›å»ºå¯¹è±¡ã€‚å¦‚æœéœ€è¦æ”¹å˜å­—ç¬¦ä¸²çš„èŠ±ï¼Œå¯ä»¥ä½¿ç”¨ StringBuilder æˆ–è€… StringBufferã€‚ æ€»ç»“ï¼š  å¼•å·\u0026quot;\u0026ldquo;åˆ›å»ºçš„å­—ç¬¦ç”¨â€œ+â€è¿æ¥ç”Ÿæˆçš„å¯¹è±¡ä¼šåœ¨å¸¸é‡æ± å†…å¯»æ‰¾æ˜¯å¦å·²ç»åˆ›å»ºè¿‡çš„å¯¹è±¡ï¼› å¯¹äºæ‰€æœ‰åŒ…å«newæ–¹å¼æ–°å»ºå¯¹è±¡ï¼ˆåŒ…æ‹¬nullï¼‰çš„â€œ+â€è¿æ¥è¡¨è¾¾å¼ï¼Œå®ƒæ‰€äº§ç”Ÿçš„æ–°å¯¹è±¡éƒ½ä¸ä¼šè¢«åŠ å…¥å­—ç¬¦ä¸²æ± ä¸­ å› æ­¤æˆ‘ä»¬æå€¡ç”¨å¼•å·åŒ…å«æ–‡æœ¬çš„æ–¹å¼æ¥åˆ›å»ºStringå¯¹è±¡æé«˜æ•ˆç‡ï¼Œå®é™…ä¸Šè¿™ä¹Ÿæ˜¯æˆ‘ä»¬åœ¨ç¼–ç¨‹ä¸­å¸¸é‡‡ç”¨çš„    é¢è¯•é¢˜ï¼šString s1 = new String(\u0026ldquo;abc\u0026rdquo;);è¿™å¥è¯åˆ›å»ºäº†å‡ ä¸ªå¯¹è±¡ï¼Ÿ   ä¸¤ä¸ª\n  åˆ†æï¼š\n å¸¸ç”¨çš„åˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹ï¼ˆå¯¹è±¡ï¼‰çš„æ–¹æ³•æœ‰ä»¥ä¸‹ä¸¤ç§:  ä½¿ç”¨newåˆ›å»ºå¯¹è±¡ è°ƒç”¨Classç±»çš„newInstanceæ–¹æ³•ï¼Œåˆ©ç”¨åå°„æœºåˆ¶åˆ›å»ºå¯¹è±¡   æˆ‘ä»¬æ­£æ˜¯ä½¿ç”¨newè°ƒç”¨äº†Stringç±»çš„ä¸Šé¢é‚£ä¸ªæ„é€ å™¨æ–¹æ³•åˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶å°†å®ƒçš„å¼•ç”¨èµ‹å€¼ç»™äº†strå˜é‡ã€‚åŒæ—¶æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œè¢«è°ƒç”¨çš„æ„é€ å™¨æ–¹æ³•æ¥å—çš„å‚æ•°ä¹Ÿæ˜¯ä¸€ä¸ªStringå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ­£æ˜¯â€abcâ€ã€‚ ä¸‹é¢çš„åŒç†  String a=â€abâ€+â€cdâ€//åˆ›å»ºäº†ä¸‰ä¸ªå¯¹è±¡\r  8ä¸­åŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»å’Œå¸¸é‡æ±   ava åŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»çš„å¤§éƒ¨åˆ†éƒ½å®ç°äº†å¸¸é‡æ± æŠ€æœ¯ï¼Œå³Byte,Short,Integer,Long,Character,Booleanï¼›è¿™5ç§åŒ…è£…ç±»é»˜è®¤åˆ›å»ºäº†æ•°å€¼[-128ï¼Œ127]çš„ç›¸åº”ç±»å‹çš„ç¼“å­˜æ•°æ®ï¼Œä½†æ˜¯è¶…å‡ºæ­¤èŒƒå›´ä»ç„¶ä¼šå»åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚ ä¸¤ç§æµ®ç‚¹æ•°ç±»å‹çš„åŒ…è£…ç±» Float,Double å¹¶æ²¡æœ‰å®ç°å¸¸é‡æ± æŠ€æœ¯  1 2 3 4 5 6 7 8 9 10  Integer i1 = 33;\rInteger i2 = 33;\rSystem.out.println(i1 == i2);// è¾“å‡ºtrue\rInteger i11 = 333;\rInteger i22 = 333;\rSystem.out.println(i11 == i22);// è¾“å‡ºfalse\rDouble i3 = 1.2;\rDouble i4 = 1.2;\rSystem.out.println(i3 == i4);// è¾“å‡ºfalse\r\r   Integer ç¼“å­˜æºä»£ç ï¼š  /**\r*æ­¤æ–¹æ³•å°†å§‹ç»ˆç¼“å­˜-128åˆ°127ï¼ˆåŒ…æ‹¬ç«¯ç‚¹ï¼‰èŒƒå›´å†…çš„å€¼ï¼Œå¹¶å¯ä»¥ç¼“å­˜æ­¤èŒƒå›´ä¹‹å¤–çš„å…¶ä»–å€¼ã€‚\r*/\rpublic static Integer valueOf(int i) {\rif (i \u0026gt;= IntegerCache.low \u0026amp;\u0026amp; i \u0026lt;= IntegerCache.high)\rreturn IntegerCache.cache[i + (-IntegerCache.low)];\rreturn new Integer(i);\r}\råº”ç”¨åœºæ™¯ï¼š\n Integer i1=40ï¼›Java åœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šç›´æ¥å°†ä»£ç å°è£…æˆInteger i1=Integer.valueOf(40);ï¼Œä»è€Œä½¿ç”¨å¸¸é‡æ± ä¸­çš„å¯¹è±¡ã€‚ Integer i1 = new Integer(40);è¿™ç§æƒ…å†µä¸‹ä¼šåˆ›å»ºæ–°çš„å¯¹è±¡ã€‚  1 2 3  Integer i1 = 40;\rInteger i2 = new Integer(40);\rSystem.out.println(i1==i2);//è¾“å‡ºfalse\r  1 2 3 4 5 6 7 8 9 10 11 12 13  Integer i1 = 40;\rInteger i2 = 40;\rInteger i3 = 0;\rInteger i4 = new Integer(40);\rInteger i5 = new Integer(40);\rInteger i6 = new Integer(0);\rSystem.out.println(\u0026#34;i1=i2 \u0026#34; + (i1 == i2)); //true\r System.out.println(\u0026#34;i1=i2+i3 \u0026#34; + (i1 == i2 + i3)); //true\r System.out.println(\u0026#34;i1=i4 \u0026#34; + (i1 == i4)); //false\r System.out.println(\u0026#34;i4=i5 \u0026#34; + (i4 == i5)); //false\r System.out.println(\u0026#34;i4=i5+i6 \u0026#34; + (i4 == i5 + i6)); // true  System.out.println(\u0026#34;40=i5+i6 \u0026#34; + (40 == i5 + i6)); //true\r  è§£é‡Šï¼š\nè¯­å¥i4 == i5 + i6ï¼Œå› ä¸º+è¿™ä¸ªæ“ä½œç¬¦ä¸é€‚ç”¨äºIntegerå¯¹è±¡ï¼Œé¦–å…ˆi5å’Œi6è¿›è¡Œè‡ªåŠ¨æ‹†ç®±æ“ä½œï¼Œè¿›è¡Œæ•°å€¼ç›¸åŠ ï¼Œå³i4 == 40ã€‚ç„¶åIntegerå¯¹è±¡æ— æ³•ä¸æ•°å€¼è¿›è¡Œç›´æ¥æ¯”è¾ƒï¼Œæ‰€ä»¥i4è‡ªåŠ¨æ‹†ç®±è½¬ä¸ºintå€¼40ï¼Œæœ€ç»ˆè¿™æ¡è¯­å¥è½¬ä¸º40 == 40è¿›è¡Œæ•°å€¼æ¯”è¾ƒã€‚\n","description":"tabs, code-tabs, expand, alert, warning, notice, img, box","id":31,"section":"posts","tags":["JVM"],"title":"javaå†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸","uri":"https://mrxiaoling.github.io/en/posts/jvm/java%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F%E4%B8%8E%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA%E5%BC%82%E5%B8%B8/"},{"content":"JavaåŸºç¡€æ¦‚å¿µ JDKå’ŒJREçš„åŒºåˆ«ï¼Ÿ  https://blog.csdn.net/singit/article/details/62040688\n   JDKï¼šjava development kit ï¼ˆjavaå¼€å‘å·¥å…·ï¼‰\n  JREï¼šjava runtime environment ï¼ˆjavaè¿è¡Œæ—¶ç¯å¢ƒï¼‰\n  ç”±å›¾å¯çŸ¥JDKåŒ…å«JREåŒ…å«JVMï¼Œè€Œä¸”JDKå’ŒJREé‡Œéƒ½å«æœ‰JVM\nåŒ…è£…ç±»  https://blog.csdn.net/hebsun/article/details/83533385\n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22  public class AutoBoxingTest {\rpublic static void main(String[] args) {\rint i = 100 ;\rInteger i1 = 100 ;\rInteger i2 = 100 ;\r//åœ¨å€¼åŸŸä¸º[-128,127]ä¹‹é—´ï¼Œç”¨==æ¯”è¾ƒæ˜¯ç›¸ç­‰çš„\r Integer i3 = 200 ;\rInteger i4 = 200 ;\rInteger i5 = new Integer(100);\rInteger i6= new Integer(100);\rSystem.out.println(i1.equals(i));\rSystem.out.println(i1 == i);\rSystem.out.println(i1 == i2);\rSystem.out.println(i1.equals(i2));\rSystem.out.println(i3.equals(i4));\rSystem.out.println(i3 == i4);\rSystem.out.println(i1 == i5);\rSystem.out.println(i5 == i6);\r}\r}\r  è¾“å‡ºï¼š\ntrue\rtrue\rtrue\rtrue\rtrue\rfalse\rfalse\rfalse\råŸå› ï¼šè¿™æ˜¯Integerçš„é™æ€å†…éƒ¨ç±»ï¼Œåœ¨Integerç±»è£…å…¥å†…å­˜ä¸­æ—¶ï¼Œä¼šæ‰§è¡Œå…¶å†…éƒ¨ç±»ä¸­é™æ€ä»£ç å—è¿›è¡Œå…¶åˆå§‹åŒ–å·¥ä½œï¼Œåšçš„ä¸»è¦å·¥ä½œå°±æ˜¯æŠŠ [-128,127]ä¹‹é—´çš„æ•°åŒ…è£…æˆIntegerç±»å¹¶æŠŠå…¶å¯¹åº”çš„å¼•ç”¨å­˜å…¥åˆ°cacheæ•°ç»„ä¸­ï¼Œè¿™æ ·åœ¨æ–¹æ³•åŒºä¸­å¼€è¾Ÿç©ºé—´å­˜æ”¾è¿™äº›é™æ€Integerå˜é‡ï¼ŒåŒæ—¶é™æ€cacheæ•°ç»„ä¹Ÿå­˜æ”¾åœ¨è¿™é‡Œï¼Œä¾›çº¿ç¨‹äº«ç”¨ï¼Œè¿™ä¹Ÿç§°é™æ€ç¼“å­˜ã€‚æˆ‘ä»¬çŸ¥é“åœ¨Javaçš„å¯¹è±¡æ˜¯å¼•ç”¨çš„ï¼Œæ‰€ä»¥å½“ç”¨Integer å£°æ˜åˆå§‹åŒ–å˜é‡æ—¶ï¼Œä¼šå…ˆåˆ¤æ–­æ‰€èµ‹å€¼çš„å¤§å°æ˜¯å¦åœ¨-128åˆ°127ä¹‹é—´ï¼Œè‹¥åœ¨ï¼Œåˆ™åˆ©ç”¨é™æ€ç¼“å­˜ä¸­çš„ç©ºé—´å¹¶ä¸”è¿”å›å¯¹åº”cacheæ•°ç»„ä¸­å¯¹åº”å¼•ç”¨ï¼Œå­˜æ”¾åˆ°è¿è¡Œæ ˆä¸­ï¼Œè€Œä¸å†é‡æ–°å¼€è¾Ÿå†…å­˜ã€‚å¦‚æ­¤ï¼Œä¾¿å¯¼è‡´äº†ä¸Šé¢Integeræ¯”è¾ƒç”¨==æ¯”è¾ƒç»“æœä¸ºtrueçš„æƒ…å†µå‘ç”Ÿã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46  /**\r* Cache to support the object identity semantics of autoboxing for values between\r* -128 and 127 (inclusive) as required by JLS.\r*\r* The cache is initialized on first usage. The size of the cache\r* may be controlled by the {@code -XX:AutoBoxCacheMax=\u0026lt;size\u0026gt;} option.\r* During VM initialization, java.lang.Integer.IntegerCache.high property\r* may be set and saved in the private system properties in the\r* sun.misc.VM class.\r*/\rprivate static class IntegerCache {\rstatic final int low = -128;\rstatic final int high;\rstatic final Integer cache[];\rstatic {\r// high value may be configured by property\r int h = 127;\rString integerCacheHighPropValue =\rsun.misc.VM.getSavedProperty(\u0026#34;java.lang.Integer.IntegerCache.high\u0026#34;);\rif (integerCacheHighPropValue != null) {\rtry {\rint i = parseInt(integerCacheHighPropValue);\ri = Math.max(i, 127);\r// Maximum array size is Integer.MAX_VALUE\r h = Math.min(i, Integer.MAX_VALUE - (-low) -1);\r} catch( NumberFormatException nfe) {\r// If the property cannot be parsed into an int, ignore it.\r }\r}\rhigh = h;\rcache = new Integer[(high - low) + 1];\rint j = low;\rfor(int k = 0; k \u0026lt; cache.length; k++)\rcache[k] = new Integer(j++);\r// range [-128, 127] must be interned (JLS7 5.1.7)\r assert IntegerCache.high \u0026gt;= 127;\r}\rprivate IntegerCache() {}\r}\r  è®¿é—®ä¿®é¥°ç¬¦    ä¿®é¥°ç¬¦ å…¶ä»–åŒ… åŒåŒ… å­ç±»ç±» å½“å‰ç±»     public èƒ½ èƒ½ èƒ½ èƒ½   protected ä¸èƒ½ èƒ½ èƒ½ èƒ½   default ä¸èƒ½ ä¸èƒ½ èƒ½ èƒ½   private ä¸èƒ½ ä¸èƒ½ ä¸èƒ½ èƒ½    short s1 = 1; s1 = s1 + 1;æœ‰é”™å—?short s1 = 1; s1 += 1; æœ‰é”™å—ï¼Ÿ  https://blog.csdn.net/W_Y_L_/article/details/83056495\n  å¯¹äºshort s1 = 1; s1 = s1 + 1ï¼›ç”±äº1æ˜¯intç±»å‹ï¼Œæ‰€ä»¥s1+1ä¹Ÿæ˜¯intç±»å‹ï¼Œéœ€è¦å¼ºåˆ¶è½¬æ¢æ‰èƒ½èµ‹å€¼ç»™shortç±»å‹ï¼› å¯¹äºshort s1 = 1; s1 += 1;å¯ä»¥æ­£ç¡®ç¼–è¯‘ï¼Œs1+=1ç›¸å½“äºs1=(short)(s1+1)ã€‚ Javaè¯­è¨€è§„èŒƒä¸­è®²åˆ°ï¼Œå¤åˆèµ‹å€¼ï¼ˆE1 op=E2ï¼‰ç­‰ä»·äºç®€å•èµ‹å€¼ï¼ˆE1=(T)((E1) op (E2))ï¼‰ï¼Œå…¶ä¸­Tæ˜¯E1çš„ç±»å‹ï¼Œé™¤éE1åªè¢«è®¡ç®—ä¸€æ¬¡ã€‚\næ¢å¥è¯è¯´ï¼Œå¤åˆèµ‹å€¼è¡¨è¾¾å¼è‡ªåŠ¨åœ°å°†æ‰€æ‰§è¡Œè®¡ç®—çš„ç»“æœè½¬å‹ä¸ºå…¶å·¦ä¾§å˜é‡çš„ç±»å‹ã€‚å¦‚æœç»“æœçš„ç±»å‹ä¸è¯¥å˜é‡çš„ç±»å‹ç›¸åŒï¼Œé‚£ä¹ˆè¿™ä¸ªè½¬å‹ä¸ä¼šé€ æˆä»»ä½•å½±å“ã€‚ç„¶è€Œï¼Œå¦‚æœç»“æœçš„ç±»å‹æ¯”è¯¥å˜é‡çš„ç±»å‹è¦å®½ï¼Œé‚£ä¹ˆå¤åˆèµ‹å€¼æ“ä½œç¬¦å°†æ‚„æ‚„åœ°æ‰§è¡Œä¸€ä¸ªçª„åŒ–åŸç”Ÿç±»å‹è½¬æ¢ã€‚\nå› æ­¤ï¼Œå¤åˆèµ‹å€¼è¡¨è¾¾å¼å¯èƒ½æ˜¯å±é™©çš„ã€‚ä¸ºäº†é¿å…è¿™ç§ä»¤äººä¸å¿«çš„çªè¢­ï¼Œè¯·ä¸è¦å°†å¤åˆèµ‹å€¼æ“ä½œç¬¦ä½œç”¨äºbyteã€shortæˆ–charç±»å‹çš„å˜é‡ã€‚  é‡è½½å’Œé‡å†™çš„åŒºåˆ«   é‡è½½ (Overloading) ï¼š\n æ–¹æ³•é‡è½½æ˜¯è®©ç±»ä»¥ç»Ÿä¸€çš„æ–¹å¼å¤„ç†ä¸åŒç±»å‹æ•°æ®çš„ä¸€ç§æ‰‹æ®µï¼Œ è°ƒç”¨æ–¹æ³•æ—¶é€šè¿‡ä¼ é€’ç»™å®ƒä»¬çš„ä¸åŒå‚æ•°ä¸ªæ•°å’Œå‚æ•°ç±»å‹æ¥å†³å®šå…·ä½“ä½¿ç”¨å“ªä¸ªæ–¹æ³• ï¼Œ é‡è½½Overloadingæ˜¯ä¸€ä¸ªç±»ä¸­å¤šæ€æ€§çš„ä¸€ç§è¡¨ç° ï¼› å‘ç”Ÿåœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œæ–¹æ³•åå¿…é¡»ç›¸åŒï¼Œå‚æ•°ç±»å‹ä¸åŒã€ä¸ªæ•°ä¸åŒã€é¡ºåºä¸åŒï¼Œæ–¹æ³•è¿”å›å€¼å’Œè®¿é—®ä¿®é¥°ç¬¦å¯ä»¥ä¸åŒï¼Œå‘ç”Ÿåœ¨ç¼–è¯‘æ—¶ï¼› æ— æ³•ä»¥è¿”å›å‹åˆ«ä½œä¸ºé‡è½½å‡½æ•°çš„åŒºåˆ†æ ‡å‡† ï¼Œå› ä¸ºè¿”å›ç±»å‹ä¸å±äºæ–¹æ³•ç­¾åï¼ˆæ–¹æ³•åä»¥åŠå‚æ•°ç±»å‹ï¼‰çš„ä¸€éƒ¨åˆ†ï¼Œå³ä¸èƒ½æœ‰ä¸¤ä¸ªåå­—ï¼Œå‚æ•°ç±»å‹ç›¸åŒï¼Œè¿”å›ç±»å‹ä¸åŒçš„æ–¹æ³•ï¼› Javaå…è®¸é‡è½½ä»»ä½•æ–¹æ³•ï¼ŒåŒ…æ‹¬æ„é€ å™¨ã€‚    é‡å†™ ï¼ˆOverridingï¼‰\n åˆç§°æ–¹æ³•è¦†ç›–ï¼› å‘ç”Ÿåœ¨çˆ¶å­ç±»ä¸­ï¼Œæ–¹æ³•åã€å‚æ•°åˆ—è¡¨å¿…é¡»ç›¸åŒï¼Œè¿”å›å€¼èŒƒå›´å°äºç­‰äºçˆ¶ç±»ï¼ŒæŠ›å‡ºçš„å¼‚å¸¸èŒƒå›´å°äºç­‰äºçˆ¶ç±»ï¼Œè®¿é—®ä¿®é¥°ç¬¦èŒƒå›´å¤§äºç­‰äºçˆ¶ç±»ï¼›å¦‚æœçˆ¶ç±»æ–¹æ³•è®¿é—®ä¿®é¥°ç¬¦ä¸º private åˆ™å­ç±»å°±ä¸èƒ½é‡å†™è¯¥æ–¹æ³•ã€‚    String å’Œ StringBufferã€StringBuilder çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼ŸString ä¸ºä»€ä¹ˆæ˜¯ä¸å¯å˜çš„ï¼Ÿ   å¯å˜æ€§ï¼š\n ç®€å•çš„æ¥è¯´ï¼šString ç±»ä¸­ä½¿ç”¨ final å…³é”®å­—å­—ç¬¦æ•°ç»„ä¿å­˜å­—ç¬¦ä¸²ï¼Œ private final char value[] ï¼Œæ‰€ä»¥ Stringå¯¹è±¡æ˜¯ä¸å¯å˜çš„ã€‚è€ŒStringBuilder ä¸ StringBuffer éƒ½ç»§æ‰¿è‡ª AbstractStringBuilder ç±»ï¼Œåœ¨AbstractStringBuilderä¸­ä¹Ÿæ˜¯ä½¿ç”¨å­—ç¬¦æ•°ç»„ä¿å­˜å­—ç¬¦ä¸²char[]value ä½†æ˜¯æ²¡æœ‰ç”¨ final å…³é”®å­—ä¿®é¥°ï¼Œæ‰€ä»¥è¿™ä¸¤ç§å¯¹è±¡éƒ½æ˜¯å¯å˜çš„ã€‚    çº¿ç¨‹å®‰å…¨æ€§ï¼š\n String ä¸­çš„å¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œä¹Ÿå°±å¯ä»¥ç†è§£ä¸ºå¸¸é‡ï¼Œçº¿ç¨‹å®‰å…¨ã€‚AbstractStringBuilder æ˜¯ StringBuilder ä¸StringBuffer çš„å…¬å…±çˆ¶ç±»ï¼Œå®šä¹‰äº†ä¸€äº›å­—ç¬¦ä¸²çš„åŸºæœ¬æ“ä½œï¼Œå¦‚ expandCapacityã€appendã€insertã€indexOf ç­‰å…¬å…±æ–¹æ³•ã€‚StringBuffer å¯¹æ–¹æ³•åŠ äº†åŒæ­¥é”æˆ–è€…å¯¹è°ƒç”¨çš„æ–¹æ³•åŠ äº†åŒæ­¥é”ï¼Œæ‰€ä»¥æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚StringBuilder å¹¶æ²¡æœ‰å¯¹æ–¹æ³•è¿›è¡ŒåŠ åŒæ­¥é”ï¼Œæ‰€ä»¥æ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚    æ€§èƒ½ï¼š\n æ¯æ¬¡å¯¹ String ç±»å‹è¿›è¡Œæ”¹å˜çš„æ—¶å€™ï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ String å¯¹è±¡ï¼Œç„¶åå°†æŒ‡é’ˆæŒ‡å‘æ–°çš„ String å¯¹è±¡ã€‚\nStringBuffer æ¯æ¬¡éƒ½ä¼šå¯¹ StringBuffer å¯¹è±¡æœ¬èº«è¿›è¡Œæ“ä½œï¼Œè€Œä¸æ˜¯ç”Ÿæˆæ–°çš„å¯¹è±¡å¹¶æ”¹å˜å¯¹è±¡å¼•ç”¨ã€‚ç›¸åŒæƒ…å†µä¸‹ä½¿ç”¨StirngBuilder ç›¸æ¯”ä½¿ç”¨ StringBuffer ä»…èƒ½è·å¾— 10%~15% å·¦å³çš„æ€§èƒ½æå‡ï¼Œä½†å´è¦å†’å¤šçº¿ç¨‹ä¸å®‰å…¨çš„é£é™©ã€‚    ä¸‰è€…çš„ä½¿ç”¨æ€»ç»“ï¼š\n æ“ä½œå°‘é‡çš„æ•°æ® = Stringï¼› å•çº¿ç¨‹æ“ä½œå­—ç¬¦ä¸²ç¼“å†²åŒºä¸‹æ“ä½œå¤§é‡æ•°æ® = StringBuilderï¼› å¤šçº¿ç¨‹æ“ä½œå­—ç¬¦ä¸²ç¼“å†²åŒºä¸‹æ“ä½œå¤§é‡æ•°æ® = StringBufferã€‚    ==ä¸equals  ==åˆ¤æ–­çš„æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„åœ°å€æ˜¯å¦ç›¸ç­‰ï¼ˆåŸºæœ¬æ•°æ®ç±»å‹æ¯”è¾ƒçš„æ˜¯å€¼ï¼Œå¼•ç”¨ç±»å‹æ¯”è¾ƒçš„æ˜¯å†…å­˜åœ°å€ï¼‰ equalsï¼ˆï¼‰ä½œç”¨æ˜¯åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼Œä½†ä¸€èˆ¬æœ‰ä¸¤ä¸ªä½¿ç”¨æƒ…å†µï¼š  æƒ…å†µ1ï¼šç±»æ²¡æœ‰è¦†ç›– equals() æ–¹æ³•ã€‚åˆ™é€šè¿‡ equals() æ¯”è¾ƒè¯¥ç±»çš„ä¸¤ä¸ªå¯¹è±¡æ—¶ï¼Œç­‰ä»·äºé€šè¿‡â€œ==â€ï¼ˆè°ƒç”¨çš„Objectç±»çš„æˆ¿equalsæ–¹æ³•return (this == obj);ï¼‰æ¯”è¾ƒè¿™ä¸¤ä¸ªå¯¹è±¡ã€‚ æƒ…å†µ2ï¼šç±»è¦†ç›–äº† equals() æ–¹æ³•ã€‚ä¸€èˆ¬ï¼Œæˆ‘ä»¬éƒ½è¦†ç›– equals() æ–¹æ³•æ¥ä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹ç›¸ç­‰ï¼›è‹¥å®ƒä»¬çš„å†…å®¹ç›¸\nç­‰ï¼Œåˆ™è¿”å› true (å³ï¼Œè®¤ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰)ã€‚    1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  public class StringTest {\rpublic static void main(String[] args) {\r//a,béƒ½æ˜¯å¼•ç”¨ï¼Œä¸”å†…å®¹ä¸€æ ·\r String a = new String(\u0026#34;ab\u0026#34;);\rString b = new String(\u0026#34;ab\u0026#34;);\r//æ”¾åœ¨å¸¸é‡æ± ä¸­\r String aa = \u0026#34;ab\u0026#34; ;\rString bb = \u0026#34;ab\u0026#34; ;\rSystem.out.println(\u0026#34;a==b:\u0026#34;+ (a==b));\rSystem.out.println(\u0026#34;aa==bb:\u0026#34; + (aa==bb));\rSystem.out.println(\u0026#34;42==42.0:\u0026#34;+ (42==42.0d));\rSystem.out.println(\u0026#34;a.equals(b):\u0026#34;+ (a.equals(b)));\rSystem.out.println(\u0026#34;aa.equals(bb):\u0026#34;+ (aa.equals(bb)));\r}\r}\r  è¾“å‡ºï¼š\na==b:false\raa==bb:true\r42==42.0:true\ra.equals(b):true\raa.equals(bb):true\ré‡å†™äº†equalsæ–¹æ³•ï¼Œä¸ºä»€ä¹ˆè¿˜è¦é‡å†™hashCodeæ–¹æ³•ï¼Ÿ  https://cloud.tencent.com/developer/article/1689264\nhttps://www.cnblogs.com/skywang12345/p/3324958.html\n   é¦–å…ˆçœ‹Objectç±»çš„hashCodeæ–¹æ³•æ³¨é‡Šçš„çš„æ–¹æ³•çº¦å®šï¼š\n å¦‚æœå¯¹è±¡åœ¨ä½¿ç”¨equalsæ–¹æ³•ä¸­è¿›è¡Œæ¯”è¾ƒçš„å‚æ•°æ²¡æœ‰ä¿®æ”¹ï¼Œé‚£ä¹ˆå¤šæ¬¡è°ƒç”¨ä¸€ä¸ªå¯¹è±¡çš„hashCode()æ–¹æ³•è¿”å›çš„å“ˆå¸Œå€¼åº”è¯¥æ˜¯ç›¸åŒçš„ï¼› å¦‚æœä¸¤ä¸ªå¯¹è±¡é€šè¿‡equalsæ–¹æ³•æ¯”è¾ƒæ˜¯ç›¸ç­‰çš„ï¼Œé‚£ä¹ˆè¦æ±‚è¿™ä¸¤ä¸ªå¯¹è±¡çš„hashCodeæ–¹æ³•è¿”å›çš„å€¼ä¹Ÿåº”è¯¥æ˜¯ç›¸ç­‰çš„ï¼› å¦‚æœä¸¤ä¸ªå¯¹è±¡é€šè¿‡equalsæ–¹æ³•æ¯”è¾ƒæ˜¯ä¸åŒçš„ï¼Œé‚£ä¹ˆä¹Ÿä¸è¦æ±‚è¿™ä¸¤ä¸ªå¯¹è±¡çš„hashCodeæ–¹æ³•è¿”å›çš„å€¼æ˜¯ä¸ç›¸åŒçš„ã€‚ä½†æ˜¯æˆ‘ä»¬åº”è¯¥çŸ¥é“å¯¹äºä¸åŒå¯¹è±¡äº§ç”Ÿä¸åŒçš„å“ˆå¸Œå€¼å¯¹äºå“ˆå¸Œè¡¨(HashMapç­‰)èƒ½å¤Ÿæé«˜æ€§èƒ½ã€‚    hashcodeå’Œequalsæ–¹æ³•çš„è”ç³»\n  ç¬¬ä¸€ç±»ï¼šä¸ä½¿ç”¨HashSet, Hashtable, HashMapç­‰ç­‰è¿™äº›æœ¬è´¨æ˜¯æ•£åˆ—è¡¨çš„æ•°æ®ç»“æ„ï¼Œé‚£ä¹ˆä¸¤è€…å¯ä»¥è¯´æ²¡æœ‰å…³ç³»ï¼› è¿™ç§æƒ…å†µä¸‹ï¼Œequals() ç”¨æ¥æ¯”è¾ƒè¯¥ç±»çš„ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚è€ŒhashCode() åˆ™æ ¹æœ¬æ²¡æœ‰ä»»ä½•ä½œç”¨ï¼Œæ‰€ä»¥ï¼Œä¸ç”¨ç†ä¼šhashCode()ã€‚\n  ç¬¬äºŒç±»ï¼šä¼šåœ¨HashSet, Hashtable, HashMapç­‰ç­‰è¿™äº›æœ¬è´¨æ˜¯æ•£åˆ—è¡¨çš„æ•°æ®ç»“æ„ä¸­ï¼Œç”¨åˆ°è¯¥ç±»ï¼ˆæ¯”å¦‚è‡ªå®šä¹‰ç±»ä½œä¸ºkeyï¼‰ï¼›åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯¥ç±»çš„â€œhashCode() å’Œ equals() â€æ˜¯æœ‰å…³ç³»çš„ï¼š\n1)ã€å¦‚æœä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼Œé‚£ä¹ˆå®ƒä»¬çš„hashCode()å€¼ä¸€å®šç›¸åŒã€‚\nè¿™é‡Œçš„ç›¸ç­‰æ˜¯æŒ‡ï¼Œé€šè¿‡equals()æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ—¶è¿”å›trueã€‚\n2)ã€å¦‚æœä¸¤ä¸ªå¯¹è±¡hashCode()ç›¸ç­‰ï¼Œå®ƒä»¬å¹¶ä¸ä¸€å®šç›¸ç­‰ã€‚\nå› ä¸ºåœ¨æ•£åˆ—è¡¨ä¸­ï¼ŒhashCode()ç›¸ç­‰ï¼Œå³ä¸¤ä¸ªé”®å€¼å¯¹çš„å“ˆå¸Œå€¼ç›¸ç­‰ã€‚ç„¶è€Œå“ˆå¸Œå€¼ç›¸ç­‰ï¼Œå¹¶ä¸ä¸€å®šèƒ½å¾—å‡ºé”®å€¼å¯¹ç›¸ç­‰ã€‚è¡¥å……è¯´ä¸€å¥ï¼šâ€œä¸¤ä¸ªä¸åŒçš„é”®å€¼å¯¹ï¼Œå“ˆå¸Œå€¼ç›¸ç­‰â€ï¼Œè¿™å°±æ˜¯å“ˆå¸Œå†²çªã€‚\n åœ¨è¿™ç§æƒ…å†µä¸‹ã€‚è‹¥è¦åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼Œé™¤äº†è¦è¦†ç›–equals()ä¹‹å¤–ï¼Œä¹Ÿè¦è¦†ç›–hashCode()å‡½æ•°ã€‚  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69  import java.util.*;\rimport java.lang.Comparable;\r/**\r* @desc æ¯”è¾ƒequals() è¿”å›true ä»¥åŠ è¿”å›falseæ—¶ï¼Œ hashCode()çš„å€¼ã€‚\r*\r* @author skywang\r* @emai kuiwu-wang@163.com\r*/\rpublic class ConflictHashCodeTest1{\rpublic static void main(String[] args) {\r// æ–°å»ºPersonå¯¹è±¡ï¼Œ\r Person p1 = new Person(\u0026#34;eee\u0026#34;, 100);\rPerson p2 = new Person(\u0026#34;eee\u0026#34;, 100);\rPerson p3 = new Person(\u0026#34;aaa\u0026#34;, 200);\r// æ–°å»ºHashSetå¯¹è±¡\r HashSet set = new HashSet();\rset.add(p1);\rset.add(p2);\rset.add(p3);\r// æ¯”è¾ƒp1 å’Œ p2ï¼Œ å¹¶æ‰“å°å®ƒä»¬çš„hashCode()\r System.out.printf(\u0026#34;p1.equals(p2) : %s; p1(%d) p2(%d)\\n\u0026#34;, p1.equals(p2), p1.hashCode(), p2.hashCode());\r// æ‰“å°set\r System.out.printf(\u0026#34;set:%s\\n\u0026#34;, set);\r}\r/**\r* @desc Personç±»ã€‚\r*/\rprivate static class Person {\rint age;\rString name;\rpublic Person(String name, int age) {\rthis.name = name;\rthis.age = age;\r}\rpublic String toString() {\rreturn \u0026#34;(\u0026#34;+name + \u0026#34;, \u0026#34; +age+\u0026#34;)\u0026#34;;\r}\r/**\r* @desc è¦†ç›–equalsæ–¹æ³•\r*/\r@Override\rpublic boolean equals(Object obj){\rif(obj == null){\rreturn false;\r}\r//å¦‚æœæ˜¯åŒä¸€ä¸ªå¯¹è±¡è¿”å›trueï¼Œåä¹‹è¿”å›false\r if(this == obj){\rreturn true;\r}\r//åˆ¤æ–­æ˜¯å¦ç±»å‹ç›¸åŒ\r if(this.getClass() != obj.getClass()){\rreturn false;\r}\rPerson person = (Person)obj;\rreturn name.equals(person.name) \u0026amp;\u0026amp; age==person.age;\r}\r}\r}\r  p1.equals(p2) : true; p1(1169863946) p2(1690552137)\rset:[(eee, 100), (eee, 100), (aaa, 200)]\rPersonçš„equals()ã€‚ä½†æ˜¯ï¼Œå¾ˆå¥‡æ€ªçš„å‘ç°ï¼šHashSetä¸­ä»ç„¶æœ‰é‡å¤å…ƒç´ ï¼šp1 å’Œ p2\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81  import java.util.*;\rimport java.lang.Comparable;\r/**\r* @desc æ¯”è¾ƒequals() è¿”å›true ä»¥åŠ è¿”å›falseæ—¶ï¼Œ hashCode()çš„å€¼ã€‚\r*\r* @author skywang\r* @emai kuiwu-wang@163.com\r*/\rpublic class ConflictHashCodeTest2{\rpublic static void main(String[] args) {\r// æ–°å»ºPersonå¯¹è±¡ï¼Œ\r Person p1 = new Person(\u0026#34;eee\u0026#34;, 100);\rPerson p2 = new Person(\u0026#34;eee\u0026#34;, 100);\rPerson p3 = new Person(\u0026#34;aaa\u0026#34;, 200);\rPerson p4 = new Person(\u0026#34;EEE\u0026#34;, 100);\r// æ–°å»ºHashSetå¯¹è±¡\r HashSet set = new HashSet();\rset.add(p1);\rset.add(p2);\rset.add(p3);\r// æ¯”è¾ƒp1 å’Œ p2ï¼Œ å¹¶æ‰“å°å®ƒä»¬çš„hashCode()\r System.out.printf(\u0026#34;p1.equals(p2) : %s; p1(%d) p2(%d)\\n\u0026#34;, p1.equals(p2), p1.hashCode(), p2.hashCode());\r// æ¯”è¾ƒp1 å’Œ p4ï¼Œ å¹¶æ‰“å°å®ƒä»¬çš„hashCode()\r System.out.printf(\u0026#34;p1.equals(p4) : %s; p1(%d) p4(%d)\\n\u0026#34;, p1.equals(p4), p1.hashCode(), p4.hashCode());\r// æ‰“å°set\r System.out.printf(\u0026#34;set:%s\\n\u0026#34;, set);\r}\r/**\r* @desc Personç±»ã€‚\r*/\rprivate static class Person {\rint age;\rString name;\rpublic Person(String name, int age) {\rthis.name = name;\rthis.age = age;\r}\rpublic String toString() {\rreturn name + \u0026#34; - \u0026#34; +age;\r}\r/**\r* @descé‡å†™hashCode\r*/\r@Override\rpublic int hashCode(){\rint nameHash = name.toUpperCase().hashCode();\rreturn nameHash ^ age;\r}\r/**\r* @desc è¦†ç›–equalsæ–¹æ³•\r*/\r@Override\rpublic boolean equals(Object obj){\rif(obj == null){\rreturn false;\r}\r//å¦‚æœæ˜¯åŒä¸€ä¸ªå¯¹è±¡è¿”å›trueï¼Œåä¹‹è¿”å›false\r if(this == obj){\rreturn true;\r}\r//åˆ¤æ–­æ˜¯å¦ç±»å‹ç›¸åŒ\r if(this.getClass() != obj.getClass()){\rreturn false;\r}\rPerson person = (Person)obj;\rreturn name.equals(person.name) \u0026amp;\u0026amp; age==person.age;\r}\r}\r}\r  p1.equals(p2) : true; p1(68545) p2(68545)\rp1.equals(p4) : false; p1(68545) p4(68545)\rset:[aaa - 200, eee - 100]\ré€šä¿—çš„è§£é‡Šå°±æ˜¯ï¼šHashMapä¸€ç±»çš„æ•°æ®ç»“æ„é¦–å…ˆé€šè¿‡hashcodeæ‰¾åˆ°å¯¹åº”çš„æ¡¶ï¼Œä½†æ˜¯ä¸åŒçš„å¯¹è±¡å¯èƒ½æœ‰ç›¸åŒhashcodeï¼Œå³hashå†²çªï¼ŒJavaé‡Œé‡‡ç”¨é“¾è¡¨æ³•ï¼Œå¦‚ä½•ç¡®å®šé“¾è¡¨é‡Œå“ªä¸€ä¸ªæ˜¯æƒ³è¦æ‰¾çš„å…ƒç´ å‘¢ï¼Œå½“ç„¶æ˜¯é€šè¿‡equalsæ–¹æ³•ã€‚è€Œå¯¹è±¡çš„å“ˆå¸Œç çš„è·å–æ­£æ˜¯é€šè¿‡hashCodeæ–¹æ³•è·å–çš„ã€‚å¦‚æœè‡ªå®šä¹‰çš„ç±»ä¸­æ²¡æœ‰å®ç°è¯¥æ–¹æ³•ï¼Œåˆ™ä¼šé‡‡ç”¨Objectä¸­çš„hashCode()æ–¹æ³•ã€‚\nåœ¨Objectä¸­è¯¥æ–¹æ³•æ˜¯ä¸€ä¸ªæœ¬åœ°æ–¹æ³•ï¼Œä¼šè¿”å›ä¸€ä¸ªintç±»å‹çš„å“ˆå¸Œå€¼ã€‚å¯ä»¥é€šè¿‡å°†å¯¹è±¡çš„å†…éƒ¨åœ°å€è½¬æ¢ä¸ºæ•´æ•°æ¥å®ç°çš„ï¼Œä½†æ˜¯Javaä¸­æ²¡æœ‰å¼ºåˆ¶è¦æ±‚é€šè¿‡è¯¥æ–¹å¼å®ç°ã€‚\nå…·ä½“å®ç°ç½‘ç»œä¸Šæœ‰ä¸åŒçš„è¯´æ³•ï¼Œæœ‰è¯´é€šè¿‡å†…ç½®åœ°å€è½¬æ¢å¾—æ¥ï¼Œä¹Ÿæœ‰è¯´â€œOpenJDK8é»˜è®¤hashCodeçš„è®¡ç®—æ–¹æ³•æ˜¯é€šè¿‡å’Œå½“å‰çº¿ç¨‹æœ‰å…³çš„ä¸€ä¸ªéšæœºæ•°+ä¸‰ä¸ªç¡®å®šå€¼ï¼Œè¿ç”¨Marsagliaâ€™s xorshift schemeéšæœºæ•°ç®—æ³•å¾—åˆ°çš„ä¸€ä¸ªéšæœºæ•°â€è·å¾—ã€‚\næ— è®ºé»˜è®¤å®ç°æ˜¯æ€æ ·çš„ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ— æ³•æ»¡è¶³equalsæ–¹æ³•ç›¸åŒï¼ŒåŒæ—¶hashCodeç»“æœä¹Ÿç›¸åŒçš„æ¡ä»¶ã€‚æ¯”å¦‚ä¸‹é¢çš„ç¤ºä¾‹é‡å†™ä¸å¦å·®è·å¾ˆå¤§ã€‚\n    PSï¼šå¯ä»¥é€šè¿‡ideaçš„å¿«é€Ÿç”Ÿæˆé‡å†™çš„equalså’Œhashæ–¹æ³•ã€‚\nfinalå…³é”®å­—  finalå…³é”®å­—ä¸»è¦ç”¨åœ¨ä¸‰ä¸ªåœ°æ–¹ï¼šå˜é‡ã€æ–¹æ³•ã€ç±»ã€‚   å¯¹äºä¸€ä¸ªfinalå˜é‡ï¼Œå¦‚æœæ˜¯åŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡ï¼Œåˆ™å…¶æ•°å€¼ä¸€æ—¦åœ¨åˆå§‹åŒ–ä¹‹åä¾¿ä¸èƒ½æ›´æ”¹ï¼›å¦‚æœæ˜¯å¼•ç”¨ç±»å‹çš„\nå˜é‡ï¼Œåˆ™åœ¨å¯¹å…¶åˆå§‹åŒ–ä¹‹åä¾¿ä¸èƒ½å†è®©å…¶æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ã€‚ å½“ç”¨finalä¿®é¥°ä¸€ä¸ªç±»æ—¶ï¼Œè¡¨æ˜è¿™ä¸ªç±»ä¸èƒ½è¢«ç»§æ‰¿ã€‚finalç±»ä¸­çš„æ‰€æœ‰æˆå‘˜æ–¹æ³•éƒ½ä¼šè¢«éšå¼åœ°æŒ‡å®šä¸ºfinalæ–¹æ³•ã€‚ ä½¿ç”¨finalæ–¹æ³•çš„åŸå› æœ‰ä¸¤ä¸ªã€‚ç¬¬ä¸€ä¸ªåŸå› æ˜¯æŠŠæ–¹æ³•é”å®šï¼Œä»¥é˜²ä»»ä½•ç»§æ‰¿ç±»ä¿®æ”¹å®ƒçš„å«ä¹‰ï¼›ç¬¬äºŒä¸ªåŸå› æ˜¯æ•ˆç‡ã€‚\nåœ¨æ—©æœŸçš„Javaå®ç°ç‰ˆæœ¬ä¸­ï¼Œä¼šå°†finalæ–¹æ³•è½¬ä¸ºå†…åµŒè°ƒç”¨ã€‚ä½†æ˜¯å¦‚æœæ–¹æ³•è¿‡äºåºå¤§ï¼Œå¯èƒ½çœ‹ä¸åˆ°å†…åµŒè°ƒç”¨å¸¦æ¥çš„\nä»»ä½•æ€§èƒ½æå‡ï¼ˆç°åœ¨çš„Javaç‰ˆæœ¬å·²ç»ä¸éœ€è¦ä½¿ç”¨finalæ–¹æ³•è¿›è¡Œè¿™äº›ä¼˜åŒ–äº†ï¼‰ã€‚ç±»ä¸­æ‰€æœ‰çš„privateæ–¹æ³•éƒ½éšå¼åœ°æŒ‡å®šä¸ºfianlã€‚  Objectç±»çš„å¸¸è§æ–¹æ³• 1 2 3 4 5 6 7 8 9 10 11 12 13  public final native Class\u0026lt;?\u0026gt; getClass()//nativeæ–¹æ³•ï¼Œç”¨äºè¿”å›å½“å‰è¿è¡Œæ—¶å¯¹è±¡çš„Classå¯¹è±¡ï¼Œä½¿ç”¨äº†\rfinalå…³é”®å­—ä¿®é¥°ï¼Œæ•…ä¸å…è®¸å­ç±»é‡å†™ã€‚\rpublic native int hashCode() //nativeæ–¹æ³•ï¼Œç”¨äºè¿”å›å¯¹è±¡çš„å“ˆå¸Œç ï¼Œä¸»è¦ä½¿ç”¨åœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œæ¯”å¦‚JDKä¸­çš„\rHashMapã€‚\rpublic boolean equals(Object obj)//ç”¨äºæ¯”è¾ƒ2ä¸ªå¯¹è±¡çš„å†…å­˜åœ°å€æ˜¯å¦ç›¸ç­‰ï¼ŒStringç±»å¯¹è¯¥æ–¹æ³•è¿›è¡Œäº†é‡å†™ç”¨æˆ·æ¯”è¾ƒå­—ç¬¦ä¸²çš„å€¼æ˜¯å¦ç›¸ç­‰ã€‚\rprotected native Object clone() throws CloneNotSupportedException//naitiveæ–¹æ³•ï¼Œç”¨äºåˆ›å»ºå¹¶è¿”å›å½“å‰å¯¹è±¡çš„ä¸€ä»½æ‹·è´ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯¹äºä»»ä½•å¯¹è±¡ xï¼Œè¡¨è¾¾å¼ x.clone() != x ä¸ºtrueï¼Œx.clone().getClass()== x.getClass() ä¸ºtrueã€‚Objectæœ¬èº«æ²¡æœ‰å®ç°Cloneableæ¥å£ï¼Œæ‰€ä»¥ä¸é‡å†™cloneæ–¹æ³•å¹¶ä¸”è¿›è¡Œè°ƒç”¨çš„è¯ä¼šå‘ç”ŸCloneNotSupportedExceptionå¼‚å¸¸ã€‚\rpublic String toString()//è¿”å›ç±»çš„åå­—@å®ä¾‹çš„å“ˆå¸Œç çš„16è¿›åˆ¶çš„å­—ç¬¦ä¸²ã€‚å»ºè®®Objectæ‰€æœ‰çš„å­ç±»éƒ½é‡å†™è¿™ä¸ªæ–¹æ³•ã€‚\rpublic final native void notify()//nativeæ–¹æ³•ï¼Œå¹¶ä¸”ä¸èƒ½é‡å†™ã€‚å”¤é†’ä¸€ä¸ªåœ¨æ­¤å¯¹è±¡ç›‘è§†å™¨ä¸Šç­‰å¾…çš„çº¿ç¨‹(ç›‘è§†å™¨ç›¸å½“äºå°±æ˜¯é”çš„æ¦‚å¿µ)ã€‚å¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹åœ¨ç­‰å¾…åªä¼šä»»æ„å”¤é†’ä¸€ä¸ªã€‚\rpublic final native void notifyAll()//nativeæ–¹æ³•ï¼Œå¹¶ä¸”ä¸èƒ½é‡å†™ã€‚è·Ÿnotifyä¸€æ ·ï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯ä¼šå”¤é†’åœ¨æ­¤å¯¹è±¡ç›‘è§†å™¨ä¸Šç­‰å¾…çš„æ‰€æœ‰çº¿ç¨‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªçº¿ç¨‹ã€‚\rpublic final native void wait(long timeout) throws InterruptedException//nativeæ–¹æ³•ï¼Œå¹¶ä¸”ä¸èƒ½é‡å†™ã€‚æš‚åœçº¿ç¨‹çš„æ‰§è¡Œã€‚æ³¨æ„ï¼šsleepæ–¹æ³•æ²¡æœ‰é‡Šæ”¾é”ï¼Œè€Œwaitæ–¹æ³•é‡Šæ”¾äº†é” ã€‚timeoutæ˜¯ç­‰å¾…æ—¶é—´ã€‚\rpublic final void wait(long timeout, int nanos) throws InterruptedException//å¤šäº†nanoså‚æ•°ï¼Œè¿™ä¸ªå‚æ•°è¡¨ç¤ºé¢å¤–æ—¶é—´ï¼ˆä»¥æ¯«å¾®ç§’ä¸ºå•ä½ï¼ŒèŒƒå›´æ˜¯ 0-999999ï¼‰ã€‚ æ‰€ä»¥è¶…æ—¶çš„æ—¶é—´è¿˜éœ€è¦åŠ ä¸Šnanosæ¯«ç§’ã€‚\rpublic final void wait() throws InterruptedException//è·Ÿä¹‹å‰çš„2ä¸ªwaitæ–¹æ³•ä¸€æ ·ï¼Œåªä¸è¿‡è¯¥æ–¹æ³•ä¸€ç›´ç­‰å¾…ï¼Œæ²¡æœ‰è¶…æ—¶æ—¶é—´è¿™ä¸ªæ¦‚å¿µ\rprotected void finalize() throws Throwable { }//å®ä¾‹è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶çš„æ—¶å€™è§¦å‘çš„æ“ä½œ\r  å¼‚å¸¸  https://www.cnblogs.com/ljangle/p/10681782.html\n Javaçš„å¼‚å¸¸ç±»å±‚æ¬¡ç»“æ„å›¾å¦‚ä¸‹ï¼š\n  Error:\n æ˜¯ç¨‹åºæ— æ³•å¤„ç†çš„é”™è¯¯ï¼Œè¡¨ç¤ºè¿è¡Œåº”ç”¨ç¨‹åºä¸­è¾ƒä¸¥é‡é—®é¢˜ã€‚å¤§å¤šæ•°é”™è¯¯ä¸ä»£ç ç¼–å†™è€…æ‰§è¡Œçš„æ“ä½œæ— \nå…³ï¼Œè€Œè¡¨ç¤ºä»£ç è¿è¡Œæ—¶ JVMï¼ˆJava è™šæ‹Ÿæœºï¼‰å‡ºç°çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼ŒJavaè™šæ‹Ÿæœºè¿è¡Œé”™è¯¯ï¼ˆVirtual MachineErrorï¼‰ï¼Œå½“JVM ä¸å†æœ‰ç»§ç»­æ‰§è¡Œæ“ä½œæ‰€éœ€çš„å†…å­˜èµ„æºæ—¶ï¼Œå°†å‡ºç° OutOfMemoryErrorã€‚è¿™äº›å¼‚å¸¸å‘ç”Ÿæ—¶ï¼ŒJavaè™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¸€èˆ¬ä¼šé€‰æ‹©çº¿ç¨‹ç»ˆæ­¢ ; è¿™äº›é”™è¯¯è¡¨ç¤ºæ•…éšœå‘ç”Ÿäºè™šæ‹Ÿæœºè‡ªèº«ã€æˆ–è€…å‘ç”Ÿåœ¨è™šæ‹Ÿæœºè¯•å›¾æ‰§è¡Œåº”ç”¨æ—¶ï¼Œå¦‚Javaè™šæ‹Ÿæœºè¿è¡Œé”™è¯¯ï¼ˆVirtualMachineErrorï¼‰ã€ç±»å®šä¹‰é”™è¯¯ï¼ˆNoClassDefFoundErrorï¼‰ç­‰ã€‚è¿™äº›é”™è¯¯æ˜¯ä¸å¯æŸ¥çš„ï¼Œå› ä¸ºå®ƒä»¬åœ¨åº”ç”¨ç¨‹åºçš„æ§åˆ¶å’Œå¤„ç†èƒ½åŠ›ä¹‹ å¤–ï¼Œè€Œä¸”ç»å¤§å¤šæ•°æ˜¯ç¨‹åºè¿è¡Œæ—¶ä¸å…è®¸å‡ºç°çš„çŠ¶å†µã€‚å¯¹äºè®¾è®¡åˆç†çš„åº”ç”¨ç¨‹åºæ¥è¯´ï¼Œå³ä½¿ç¡®å®å‘ç”Ÿäº†é”™è¯¯ï¼Œæœ¬è´¨ä¸Šä¹Ÿä¸åº”è¯¥è¯•å›¾å»å¤„ç†å®ƒæ‰€å¼•èµ·çš„å¼‚å¸¸çŠ¶å†µã€‚åœ¨ Javaä¸­ï¼Œé”™è¯¯é€šè¿‡Errorçš„å­ç±»æè¿°.    Exception:\n å¼‚å¸¸æ˜¯å‘ç”Ÿåœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­é˜»ç¢ç¨‹åºæ­£å¸¸æ‰§è¡Œçš„é”™è¯¯æ“ä½œï¼Œåªè¦åœ¨ Java è¯­å¥æ‰§è¡Œä¸­äº§ç”Ÿå¼‚å¸¸åˆ™ä¸€ä¸ªå¼‚å¸¸å¯¹è±¡å°±ä¼šè¢«åˆ›å»º ; å…¶ä¸­ Exception åˆè¢«ç»§ç»­åˆ’åˆ†ä¸ºè¢«æ£€æŸ¥çš„å¼‚å¸¸ï¼ˆchecked exceptionï¼‰å’Œè¿è¡Œæ—¶çš„å¼‚å¸¸ï¼ˆruntime exceptionï¼Œå³ä¸å—æ£€æŸ¥çš„å¼‚å¸¸ï¼‰ ; è¢«æ£€æŸ¥çš„å¼‚å¸¸ï¼ˆChecked exceptionï¼‰åœ¨ç¨‹åºä¸­èƒ½é¢„æœŸä¸”è¦å°è¯•ä¿®å¤ï¼ˆå¦‚æˆ‘ä»¬å¿…é¡»æ•è· FileNotFoundException å¼‚å¸¸å¹¶ä¸ºç”¨æˆ·æä¾›æœ‰ç”¨ä¿¡æ¯å’Œåˆé€‚æ—¥å¿—æ¥è¿›è¡Œè°ƒè¯•ï¼ŒException æ˜¯æ‰€æœ‰è¢«æ£€æŸ¥çš„å¼‚å¸¸çš„çˆ¶ç±»ï¼‰ï¼› è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆRuntime Exceptionï¼‰åˆç§°ä¸ºä¸å—æ£€æŸ¥å¼‚å¸¸ï¼Œè­¬å¦‚æˆ‘ä»¬æ£€ç´¢æ•°ç»„å…ƒç´ ä¹‹å‰å¿…é¡»ç¡®è®¤æ•°ç»„çš„é•¿åº¦ï¼Œå¦åˆ™å°±å¯èƒ½ä¼šæŠ›å‡º ArrayIndexOutOfBoundException è¿è¡Œæ—¶å¼‚å¸¸ï¼ŒRuntimeException æ˜¯æ‰€æœ‰è¿è¡Œæ—¶å¼‚å¸¸çš„çˆ¶ç±»ã€‚    java ä¸­ throw ä¸ throws çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n  throwè¯­å¥ç”¨åœ¨æ–¹æ³•ä½“å†…ï¼Œè¡¨ç¤ºæŠ›å‡ºå¼‚å¸¸ï¼Œç”±æ–¹æ³•ä½“å†…çš„è¯­å¥å¤„ç† ï¼Œ æ˜¯å½“ç¨‹åºå‡ºç°æŸç§é€»è¾‘é”™è¯¯æ—¶ç”±ç¨‹åºå‘˜ä¸»åŠ¨æŠ›å‡ºæŸç§ç‰¹å®šç±»å‹çš„å¼‚å¸¸æ˜¯ï¼Œå…·ä½“å‘å¤–æŠ›å¼‚å¸¸çš„åŠ¨ä½œï¼Œæ‰€ä»¥å®ƒæ˜¯æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸å®ä¾‹ ï¼›\n  è¯­å¥ç”¨åœ¨æ–¹æ³•å£°æ˜åé¢ï¼Œè¡¨ç¤ºæŠ›å‡ºå¼‚å¸¸ï¼Œç”±è¯¥æ–¹æ³•çš„è°ƒç”¨è€…æ¥å¤„ç† ï¼Œ ä¸»è¦æ˜¯å£°æ˜è¿™ä¸ªæ–¹æ³•ä¼šæŠ›å‡ºè¿™ç§ç±»å‹çš„å¼‚å¸¸ï¼Œä½¿å®ƒçš„è°ƒç”¨è€…çŸ¥é“è¦æ•è·è¿™ä¸ªå¼‚å¸¸ã€‚\n  throw ä½¿ç”¨çš„ä½ç½®åœ¨æ–¹æ³•ä¸­ï¼Œåé¢è·Ÿçš„å¼‚å¸¸å¯¹è±¡å®ä¾‹ï¼Œè¡¨ç¤ºæŠ›å‡ºå¼‚å¸¸ï¼Œç”±æ–¹æ³•ä½“å†…è¯­å¥å¤„ç†ï¼Œå¦‚æœæ–¹æ³•ä¸­æœ‰ throw æŠ›å‡º RuntimeException åŠå…¶å­ç±»åˆ™å£°æ˜ä¸Šå¯ä»¥æ²¡æœ‰ throwsï¼Œå¦‚æœæ–¹æ³•ä¸­æœ‰ throw æŠ›å‡º Exception åŠå…¶å­ç±»åˆ™å£°æ˜ä¸Šå¿…é¡»æœ‰ throwsã€‚throws ä½¿ç”¨çš„ä½ç½®åœ¨æ–¹æ³•å‚æ•°å°æ‹¬å·åé¢ï¼Œåé¢è·Ÿçš„æ˜¯ä¸€ä¸ªæˆ–è€…å¤šä¸ªå¼‚å¸¸ç±»åä¸”ç”¨é€—å·éš”å¼€ï¼Œè¡¨ç¤ºæŠ›å‡ºå¼‚å¸¸å¹¶äº¤ç»™è°ƒç”¨è€…å»å¤„ç†ï¼Œå¦‚æœåé¢æ ¹æ®çš„æ˜¯ RuntimeException åŠå…¶å­ç±»åˆ™è¯¥æ–¹æ³•å¯ä»¥ä¸ç”¨å¤„ç†ï¼Œå¦‚æœåé¢æ ¹æ®çš„æ˜¯ Exception åŠå…¶å­ç±»åˆ™å¿…é¡»è¦ç¼–å†™ä»£ç è¿›è¡Œå¤„ç†æˆ–è€…è°ƒç”¨çš„æ—¶å€™æŠ›å‡ºã€‚\n  javaå¼‚å¸¸é“¾ï¼Ÿ\n https://www.cnblogs.com/darrenqiao/p/9185555.html\n  ä¸€ ç§é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æŠ€æœ¯ï¼Œå°†æ•è·åˆ°çš„å¼‚å¸¸é‡æ–°å°è£…åˆ°ä¸€ä¸ªæ–°çš„å¼‚å¸¸ä¸­ï¼Œå¹¶é‡æ–°æŠ›å‡ºã€‚ å¼‚å¸¸é“¾æ˜¯æŒ‡åœ¨è¿›è¡Œä¸€ä¸ªå¼‚å¸¸å¤„ç†æ—¶æŠ›å‡ºäº†å¦å¤–ä¸€ä¸ªå¼‚å¸¸ï¼Œç”±æ­¤äº§ç”Ÿäº†ä¸€ä¸ªå¼‚å¸¸é“¾æ¡ï¼Œ å¹¶ä¸”å¸Œæœ›æŠŠå¼‚å¸¸åŸå§‹ä¿¡æ¯ä¿å­˜ä¸‹æ¥ ï¼Œå¤§å¤šç”¨äºå°†å—æ£€æŸ¥å¼‚å¸¸ï¼ˆchecked exceptionï¼‰å°è£…æˆä¸ºéå—æ£€æŸ¥å¼‚å¸¸ï¼ˆunchecked exception)æˆ–è€… RuntimeExceptionã€‚ç‰¹åˆ«æ³¨æ„å¦‚æœä½ å› ä¸ºä¸€ä¸ªå¼‚å¸¸è€Œå†³å®šæŠ›å‡ºå¦ä¸€ä¸ªæ–°çš„å¼‚å¸¸æ—¶ä¸€å®šè¦åŒ…å«åŸæœ‰çš„å¼‚å¸¸ï¼Œè¿™æ ·å¤„ç†ç¨‹åºæ‰å¯ä»¥é€šè¿‡ getCause() å’Œ initCause() æ–¹æ³•æ¥è®¿é—®å¼‚å¸¸æœ€ç»ˆçš„æ ¹æºã€‚ ç”¨é€”ï¼š å¯ä»¥ä¿ç•™æ¯ä¸€å±‚çš„å¼‚å¸¸ä¿¡æ¯ï¼Œç”¨æˆ·æŸ¥çœ‹å¼‚å¸¸çš„æ—¶å€™ï¼Œèƒ½å¤Ÿä»é¡¶å±‚å¼‚å¸¸ä¿¡æ¯çœ‹åˆ°åº•å±‚å¼‚å¸¸ä¿¡æ¯ ç”¨æ³•ï¼š catchå¼‚å¸¸ä¹‹åï¼Œå°†å¼‚å¸¸ä½œä¸ºå‚æ•°ç”Ÿæˆä¸€ä¸ªæ–°çš„å¼‚å¸¸å¹¶æŠ›å‡º ã€‚    1 2 3 4 5 6 7 8 9 10 11 12  public class ChainedExceptionTest {\rpublic static void main(String[] args) {\rtry {\r//throw original exception\r throw new FileNotFoundException(\u0026#34;oops, no file\u0026#34;);\r} catch (Exception ex) {\r//catch exception and make it into a new exception as member param cause.\r ex.printStackTrace();\rthrow new RuntimeException(ex);\r}\r}\r}\r  è¾“å‡ºå¦‚ä¸‹ï¼š\njava.io.FileNotFoundException: oops, no file\rat cn.ling.base.ChainedExceptionTest.main(ChainedExceptionTest.java:14)\rException in thread \u0026quot;main\u0026quot; java.lang.RuntimeException: java.io.FileNotFoundException: oops, no file\rat cn.ling.base.ChainedExceptionTest.main(ChainedExceptionTest.java:18)\rCaused by: java.io.FileNotFoundException: oops, no file\rat cn.ling.base.ChainedExceptionTest.main(ChainedExceptionTest.java:14)\rProcess finished with exit code 1\r java è‡ªå®šä¹‰å¼‚å¸¸   https://blog.csdn.net/weixin_34387284/article/details/93169490\n  ä»€ä¹ˆæƒ…å†µä¸‹finalå—ä¸ä¼šæ‰§è¡Œï¼Ÿ   åœ¨finallyè¯­å¥å—ä¸­å‘ç”Ÿäº†å¼‚å¸¸ï¼› åœ¨å‰é¢çš„ä»£ç ä¸­ç”¨äº†System.exit()é€€å‡ºç¨‹åºï¼› ç¨‹åºæ‰€åœ¨çš„çº¿ç¨‹æ­»äº¡ï¼› å…³é—­CPUã€‚  æ— è®ºæ˜¯å¦æ•è·æˆ–å¤„ç†å¼‚å¸¸ï¼Œfinallyå—é‡Œçš„è¯­å¥éƒ½ä¼šè¢«æ‰§è¡Œã€‚å½“åœ¨tryå—æˆ–catchå—ä¸­é‡åˆ°returnè¯­å¥\næ—¶ï¼Œfinallyè¯­å¥å—å°†åœ¨æ–¹æ³•è¿”å›ä¹‹å‰è¢«æ‰§è¡Œã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28  public class ExceptionTest {\rpublic static void main(String[] args) {\rSystem.out.println(test1());\rSystem.out.println(test2());\r}\r/**\r* é—®ï¼šè¯·ç®€å•æè¿°ä¸‹é¢æ–¹æ³•çš„æ‰§è¡Œæµç¨‹å’Œæœ€ç»ˆè¿”å›å€¼æ˜¯å¤šå°‘ï¼Ÿ\r* @return result\r*/\rpublic static int test1(){\rint ret = 0;\rtry{\rreturn ret;\r}finally{\rret = 2;\r}\r}\rpublic static int test2(){\rint ret = 0;\rtry{\rint a = 5/0;\rreturn ret;\r}finally{\rreturn 2;\r}\r}\r}\r    test1 æ–¹æ³•è¿è¡Œè¿”å› 0ï¼Œå› ä¸ºæ‰§è¡Œåˆ° try çš„ return ret; è¯­å¥å‰ä¼šå…ˆå°†è¿”å›å€¼ ret ä¿å­˜åœ¨ä¸€ä¸ªä¸´æ—¶å˜é‡ä¸­ï¼Œç„¶åæ‰æ‰§è¡Œ finally è¯­å¥ï¼Œæœ€å try å†è¿”å›é‚£ä¸ªä¸´æ—¶å˜é‡ï¼Œfinally ä¸­å¯¹ ret çš„ä¿®æ”¹ä¸ä¼šè¢«è¿”å›ã€‚\n  test2 æ–¹æ³•è¿è¡Œè¿”å› 2ï¼Œå› ä¸º 5/0 ä¼šè§¦å‘ ArithmeticException å¼‚å¸¸ï¼Œä½†æ˜¯ finally ä¸­æœ‰ return è¯­å¥ï¼Œfinally ä¸­ return ä¸ä»…ä¼šè¦†ç›– try å’Œ catch å†…çš„è¿”å›å€¼ä¸”è¿˜ä¼šæ©ç›– try å’Œ catch å†…çš„å¼‚å¸¸ï¼Œå°±åƒå¼‚å¸¸æ²¡æœ‰å‘ç”Ÿä¸€æ ·ï¼ˆç‰¹åˆ«æ³¨æ„ï¼Œå½“ finally ä¸­æ²¡æœ‰ return æ—¶è¯¥æ–¹æ³•è¿è¡Œä¼šæŠ›å‡º ArithmeticException å¼‚å¸¸ï¼‰ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•å°±ä¼šè¿”å› 2ï¼Œè€Œä¸”ä¸å†å‘ä¸Šä¼ é€’å¼‚å¸¸äº†\n  1 2 3 4 5 6 7 8  public static void func() {}\rpublic static void main(String args[]) {\rtry{\rfunc();\r}catch(IOException e) {\re.printStackTrace();\r}\r}\r   ä¸Šé¢ä»£ç æ®µç¼–è¯‘æ—¶åœ¨ IOException æ—¶ä¼šå‡ºç°ç¼–è¯‘é”™è¯¯ï¼Œå› ä¸º IOException æ˜¯å—æ£€æŸ¥å¼‚å¸¸ï¼Œè€Œ func æ–¹æ³•å¹¶æ²¡æœ‰æŠ›å‡º IOExceptionï¼Œæ‰€ä»¥ç¼–è¯‘æŠ¥é”™ï¼Œä½†æ˜¯å¦‚æœå°† IOException æ”¹ä¸º Exceptionï¼ˆæˆ–è€… NullPointerException ç­‰ï¼‰åˆ™ç¼–è¯‘æŠ¥é”™å°†æ¶ˆå¤±ï¼Œå› ä¸º Exception å¯ä»¥ç”¨æ¥æ•æ‰æ‰€æœ‰è¿è¡Œæ—¶å¼‚å¸¸ï¼Œè¿™æ ·å°±ä¸éœ€è¦å£°æ˜æŠ›å‡ºè¯­å¥ã€‚  é—®ï¼šå…³äº java ä¸­çš„å¼‚å¸¸å¤„ç†ä½ æœ‰å•¥å¿ƒå¾—æˆ–è€…ç»éªŒï¼Ÿ\nç­”:è¿™å…¶å®æ˜¯ä¸€ä¸ªç»éªŒé¢˜ï¼Œç­”æ¡ˆä¸å±€é™çš„ï¼Œå¯ä»¥è‡ªç”±å‘æŒ¥ï¼Œä¸‹é¢ç»™å‡ºå‡ ä¸ªç¤ºä¾‹ç‚¹ã€‚\n æ–¹æ³•è¿”å›å€¼å°½é‡ä¸è¦ä½¿ç”¨ nullï¼ˆç‰¹æ®Šåœºæ™¯é™¤å¤–ï¼‰ï¼Œè¿™æ ·å¯ä»¥é¿å…å¾ˆå¤š NullPointerException å¼‚å¸¸ã€‚ catch ä½äº†å¦‚æœçœŸçš„æ²¡å¿…è¦å¤„ç†åˆ™è‡³å°‘åŠ è¡Œæ‰“å°ï¼Œè¿™æ ·å¯åœ¨å°†æ¥æ–¹ä¾¿æ’æŸ¥é—®é¢˜ã€‚ æ¥å£æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸å°½é‡ä¿è¯æ˜¯è¿è¡Œæ—¶å¼‚å¸¸ç±»å‹ï¼Œé™¤éè¿«ä¸å¾—å·²æ‰æŠ›å‡ºæ£€æŸ¥ç±»å‹å¼‚å¸¸ã€‚ é¿å…åœ¨ finally ä¸­ä½¿ç”¨ return è¯­å¥æˆ–è€…æŠ›å‡ºå¼‚å¸¸ï¼Œå¦‚æœè°ƒç”¨çš„å…¶ä»–ä»£ç å¯èƒ½æŠ›å‡ºå¼‚å¸¸åˆ™åº”è¯¥æ•è·å¼‚å¸¸å¹¶è¿›è¡Œå¤„ç†ï¼Œå› ä¸º finally ä¸­ return ä¸ä»…ä¼šè¦†ç›– try å’Œ catch å†…çš„è¿”å›å€¼ä¸”è¿˜ä¼šæ©ç›– try å’Œ catch å†…çš„å¼‚å¸¸ï¼Œå°±åƒå¼‚å¸¸æ²¡æœ‰å‘ç”Ÿä¸€æ ·ï¼ˆç‰¹åˆ«æ³¨æ„ï¼Œå½“ try-finally ä¸­æ²¡æœ‰ return æ—¶è¯¥æ–¹æ³•è¿è¡Œä¼šç»§ç»­æŠ›å‡ºå¼‚å¸¸ï¼‰ã€‚ å°½é‡ä¸è¦åœ¨ catch å—ä¸­å‹åˆ¶å¼‚å¸¸ï¼ˆå³ä»€ä¹ˆä¹Ÿä¸å¤„ç†ç›´æ¥ returnï¼‰ï¼Œå› ä¸ºè¿™æ ·ä»¥åæ— è®ºæŠ›å‡ºä»€ä¹ˆå¼‚å¸¸éƒ½ä¼šè¢«å¿½ç•¥ï¼Œä»¥è‡³æ²¡æœ‰ç•™ä¸‹ä»»ä½•é—®é¢˜çº¿ç´¢ï¼Œå¦‚æœåœ¨è¿™ä¸€å±‚ä¸çŸ¥é“å¦‚ä½•å¤„ç†å¼‚å¸¸æœ€å¥½å°†å¼‚å¸¸é‡æ–°æŠ›å‡ºç”±ä¸Šå±‚å†³å®šå¦‚ä½•å¤„ç†å¼‚å¸¸ã€‚ æ–¹æ³•å®šä¹‰ä¸­ throws åé¢å°½é‡å®šä¹‰å…·ä½“çš„å¼‚å¸¸åˆ—è¡¨ï¼Œä¸è¦ç›´æ¥ throws Exceptionã€‚ æ•è·å¼‚å¸¸æ—¶å°½é‡æ•è·å…·ä½“çš„å¼‚å¸¸ç±»å‹è€Œä¸è¦ç›´æ¥æ•è·å…¶çˆ¶ç±»ï¼Œè¿™æ ·å®¹æ˜“é€ æˆæ··ä¹±ã€‚ é¿å…åœ¨ finally å—ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œä¸ç„¶ç¬¬ä¸€ä¸ªå¼‚å¸¸çš„è°ƒç”¨æ ˆä¼šä¸¢å¤±ã€‚ ä¸è¦ä½¿ç”¨å¼‚å¸¸æ§åˆ¶ç¨‹åºçš„æµç¨‹ï¼Œè­¬å¦‚æœ¬åº”è¯¥ä½¿ç”¨ if è¯­å¥è¿›è¡Œæ¡ä»¶åˆ¤æ–­çš„æƒ…å†µä¸‹å´ä½¿ç”¨å¼‚å¸¸å¤„ç†æ˜¯éå¸¸ä¸å¥½çš„ä¹ æƒ¯ï¼Œä¼šä¸¥é‡å½±å“æ€§èƒ½ã€‚ ä¸è¦ç›´æ¥æ•è· Throwable ç±»ï¼Œå› ä¸º Error æ˜¯ Throwable ç±»çš„å­ç±»ï¼Œå½“åº”ç”¨æŠ›å‡º Errors çš„æ—¶å€™ä¸€èˆ¬éƒ½æ˜¯ä¸å¯æ¢å¤çš„æƒ…å†µã€‚  æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«ï¼Ÿ  https://github.com/Snailclimb/JavaGuide/issues/146\nhttps://blog.csdn.net/csdnlijingran/article/details/88410948\n  æ¥å£çš„æ–¹æ³•é»˜è®¤æ˜¯ publicï¼Œæ‰€æœ‰æ–¹æ³•åœ¨æ¥å£ä¸­ä¸èƒ½æœ‰å®ç°(Java 8 å¼€å§‹æ¥å£æ–¹æ³•å¯ä»¥æœ‰é»˜è®¤å®ç°ï¼‰ï¼ŒæŠ½è±¡ç±»å¯ä»¥æœ‰éæŠ½è±¡çš„æ–¹æ³• æ¥å£ä¸­çš„å®ä¾‹å˜é‡é»˜è®¤æ˜¯ final ç±»å‹çš„ï¼Œè€ŒæŠ½è±¡ç±»ä¸­åˆ™ä¸ä¸€å®š ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼Œä½†æœ€å¤šåªèƒ½å®ç°ä¸€ä¸ªæŠ½è±¡ç±» ä¸€ä¸ªç±»å®ç°æ¥å£çš„è¯è¦å®ç°æ¥å£çš„æ‰€æœ‰æ–¹æ³•ï¼Œè€ŒæŠ½è±¡ç±»ä¸ä¸€å®š æ¥å£ä¸èƒ½ç”¨ new å®ä¾‹åŒ–ï¼Œä½†å¯ä»¥å£°æ˜ï¼Œä½†æ˜¯å¿…é¡»å¼•ç”¨ä¸€ä¸ªå®ç°è¯¥æ¥å£çš„å¯¹è±¡ ä»è®¾è®¡å±‚é¢æ¥è¯´ï¼ŒæŠ½è±¡æ˜¯å¯¹ç±»çš„æŠ½è±¡ï¼Œæ˜¯ä¸€ç§æ¨¡æ¿è®¾è®¡ï¼Œæ¥å£æ˜¯è¡Œä¸ºçš„æŠ½è±¡ï¼Œæ˜¯ä¸€ç§è¡Œä¸ºçš„è§„èŒƒã€‚\nå¤‡æ³¨:åœ¨JDK8ä¸­ï¼Œæ¥å£ä¹Ÿå¯ä»¥å®šä¹‰é™æ€æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥ç”¨æ¥å£åè°ƒç”¨ã€‚å®ç°ç±»å’Œå®ç°æ˜¯ä¸å¯ä»¥è°ƒç”¨çš„ã€‚å¦‚æœåŒæ—¶å®ç°ä¸¤ä¸ªæ¥å£ï¼Œæ¥å£ä¸­å®šä¹‰äº†ä¸€æ ·çš„é»˜è®¤æ–¹æ³•ï¼Œå¿…é¡»é‡å†™ï¼Œ  Javaé›†åˆæ¡†æ¶ ArrayList ä¸ Vector åŒºåˆ«ï¼Ÿ  Vectorç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯åŒæ­¥çš„ã€‚å¯ä»¥ç”±ä¸¤ä¸ªçº¿ç¨‹å®‰å…¨åœ°è®¿é—®ä¸€ä¸ªVectorå¯¹è±¡ã€ä½†æ˜¯ä¸€ä¸ªçº¿ç¨‹è®¿é—®Vectorçš„è¯ä»£ç è¦åœ¨åŒæ­¥æ“ä½œä¸Šè€—è´¹å¤§é‡çš„æ—¶é—´ï¼ŒArraylistä¸æ˜¯åŒæ­¥çš„ï¼Œæ‰€ä»¥åœ¨ä¸éœ€è¦ä¿è¯çº¿ç¨‹å®‰å…¨æ—¶æ—¶å»ºè®®ä½¿ç”¨Arraylistï¼› å½“å­˜å‚¨ç©ºé—´ä¸è¶³çš„æ—¶å€™ï¼ŒArrayListé»˜è®¤å¢åŠ ä¸ºåŸæ¥çš„50%ï¼ŒVectoré»˜è®¤å¢åŠ ä¸ºåŸæ¥çš„ä¸€å€ï¼› vectorå¯ä»¥è®¾ç½®capacityIncrementï¼Œè€ŒArrayListä¸å¯ä»¥ï¼Œä»å­—é¢ç†è§£å°±æ˜¯capacityå®¹é‡ï¼ŒIncrementå¢åŠ ï¼Œå®¹é‡å¢é•¿çš„å‚æ•° ã€‚  Arraylist ä¸ LinkedList å¼‚åŒ  çº¿ç¨‹å®‰å…¨ï¼šArrayList å’Œ LinkedList éƒ½æ˜¯ä¸åŒæ­¥çš„ï¼Œä¹Ÿå°±æ˜¯ä¸ä¿è¯çº¿ç¨‹å®‰å…¨ï¼› åº•å±‚æ•°æ®ç»“æ„ï¼šArraylist åº•å±‚ä½¿ç”¨çš„æ˜¯Objectæ•°ç»„ï¼›LinkedList åº•å±‚ä½¿ç”¨çš„æ˜¯åŒå‘é“¾è¡¨æ•°æ®ç»“æ„ï¼› æ’å…¥å’Œåˆ é™¤æ˜¯å¦å—å…ƒç´ ä½ç½®çš„å½±å“ï¼šâ‘  ArrayList é‡‡ç”¨æ•°ç»„å­˜å‚¨ï¼Œæ‰€ä»¥æ’å…¥å’Œåˆ é™¤å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦å—å…ƒç´ \nä½ç½®çš„å½±å“ã€‚ æ¯”å¦‚ï¼šæ‰§è¡Œadd(E e) æ–¹æ³•çš„æ—¶å€™ï¼Œ ArrayList ä¼šé»˜è®¤åœ¨å°†æŒ‡å®šçš„å…ƒç´ è¿½åŠ åˆ°æ­¤åˆ—è¡¨çš„æœ«å°¾ï¼Œè¿™ç§\næƒ…å†µæ—¶é—´å¤æ‚åº¦å°±æ˜¯O(1)ã€‚ä½†æ˜¯å¦‚æœè¦åœ¨æŒ‡å®šä½ç½® i æ’å…¥å’Œåˆ é™¤å…ƒç´ çš„è¯ï¼ˆ add(int index, E element) ï¼‰æ—¶\né—´å¤æ‚åº¦å°±ä¸º O(n-i)ã€‚å› ä¸ºåœ¨è¿›è¡Œä¸Šè¿°æ“ä½œçš„æ—¶å€™é›†åˆä¸­ç¬¬ i å’Œç¬¬ i ä¸ªå…ƒç´ ä¹‹åçš„(n-i)ä¸ªå…ƒç´ éƒ½è¦æ‰§è¡Œå‘åä½/å‘å‰ç§»ä¸€ä½çš„æ“ä½œã€‚ â‘¡ LinkedList é‡‡ç”¨é“¾è¡¨å­˜å‚¨ï¼Œæ‰€ä»¥æ’å…¥ï¼Œåˆ é™¤å…ƒç´ æ—¶é—´å¤æ‚åº¦ä¸å—å…ƒç´ ä½ç½®çš„å½±å“ï¼Œéƒ½æ˜¯è¿‘ä¼¼ Oï¼ˆ1ï¼‰è€Œæ•°ç»„ä¸ºè¿‘ä¼¼ Oï¼ˆnï¼‰ï¼› æ˜¯å¦æ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ï¼šLinkedList ä¸æ”¯æŒé«˜æ•ˆçš„éšæœºå…ƒç´ è®¿é—®ï¼Œè€Œ ArrayList æ”¯æŒã€‚å¿«é€Ÿéšæœºè®¿é—®å°±æ˜¯é€š\nè¿‡å…ƒç´ çš„åºå·å¿«é€Ÿè·å–å…ƒç´ å¯¹è±¡(å¯¹åº”äºget(int index) æ–¹æ³•)ï¼› å†…å­˜ç©ºé—´å ç”¨ï¼š ArrayListçš„ç©º é—´æµªè´¹ä¸»è¦ä½“ç°åœ¨åœ¨liståˆ—è¡¨çš„ç»“å°¾ä¼šé¢„ç•™ä¸€å®šçš„å®¹é‡ç©ºé—´ï¼Œè€ŒLinkedListçš„ç©º\né—´èŠ±è´¹åˆ™ä½“ç°åœ¨å®ƒçš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½éœ€è¦æ¶ˆè€—æ¯”ArrayListæ›´å¤šçš„ç©ºé—´ï¼ˆå› ä¸ºè¦å­˜æ”¾ç›´æ¥åç»§å’Œç›´æ¥å‰é©±ä»¥åŠæ•°\næ®ï¼‰ã€‚  è¡¥å……ï¼šandomAccessæ¥å£\n1 2  public interface RandomAccess {\r}\r   RandomAccess æ¥å£ä¸­ä»€ä¹ˆéƒ½æ²¡æœ‰å®šä¹‰ï¼ŒRandomAccess æ¥å£åªæ˜¯ä¸€ä¸ªæ ‡å¿—ï¼Œæ ‡è¯†å®ç°è¿™ä¸ªæ¥å£çš„ç±»å…·æœ‰éšæœºè®¿é—®åŠŸèƒ½ã€‚  åœ¨binarySearchï¼ˆï¼‰æ–¹æ³•ä¸­ï¼Œå®ƒè¦åˆ¤æ–­ä¼ å…¥çš„list æ˜¯å¦RamdomAccessçš„å®ä¾‹ï¼Œå¦‚æœæ˜¯ï¼Œè°ƒç”¨\nindexedBinarySearchï¼ˆï¼‰æ–¹æ³•ï¼Œå¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆè°ƒç”¨iteratorBinarySearchï¼ˆï¼‰æ–¹æ³•\n1 2 3 4 5 6  public static \u0026lt;T\u0026gt; int binarySearch(List\u0026lt;? extends Comparable\u0026lt;? super T\u0026gt;\u0026gt; list, T key) {\rif (list instanceof RandomAccess || list.size()\u0026lt;BINARYSEARCH_THRESHOLD)\rreturn Collections.indexedBinarySearch(list, key);\relse\rreturn Collections.iteratorBinarySearch(list, key);\r}\r  æ€»ç»“ä¸€ä¸‹ list çš„éå†æ–¹å¼é€‰æ‹©ï¼š\n å®ç°äº†RandomAccessæ¥å£çš„listï¼Œä¼˜å…ˆé€‰æ‹©æ™®é€šforå¾ªç¯ ï¼Œå…¶æ¬¡foreachï¼› æœªå®ç°RandomAccessæ¥å£çš„listï¼Œ ä¼˜å…ˆé€‰æ‹©iteratoréå†ï¼ˆforeachéå†åº•å±‚ä¹Ÿæ˜¯é€šè¿‡iteratorå®ç°çš„ï¼‰ï¼Œå¤§\nsizeçš„æ•°æ®ï¼Œåƒä¸‡ä¸è¦ä½¿ç”¨æ™®é€šforå¾ªç¯ã€‚  ä¸€æ–‡äº†è§£javaé›†åˆ  https://mp.weixin.qq.com/s/COFHO9_BhRbbiMdXMY4dUQ\n hashmap  https://juejin.im/post/6844903554264596487\nhttps://tech.meituan.com/2016/06/24/java-hashmap.html\n ","description":"tabs, code-tabs, expand, alert, warning, notice, img, box","id":32,"section":"posts","tags":["é¢è¯•"],"title":"Javaé¢è¯•-JavaåŸºç¡€æ¦‚å¿µ","uri":"https://mrxiaoling.github.io/en/posts/%E9%9D%A2%E8%AF%95/java%E5%9F%BA%E7%A1%80/java%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/"},{"content":"Javaå¤šçº¿ç¨‹åŸºç¡€  https://mp.weixin.qq.com/s?__biz=MzIwNjg4MzY4NA==\u0026amp;mid=2247484552\u0026amp;idx=1\u0026amp;sn=6b0acf6d7501997d5a145db92f78a486\u0026amp;chksm=971b9a83a06c1395addfbfda02ed0ef9790f2a730a39d228119ef5abc2bb0fb4bf1fc42a1190\u0026amp;scene=21#wechat_redirect\n Javaä¸­å®ç°å¤šçº¿ç¨‹æœ‰å‡ ç§æ–¹æ³•ï¼ˆæ¯ç§æ–¹æ³•çš„ä¼˜ç¼ºç‚¹ï¼Ÿï¼Ÿï¼‰  ç»§æ‰¿Threadç±» å®ç°Runnableæ¥å£ å®ç°Callableæ¥å£é€šè¿‡FutureTaskåŒ…è£…å™¨æ¥åˆ›å»ºThreadçº¿ç¨‹ï¼› ä½¿ç”¨ExecutorServiceã€Callableã€Futureå®ç°æœ‰è¿”å›ç»“æœçš„å¤šçº¿ç¨‹ï¼ˆä¹Ÿå°±æ˜¯ä½¿ç”¨äº†ExecutorServiceæ¥ç®¡ç†å‰é¢çš„ä¸‰ç§æ–¹å¼ï¼‰ã€‚  å¦‚ä½•åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹  1ï¼‰ä½¿ç”¨é€€å‡ºæ ‡å¿—ï¼Œä½¿çº¿ç¨‹æ­£å¸¸é€€å‡ºï¼Œä¹Ÿå°±æ˜¯å½“runæ–¹æ³•å®Œæˆåçº¿ç¨‹ç»ˆæ­¢ã€‚ 2ï¼‰ä½¿ç”¨interruptæ–¹æ³•ä¸­æ–­çº¿ç¨‹  notify()å’ŒnotifyAll()æœ‰ä»€ä¹ˆåŒºåˆ«   notifyå¯èƒ½ä¼šå¯¼è‡´æ­»é”ï¼Œè€ŒnotifyAllåˆ™ä¸ä¼š\nä»»ä½•æ—¶å€™åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è·å¾—é”ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è¿è¡Œsynchronized ä¸­çš„ä»£ç ä½¿ç”¨notifyall,å¯ä»¥å”¤é†’æ‰€æœ‰å¤„äºwaitçŠ¶æ€çš„çº¿ç¨‹ï¼Œä½¿å…¶é‡æ–°è¿›å…¥é”çš„äº‰å¤ºé˜Ÿåˆ—ä¸­ï¼Œè€Œnotifyåªèƒ½å”¤é†’ä¸€ä¸ªã€‚\nwait() åº”é…åˆwhileå¾ªç¯ä½¿ç”¨ï¼Œä¸åº”ä½¿ç”¨ifï¼ŒåŠ¡å¿…åœ¨wait()è°ƒç”¨å‰åéƒ½æ£€æŸ¥æ¡ä»¶ï¼Œå¦‚æœä¸æ»¡è¶³ï¼Œå¿…é¡»è°ƒç”¨notify()å”¤é†’å¦å¤–çš„çº¿ç¨‹æ¥å¤„ç†ï¼Œè‡ªå·±ç»§ç»­wait()ç›´è‡³æ¡ä»¶æ»¡è¶³å†å¾€ä¸‹æ‰§è¡Œã€‚\nnotify() æ˜¯å¯¹notifyAll()çš„ä¸€ä¸ªä¼˜åŒ–ï¼Œä½†å®ƒæœ‰å¾ˆç²¾ç¡®çš„åº”ç”¨åœºæ™¯ï¼Œå¹¶ä¸”è¦æ±‚æ­£ç¡®ä½¿ç”¨ã€‚ä¸ç„¶å¯èƒ½å¯¼è‡´æ­»é”ã€‚æ­£ç¡®çš„åœºæ™¯åº”è¯¥æ˜¯ WaitSetä¸­ç­‰å¾…çš„æ˜¯ç›¸åŒçš„æ¡ä»¶ï¼Œå”¤é†’ä»»ä¸€ä¸ªéƒ½èƒ½æ­£ç¡®å¤„ç†æ¥ä¸‹æ¥çš„äº‹é¡¹ï¼Œå¦‚æœå”¤é†’çš„çº¿ç¨‹æ— æ³•æ­£ç¡®å¤„ç†ï¼ŒåŠ¡å¿…ç¡®ä¿ç»§ç»­notify()ä¸‹ä¸€ä¸ªçº¿ç¨‹ï¼Œå¹¶ä¸”è‡ªèº«éœ€è¦é‡æ–°å›åˆ°WaitSetä¸­ã€‚\n  sleep()å’Œwait() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ   å¯¹äºsleep()æ–¹æ³•ï¼Œæˆ‘ä»¬é¦–å…ˆè¦çŸ¥é“è¯¥æ–¹æ³•æ˜¯å±äºThreadç±»ä¸­çš„ã€‚è€Œwait()æ–¹æ³•ï¼Œåˆ™æ˜¯å±äºObjectç±»ä¸­\nçš„ã€‚\nsleep()æ–¹æ³•å¯¼è‡´äº†ç¨‹åºæš‚åœæ‰§è¡ŒæŒ‡å®šçš„æ—¶é—´ï¼Œè®©å‡ºcpuè¯¥å…¶ä»–çº¿ç¨‹ï¼Œä½†æ˜¯ä»–çš„ç›‘æ§çŠ¶æ€ä¾ç„¶ä¿æŒè€…ï¼Œå½“æŒ‡å®šçš„æ—¶é—´åˆ°äº†åˆä¼šè‡ªåŠ¨æ¢å¤è¿è¡ŒçŠ¶æ€ã€‚åœ¨è°ƒç”¨sleep()æ–¹æ³•çš„è¿‡ç¨‹ä¸­ï¼Œçº¿ç¨‹ä¸ä¼šé‡Šæ”¾å¯¹è±¡é”ã€‚\nå½“è°ƒç”¨wait()æ–¹æ³•çš„æ—¶å€™ï¼Œçº¿ç¨‹ä¼šæ”¾å¼ƒå¯¹è±¡é”ï¼Œè¿›å…¥ç­‰å¾…æ­¤å¯¹è±¡çš„ç­‰å¾…é”å®šæ± ï¼Œåªæœ‰é’ˆå¯¹æ­¤å¯¹è±¡è°ƒç”¨notify()æ–¹æ³•åæœ¬çº¿ç¨‹æ‰è¿›å…¥å¯¹è±¡é”å®šæ± å‡†å¤‡ï¼Œè·å–å¯¹è±¡é”è¿›å…¥è¿è¡ŒçŠ¶æ€ã€‚\n  volatile æ˜¯ä»€ä¹ˆ?å¯ä»¥ä¿è¯æœ‰åºæ€§å—? ä¸€æ—¦ä¸€ä¸ªå…±äº«å˜é‡ï¼ˆç±»çš„æˆå‘˜å˜é‡ã€ç±»çš„é™æ€æˆå‘˜å˜é‡ï¼‰è¢«volatileä¿®é¥°ä¹‹åï¼Œé‚£ä¹ˆå°±å…·å¤‡äº†ä¸¤å±‚è¯­ä¹‰ï¼š\nï¼ˆ1ï¼‰ä¿è¯äº†ä¸åŒçº¿ç¨‹å¯¹è¿™ä¸ªå˜é‡è¿›è¡Œæ“ä½œæ—¶çš„å¯è§æ€§ï¼Œå³ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†æŸä¸ªå˜é‡çš„å€¼ï¼Œè¿™æ–°å€¼å¯¹å…¶ä»–çº¿ç¨‹æ¥è¯´æ˜¯ç«‹å³å¯è§çš„,volatileå…³é”®å­—ä¼šå¼ºåˆ¶å°†ä¿®æ”¹çš„å€¼ç«‹å³å†™å…¥ä¸»å­˜ã€‚\nï¼ˆ2ï¼‰ç¦æ­¢è¿›è¡ŒæŒ‡ä»¤é‡æ’åºã€‚\nvolatile ä¸æ˜¯åŸå­æ€§æ“ä½œ\nä»€ä¹ˆå«ä¿è¯éƒ¨åˆ†æœ‰åºæ€§?\nå½“ç¨‹åºæ‰§è¡Œåˆ°volatileå˜é‡çš„è¯»æ“ä½œæˆ–è€…å†™æ“ä½œæ—¶ï¼Œåœ¨å…¶å‰é¢çš„æ“ä½œçš„æ›´æ”¹è‚¯å®šå…¨éƒ¨å·²ç»è¿›è¡Œï¼Œä¸”ç»“æœå·²ç»å¯¹åé¢çš„æ“ä½œå¯è§ï¼›åœ¨å…¶åé¢çš„æ“ä½œè‚¯å®šè¿˜æ²¡æœ‰è¿›è¡Œï¼›\n1 2 3 4 5  x = 2;//è¯­å¥1\ry = 0;//è¯­å¥2\rflag = true;//è¯­å¥3\rx = 4;//è¯­å¥4\ry = -1;//è¯­å¥5\r  ç”±äºï¬‚agå˜é‡ä¸ºvolatileå˜é‡ï¼Œé‚£ä¹ˆåœ¨è¿›è¡ŒæŒ‡ä»¤é‡æ’åºçš„è¿‡ç¨‹çš„æ—¶å€™ï¼Œä¸ä¼šå°†è¯­å¥3æ”¾åˆ°è¯­å¥1ã€è¯­å¥2å‰é¢ï¼Œä¹Ÿä¸ä¼šè®²è¯­å¥3æ”¾åˆ°è¯­å¥4ã€è¯­å¥5åé¢ã€‚ä½†æ˜¯è¦æ³¨æ„è¯­å¥1å’Œè¯­å¥2çš„é¡ºåºã€è¯­å¥4å’Œè¯­å¥5çš„é¡ºåºæ˜¯ä¸ä½œä»»ä½•ä¿è¯çš„ã€‚\nä½¿ç”¨ Volatile ä¸€èˆ¬ç”¨äº çŠ¶æ€æ ‡è®°é‡ å’Œ å•ä¾‹æ¨¡å¼çš„åŒæ£€é”\nThread ç±»ä¸­çš„start() å’Œ run() æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ  start()æ–¹æ³•è¢«ç”¨æ¥å¯åŠ¨æ–°åˆ›å»ºçš„çº¿ç¨‹ï¼Œè€Œä¸”start()å†…éƒ¨è°ƒç”¨äº†run()æ–¹æ³•ï¼Œè¿™å’Œç›´æ¥è°ƒç”¨run()æ–¹æ³•çš„æ•ˆæœä¸ä¸€æ ·ã€‚å½“ä½ è°ƒç”¨run()æ–¹æ³•çš„æ—¶å€™ï¼Œåªä¼šæ˜¯åœ¨åŸæ¥çš„çº¿ç¨‹ä¸­è°ƒç”¨ï¼Œæ²¡æœ‰æ–°çš„çº¿ç¨‹å¯åŠ¨ï¼Œstart()æ–¹æ³•æ‰ä¼šå¯åŠ¨æ–°çº¿ç¨‹ã€‚  ä¸ºä»€ä¹ˆwait, notify å’Œ notifyAllè¿™äº›æ–¹æ³•ä¸åœ¨threadç±»é‡Œé¢ï¼Ÿ  æ˜æ˜¾çš„åŸå› æ˜¯JAVAæä¾›çš„é”æ˜¯å¯¹è±¡çº§çš„è€Œä¸æ˜¯çº¿ç¨‹çº§çš„ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰é”ï¼Œé€šè¿‡çº¿ç¨‹è·å¾—ã€‚å¦‚æœçº¿ç¨‹éœ€è¦ç­‰å¾…æŸäº›é”é‚£ä¹ˆè°ƒç”¨å¯¹è±¡ä¸­çš„wait()æ–¹æ³•å°±æœ‰æ„ä¹‰äº†ã€‚å¦‚æœwait()æ–¹æ³•å®šä¹‰åœ¨Threadç±»ä¸­ï¼Œçº¿ç¨‹æ­£åœ¨ç­‰å¾…çš„æ˜¯å“ªä¸ªé”å°±ä¸æ˜æ˜¾äº†ã€‚ç®€å•çš„è¯´ï¼Œç”±äºwaitï¼Œnotifyå’ŒnotifyAlléƒ½æ˜¯é”çº§åˆ«çš„æ“ä½œï¼Œæ‰€ä»¥æŠŠä»–ä»¬å®šä¹‰åœ¨Objectç±»ä¸­å› ä¸ºé”å±äºå¯¹è±¡ã€‚  ä¸ºä»€ä¹ˆwaitå’Œnotifyæ–¹æ³•è¦åœ¨åŒæ­¥å—ä¸­è°ƒç”¨ï¼Ÿ ï¼ˆ1ï¼‰åªæœ‰åœ¨è°ƒç”¨çº¿ç¨‹æ‹¥æœ‰æŸä¸ªå¯¹è±¡çš„ç‹¬å é”æ—¶ï¼Œæ‰èƒ½å¤Ÿè°ƒç”¨è¯¥å¯¹è±¡çš„wait(),notify()å’ŒnotifyAll()æ–¹æ³•ã€‚\nï¼ˆ2ï¼‰å¦‚æœä½ ä¸è¿™ä¹ˆåšï¼Œä½ çš„ä»£ç ä¼šæŠ›å‡ºIllegalMonitorStateExceptionå¼‚å¸¸ã€‚\nï¼ˆ3ï¼‰è¿˜æœ‰ä¸€ä¸ªåŸå› æ˜¯ä¸ºäº†é¿å…waitå’Œnotifyä¹‹é—´äº§ç”Ÿç«æ€æ¡ä»¶ã€‚\nwait()æ–¹æ³•å¼ºåˆ¶å½“å‰çº¿ç¨‹é‡Šæ”¾å¯¹è±¡é”ã€‚è¿™æ„å‘³ç€åœ¨è°ƒç”¨æŸå¯¹è±¡çš„wait()æ–¹æ³•ä¹‹å‰ï¼Œå½“å‰çº¿ç¨‹å¿…é¡»å·²ç»è·å¾—è¯¥å¯¹è±¡çš„é”ã€‚å› æ­¤ï¼Œçº¿ç¨‹å¿…é¡»åœ¨æŸä¸ªå¯¹è±¡çš„åŒæ­¥æ–¹æ³•æˆ–åŒæ­¥ä»£ç å—ä¸­æ‰èƒ½è°ƒç”¨è¯¥å¯¹è±¡çš„wait()æ–¹æ³•ã€‚\nåœ¨è°ƒç”¨å¯¹è±¡çš„notify()å’ŒnotifyAll()æ–¹æ³•ä¹‹å‰ï¼Œè°ƒç”¨çº¿ç¨‹å¿…é¡»å·²ç»å¾—åˆ°è¯¥å¯¹è±¡çš„é”ã€‚å› æ­¤ï¼Œå¿…é¡»åœ¨æŸä¸ªå¯¹è±¡çš„åŒæ­¥æ–¹æ³•æˆ–åŒæ­¥ä»£ç å—ä¸­æ‰èƒ½è°ƒç”¨è¯¥å¯¹è±¡çš„notify()æˆ–notifyAll()æ–¹æ³•ã€‚\nè°ƒç”¨wait()æ–¹æ³•çš„åŸå› é€šå¸¸æ˜¯ï¼Œè°ƒç”¨çº¿ç¨‹å¸Œæœ›æŸä¸ªç‰¹æ®Šçš„çŠ¶æ€(æˆ–å˜é‡)è¢«è®¾ç½®ä¹‹åå†ç»§ç»­æ‰§è¡Œã€‚è°ƒç”¨notify()æˆ–notifyAll()æ–¹æ³•çš„åŸå› é€šå¸¸æ˜¯ï¼Œè°ƒç”¨çº¿ç¨‹å¸Œæœ›å‘Šè¯‰å…¶ä»–ç­‰å¾…ä¸­çš„çº¿ç¨‹:\u0026ldquo;ç‰¹æ®ŠçŠ¶æ€å·²ç»è¢«è®¾ç½®\u0026rdquo;ã€‚è¿™ä¸ªçŠ¶æ€ä½œä¸ºçº¿ç¨‹é—´é€šä¿¡çš„é€šé“ï¼Œå®ƒå¿…é¡»æ˜¯ä¸€ä¸ªå¯å˜çš„å…±äº«çŠ¶æ€(æˆ–å˜é‡)ã€‚\nJavaä¸­interrupted å’Œ isInterrupteddæ–¹æ³•çš„åŒºåˆ«ï¼Ÿ  https://segmentfault.com/a/1190000022039889\nhttps://blog.csdn.net/hj7jay/article/details/53462553 é‡ç‚¹å­¦ä¹ \n  interrupted() å’Œ isInterrupted()çš„ä¸»è¦åŒºåˆ«æ˜¯å‰è€…ä¼šå°†ä¸­æ–­çŠ¶æ€æ¸…é™¤è€Œåè€…ä¸ä¼šã€‚Javaå¤šçº¿ç¨‹çš„ä¸­æ–­æœºåˆ¶æ˜¯ç”¨å†…éƒ¨æ ‡è¯†æ¥å®ç°çš„ï¼Œè°ƒç”¨Thread.interrupt()æ¥ä¸­æ–­ä¸€ä¸ªçº¿ç¨‹å°±ä¼šè®¾ç½®ä¸­æ–­æ ‡è¯†ä¸ºtrueã€‚å½“ä¸­æ–­çº¿ç¨‹è°ƒç”¨é™æ€æ–¹æ³•Thread.interrupted()æ¥æ£€æŸ¥ä¸­æ–­çŠ¶æ€æ—¶ï¼Œä¸­æ–­çŠ¶æ€ä¼šè¢«æ¸…é›¶ã€‚è€Œéé™æ€æ–¹æ³•isInterrupted()ç”¨æ¥æŸ¥è¯¢å…¶å®ƒçº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ä¸”ä¸ä¼šæ”¹å˜ä¸­æ–­çŠ¶æ€æ ‡è¯†ã€‚ç®€å•çš„è¯´å°±æ˜¯ä»»ä½•æŠ›å‡ºInterruptedExceptionå¼‚å¸¸çš„æ–¹æ³•éƒ½ä¼šå°†ä¸­æ–­çŠ¶æ€æ¸…é›¶ã€‚æ— è®ºå¦‚ä½•ï¼Œä¸€ä¸ªçº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€æœ‰æœ‰å¯èƒ½è¢«å…¶å®ƒçº¿ç¨‹è°ƒç”¨ä¸­æ–­æ¥æ”¹å˜  Javaä¸­synchronized å’Œ ReentrantLock æœ‰ä»€ä¹ˆä¸åŒ ç›¸ä¼¼ç‚¹ï¼š\nè¿™ä¸¤ç§åŒæ­¥æ–¹å¼æœ‰å¾ˆå¤šç›¸ä¼¼ä¹‹å¤„ï¼Œå®ƒä»¬éƒ½æ˜¯åŠ é”æ–¹å¼åŒæ­¥ï¼Œè€Œä¸”éƒ½æ˜¯é˜»å¡å¼çš„åŒæ­¥ï¼Œä¹Ÿå°±æ˜¯è¯´å½“å¦‚æœä¸€ä¸ªçº¿ç¨‹è·å¾—äº†å¯¹è±¡é”ï¼Œè¿›å…¥äº†åŒæ­¥å—ï¼Œå…¶ä»–è®¿é—®è¯¥åŒæ­¥å—çš„çº¿ç¨‹éƒ½å¿…é¡»é˜»å¡åœ¨åŒæ­¥å—å¤–é¢ç­‰å¾…ï¼Œè€Œè¿›è¡Œçº¿ç¨‹é˜»å¡å’Œå”¤é†’çš„ä»£ä»·æ˜¯æ¯”è¾ƒé«˜çš„ã€‚\nåŒºåˆ«ï¼š\nè¿™ä¸¤ç§æ–¹å¼æœ€å¤§åŒºåˆ«å°±æ˜¯å¯¹äºSynchronizedæ¥è¯´ï¼Œå®ƒæ˜¯javaè¯­è¨€çš„å…³é”®å­—ï¼Œæ˜¯åŸç”Ÿè¯­æ³•å±‚é¢çš„äº’æ–¥ï¼Œéœ€è¦jvmå®ç°ã€‚è€ŒReentrantLockå®ƒæ˜¯JDK 1.5ä¹‹åæä¾›çš„APIå±‚é¢çš„äº’æ–¥é”ï¼Œéœ€è¦lock()å’Œunlock()æ–¹æ³•é…åˆtry/ï¬nallyè¯­å¥å—æ¥å®Œæˆã€‚\nSynchronizedè¿›è¿‡ç¼–è¯‘ï¼Œä¼šåœ¨åŒæ­¥å—çš„å‰ååˆ†åˆ«å½¢æˆmonitorenterå’Œmonitorexitè¿™ä¸ªä¸¤ä¸ªå­—èŠ‚ç æŒ‡ä»¤ã€‚åœ¨æ‰§è¡ŒmonitorenteræŒ‡ä»¤æ—¶ï¼Œé¦–å…ˆè¦å°è¯•è·å–å¯¹è±¡é”ã€‚å¦‚æœè¿™ä¸ªå¯¹è±¡æ²¡è¢«é”å®šï¼Œæˆ–è€…å½“å‰çº¿ç¨‹å·²ç»æ‹¥æœ‰äº†é‚£ä¸ªå¯¹è±¡é”ï¼ŒæŠŠé”çš„è®¡ç®—å™¨åŠ 1ï¼Œç›¸åº”çš„ï¼Œåœ¨æ‰§è¡ŒmonitorexitæŒ‡ä»¤æ—¶ä¼šå°†é”è®¡ç®—å™¨å°±å‡1ï¼Œå½“è®¡ç®—å™¨ä¸º0æ—¶ï¼Œé”å°±è¢«é‡Šæ”¾äº†ã€‚å¦‚æœè·å–å¯¹è±¡é”å¤±è´¥ï¼Œé‚£å½“å‰çº¿ç¨‹å°±è¦é˜»å¡ï¼Œç›´åˆ°å¯¹è±¡é”è¢«å¦ä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾ä¸ºæ­¢ã€‚\nç”±äºReentrantLockæ˜¯java.util.concurrentåŒ…ä¸‹æä¾›çš„ä¸€å¥—äº’æ–¥é”ï¼Œç›¸æ¯”Synchronizedï¼ŒReentrantLockç±»æä¾›äº†ä¸€äº›é«˜çº§åŠŸèƒ½ï¼Œä¸»è¦æœ‰ä»¥ä¸‹3é¡¹ï¼š\nï¼ˆ1ï¼‰ç­‰å¾…å¯ä¸­æ–­ï¼ŒæŒæœ‰é”çš„çº¿ç¨‹é•¿æœŸä¸é‡Šæ”¾çš„æ—¶å€™ï¼Œæ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹å¯ä»¥é€‰æ‹©æ”¾å¼ƒç­‰å¾…ï¼Œè¿™ç›¸å½“äºSynchronizedæ¥è¯´å¯ä»¥é¿å…å‡ºç°æ­»é”çš„æƒ…å†µã€‚\nï¼ˆ2ï¼‰å…¬å¹³é”ï¼Œå¤šä¸ªçº¿ç¨‹ç­‰å¾…åŒä¸€ä¸ªé”æ—¶ï¼Œå¿…é¡»æŒ‰ç…§ç”³è¯·é”çš„æ—¶é—´é¡ºåºè·å¾—é”ï¼ŒSynchronizedé”éå…¬å¹³é”ï¼ŒReentrantLocké»˜è®¤çš„æ„é€ å‡½æ•°æ˜¯åˆ›å»ºçš„éå…¬å¹³é”ï¼Œå¯ä»¥é€šè¿‡å‚æ•°trueè®¾ä¸ºå…¬å¹³é”ï¼Œä½†å…¬å¹³é”è¡¨ç°çš„æ€§èƒ½ä¸æ˜¯å¾ˆå¥½ã€‚\nï¼ˆ3ï¼‰é”ç»‘å®šå¤šä¸ªæ¡ä»¶ï¼Œä¸€ä¸ªReentrantLockå¯¹è±¡å¯ä»¥åŒæ—¶ç»‘å®šå¯¹ä¸ªå¯¹è±¡ã€‚\nThreadç±»ä¸­çš„yieldæ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ Yieldæ–¹æ³•å¯ä»¥æš‚åœå½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡ï¼Œè®©å…¶å®ƒæœ‰ç›¸åŒä¼˜å…ˆçº§çš„çº¿ç¨‹æ‰§è¡Œã€‚å®ƒæ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•è€Œä¸”åªä¿è¯å½“å‰çº¿ç¨‹æ”¾å¼ƒCPUå ç”¨è€Œä¸èƒ½ä¿è¯ä½¿å…¶å®ƒçº¿ç¨‹ä¸€å®šèƒ½å ç”¨CPUï¼Œæ‰§è¡Œyield()çš„çº¿ç¨‹æœ‰å¯èƒ½åœ¨è¿›å…¥åˆ°æš‚åœçŠ¶æ€åé©¬ä¸Šåˆè¢«æ‰§è¡Œã€‚\nJavaçº¿ç¨‹æ± ä¸­submit() å’Œ execute()æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥å‘çº¿ç¨‹æ± æäº¤ä»»åŠ¡ï¼Œexecute()æ–¹æ³•çš„è¿”å›ç±»å‹æ˜¯voidï¼Œå®ƒå®šä¹‰åœ¨Executoræ¥å£ä¸­, è€Œsubmit()æ–¹æ³•å¯ä»¥è¿”å›æŒæœ‰è®¡ç®—ç»“æœçš„Futureå¯¹è±¡ï¼Œå®ƒå®šä¹‰åœ¨ExecutorServiceæ¥å£ä¸­ï¼Œå®ƒæ‰©å±•äº†Executoræ¥å£ï¼Œå…¶å®ƒçº¿ç¨‹æ± ç±»åƒThreadPoolExecutorå’ŒScheduledThreadPoolExecutoréƒ½æœ‰è¿™äº›æ–¹æ³•ã€‚\nå¸¸ç”¨çš„çº¿ç¨‹æ± æœ‰å“ªäº›ï¼Ÿ ï¼ˆ1ï¼‰newSingleThreadExecutorï¼šåˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Œæ­¤çº¿ç¨‹æ± ä¿è¯æ‰€æœ‰ä»»åŠ¡çš„æ‰§è¡Œé¡ºåºæŒ‰ç…§ä»»åŠ¡çš„æäº¤é¡ºåºæ‰§è¡Œã€‚\nï¼ˆ2ï¼‰newFixedThreadPoolï¼šåˆ›å»ºå›ºå®šå¤§å°çš„çº¿ç¨‹æ± ï¼Œæ¯æ¬¡æäº¤ä¸€ä¸ªä»»åŠ¡å°±åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œç›´åˆ°çº¿ç¨‹è¾¾åˆ°çº¿ç¨‹æ± çš„æœ€å¤§å¤§å°ã€‚\nï¼ˆ3ï¼‰newCachedThreadPoolï¼šåˆ›å»ºä¸€ä¸ªå¯ç¼“å­˜çš„çº¿ç¨‹æ± ï¼Œæ­¤çº¿ç¨‹æ± ä¸ä¼šå¯¹çº¿ç¨‹æ± å¤§å°åšé™åˆ¶ï¼Œçº¿ç¨‹æ± å¤§å°å®Œå…¨ä¾èµ–äºæ“ä½œç³»ç»Ÿï¼ˆæˆ–è€…è¯´JVMï¼‰èƒ½å¤Ÿåˆ›å»ºçš„æœ€å¤§çº¿ç¨‹å¤§å°ã€‚\nï¼ˆ4ï¼‰newScheduledThreadPoolï¼šåˆ›å»ºä¸€ä¸ªå¤§å°æ— é™çš„çº¿ç¨‹æ± ï¼Œæ­¤çº¿ç¨‹æ± æ”¯æŒå®šæ—¶ä»¥åŠå‘¨æœŸæ€§æ‰§è¡Œä»»åŠ¡çš„éœ€æ±‚ã€‚\nï¼ˆ5ï¼‰newSingleScheduledThreadExecutorï¼šåˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹çš„çº¿ç¨‹æ± ã€‚æ­¤çº¿ç¨‹æ± æ”¯æŒå®šæ—¶ä»¥åŠå‘¨æœŸæ€§æ‰§è¡Œä»»åŠ¡çš„éœ€æ±‚ã€‚\nç®€è¿°ä¸€ä¸‹ä½ å¯¹çº¿ç¨‹æ± çš„ç†è§£ ï¼ˆå¦‚æœé—®åˆ°äº†è¿™æ ·çš„é—®é¢˜ï¼Œå¯ä»¥å±•å¼€çš„è¯´ä¸€ä¸‹çº¿ç¨‹æ± å¦‚ä½•ç”¨ã€çº¿ç¨‹æ± çš„å¥½å¤„ã€çº¿ç¨‹æ± çš„å¯åŠ¨ç­–ç•¥ï¼‰åˆç†åˆ©ç”¨çº¿ç¨‹æ± èƒ½å¤Ÿå¸¦æ¥ä¸‰ä¸ªå¥½å¤„ã€‚\nï¼ˆ1ï¼‰é™ä½èµ„æºæ¶ˆè€—ã€‚é€šè¿‡é‡å¤åˆ©ç”¨å·²åˆ›å»ºçš„çº¿ç¨‹é™ä½çº¿ç¨‹åˆ›å»ºå’Œé”€æ¯é€ æˆçš„æ¶ˆè€—ã€‚\nï¼ˆ2ï¼‰æé«˜å“åº”é€Ÿåº¦ã€‚å½“ä»»åŠ¡åˆ°è¾¾æ—¶ï¼Œä»»åŠ¡å¯ä»¥ä¸éœ€è¦ç­‰åˆ°çº¿ç¨‹åˆ›å»ºå°±èƒ½ç«‹å³æ‰§è¡Œã€‚\nï¼ˆ3ï¼‰æé«˜çº¿ç¨‹çš„å¯ç®¡ç†æ€§ã€‚çº¿ç¨‹æ˜¯ç¨€ç¼ºèµ„æºï¼Œå¦‚æœæ— é™åˆ¶çš„åˆ›å»ºï¼Œä¸ä»…ä¼šæ¶ˆè€—ç³»ç»Ÿèµ„æºï¼Œè¿˜ä¼šé™ä½ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œä½¿ç”¨çº¿ç¨‹æ± å¯ä»¥è¿›è¡Œç»Ÿä¸€çš„åˆ†é…ï¼Œè°ƒä¼˜å’Œç›‘æ§ã€‚\nå¤šä¸ªçº¿ç¨‹è½®æµæ‰“å°æ•°å­—  https://www.cnblogs.com/milton/p/11311148.html\nhttps://zhuanlan.zhihu.com/p/71098723\n ","description":"tabs, code-tabs, expand, alert, warning, notice, img, box","id":33,"section":"posts","tags":["é¢è¯•"],"title":"Javaé¢è¯•-Javaå¤šçº¿ç¨‹åŸºç¡€","uri":"https://mrxiaoling.github.io/en/posts/%E9%9D%A2%E8%AF%95/java%E5%9F%BA%E7%A1%80/java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80/"},{"content":"Mybatis MyBatisä¸­çš„åŠ¨æ€SQLæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ å¯¹äºä¸€äº›å¤æ‚çš„æŸ¥è¯¢ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæŒ‡å®šå¤šä¸ªæŸ¥è¯¢æ¡ä»¶ï¼Œä½†æ˜¯è¿™äº›æ¡ä»¶å¯èƒ½å­˜åœ¨ä¹Ÿå¯èƒ½ä¸å­˜åœ¨ï¼Œéœ€è¦æ ¹æ®ç”¨æˆ·æŒ‡å®šçš„æ¡ä»¶åŠ¨æ€ç”ŸæˆSQLè¯­å¥ã€‚å¦‚æœä¸ä½¿ç”¨æŒä¹…å±‚æ¡†æ¶æˆ‘ä»¬å¯èƒ½éœ€è¦è‡ªå·±æ‹¼è£…SQLè¯­å¥ï¼Œè¿˜å¥½MyBatisæä¾›äº†åŠ¨æ€SQLçš„åŠŸèƒ½æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚MyBatisä¸­ç”¨äºå®ç°åŠ¨æ€SQLçš„å…ƒç´ ä¸»è¦æœ‰ï¼š\n if choose / when / otherwise trim where set foreach  MyBatisä¸­å‘½åç©ºé—´ï¼ˆnamespaceï¼‰çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œå¯èƒ½å­˜åœ¨å¤§é‡çš„SQLè¯­å¥ï¼Œè¿™æ—¶å€™ä¸ºæ¯ä¸ªSQLè¯­å¥èµ·ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ï¼ˆIDï¼‰å°±å˜å¾—å¹¶ä¸å®¹æ˜“äº†ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨MyBatisä¸­ï¼Œå¯ä»¥ä¸ºæ¯ä¸ªæ˜ å°„æ–‡ä»¶èµ·ä¸€ä¸ªå”¯ä¸€çš„å‘½åç©ºé—´ï¼Œè¿™æ ·å®šä¹‰åœ¨è¿™ä¸ªæ˜ å°„æ–‡ä»¶ä¸­çš„æ¯ä¸ªSQLè¯­å¥å°±æˆäº†å®šä¹‰åœ¨è¿™ä¸ªå‘½åç©ºé—´ä¸­çš„ä¸€ä¸ªIDã€‚åªè¦æˆ‘ä»¬èƒ½å¤Ÿä¿è¯æ¯ä¸ªå‘½åç©ºé—´ä¸­è¿™ä¸ªIDæ˜¯å”¯ä¸€çš„ï¼Œå³ä½¿åœ¨ä¸åŒæ˜ å°„æ–‡ä»¶ä¸­çš„è¯­å¥IDç›¸åŒï¼Œä¹Ÿä¸ä¼šå†äº§ç”Ÿå†²çªäº†ã€‚\nmybatiså¯¹JDBCåšäº†å“ªäº›å°è£…ï¼Ÿ mybatisçš„ä¸€çº§å’ŒäºŒçº§ç¼“å­˜  https://blog.csdn.net/u012373815/article/details/47069223\n mybatisæä¾›æŸ¥è¯¢ç¼“å­˜ï¼Œç”¨äºå‡è½»æ•°æ®å‹åŠ›ï¼Œæé«˜æ•°æ®åº“æ€§èƒ½ã€‚\nmybaitsæä¾›ä¸€çº§ç¼“å­˜ï¼Œå’ŒäºŒçº§ç¼“å­˜ã€‚\n ä¸€çº§ç¼“å­˜æ˜¯SqlSessionçº§åˆ«çš„ç¼“å­˜ã€‚åœ¨æ“ä½œæ•°æ®åº“æ—¶éœ€è¦æ„é€  sqlSessionå¯¹è±¡ï¼Œåœ¨å¯¹è±¡ä¸­æœ‰ä¸€ä¸ª(å†…å­˜åŒºåŸŸ)æ•°æ®ç»“æ„ï¼ˆHashMapï¼‰ç”¨äºå­˜å‚¨ç¼“å­˜æ•°æ®ã€‚ä¸åŒçš„sqlSessionä¹‹é—´çš„ç¼“å­˜æ•°æ®åŒºåŸŸï¼ˆHashMapï¼‰æ˜¯äº’ç›¸ä¸å½±å“çš„ã€‚  ä¸€çº§ç¼“å­˜çš„ä½œç”¨åŸŸæ˜¯åŒä¸€ä¸ªSqlSessionï¼Œåœ¨åŒä¸€ä¸ªsqlSessionä¸­ä¸¤æ¬¡æ‰§è¡Œç›¸åŒçš„sqlè¯­å¥ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œå®Œæ¯•ä¼šå°†æ•°æ®åº“ä¸­æŸ¥è¯¢çš„æ•°æ®å†™åˆ°ç¼“å­˜ï¼ˆå†…å­˜ï¼‰ï¼Œç¬¬äºŒæ¬¡ä¼šä»ç¼“å­˜ä¸­è·å–æ•°æ®å°†ä¸å†ä»æ•°æ®åº“æŸ¥è¯¢ï¼Œä»è€Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚å½“ä¸€ä¸ªsqlSessionç»“æŸåè¯¥sqlSessionä¸­çš„ä¸€çº§ç¼“å­˜ä¹Ÿå°±ä¸å­˜åœ¨äº†ã€‚Mybatisé»˜è®¤å¼€å¯ä¸€çº§ç¼“å­˜ã€‚\n  äºŒçº§ç¼“å­˜æ˜¯mapperçº§åˆ«çš„ç¼“å­˜ï¼Œå¤šä¸ªSqlSessionå»æ“ä½œåŒä¸€ä¸ªMapperçš„sqlè¯­å¥ï¼Œå¤šä¸ªSqlSessionå»æ“ä½œæ•°æ®åº“å¾—åˆ°æ•°æ®ä¼šå­˜åœ¨äºŒçº§ç¼“å­˜åŒºåŸŸï¼Œå¤šä¸ªSqlSessionå¯ä»¥å…±ç”¨äºŒçº§ç¼“å­˜ï¼ŒäºŒçº§ç¼“å­˜æ˜¯è·¨SqlSessionçš„ã€‚\näºŒçº§ç¼“å­˜æ˜¯å¤šä¸ªSqlSessionå…±äº«çš„ï¼Œå…¶ä½œç”¨åŸŸæ˜¯mapperçš„åŒä¸€ä¸ªnamespaceï¼Œä¸åŒçš„sqlSessionä¸¤æ¬¡æ‰§è¡Œç›¸åŒnamespaceä¸‹çš„sqlè¯­å¥ä¸”å‘sqlä¸­ä¼ é€’å‚æ•°ä¹Ÿç›¸åŒå³æœ€ç»ˆæ‰§è¡Œç›¸åŒçš„sqlè¯­å¥ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œå®Œæ¯•ä¼šå°†æ•°æ®åº“ä¸­æŸ¥è¯¢çš„æ•°æ®å†™åˆ°ç¼“å­˜ï¼ˆå†…å­˜ï¼‰ï¼Œç¬¬äºŒæ¬¡ä¼šä»ç¼“å­˜ä¸­è·å–æ•°æ®å°†ä¸å†ä»æ•°æ®åº“æŸ¥è¯¢ï¼Œä»è€Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚Mybatisé»˜è®¤æ²¡æœ‰å¼€å¯äºŒçº§ç¼“å­˜éœ€è¦åœ¨settingå…¨å±€å‚æ•°ä¸­é…ç½®å¼€å¯äºŒçº§ç¼“å­˜ã€‚\n  å¦‚æœç¼“å­˜ä¸­æœ‰æ•°æ®å°±ä¸ç”¨ä»æ•°æ®åº“ä¸­è·å–ï¼Œå¤§å¤§æé«˜ç³»ç»Ÿæ€§èƒ½ã€‚\n","description":"tabs, code-tabs, expand, alert, warning, notice, img, box","id":34,"section":"posts","tags":["é¢è¯•"],"title":"Javaé¢è¯•-Mybatis","uri":"https://mrxiaoling.github.io/en/posts/%E9%9D%A2%E8%AF%95/spring/mybatis/"},{"content":"SpringåŸºç¡€ ä»€ä¹ˆæ˜¯springï¼Ÿ   Spring æ˜¯åˆ†å±‚çš„ Java SE/EE åº”ç”¨ full-stack è½»é‡çº§å¼€æºæ¡†æ¶ï¼Œä»¥ IoCï¼ˆInverse Of Controlï¼š åè½¬æ§åˆ¶ï¼‰å’Œ AOPï¼ˆAspect Oriented Programmingï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ä¸ºå†…æ ¸ï¼Œæä¾›äº†å±•ç°å±‚ Spring MVC å’ŒæŒä¹…å±‚ Spring JDBC ä»¥åŠä¸šåŠ¡å±‚äº‹åŠ¡ç®¡ç†ç­‰ä¼—å¤šçš„ä¼ä¸šçº§åº”ç”¨æŠ€æœ¯ï¼Œè¿˜èƒ½æ•´åˆå¼€æºä¸–ç•Œä¼—å¤š è‘—åçš„ç¬¬ä¸‰æ–¹æ¡†æ¶å’Œç±»åº“ï¼Œé€æ¸æˆä¸ºä½¿ç”¨æœ€å¤šçš„ Java EE ä¼ä¸šåº”ç”¨å¼€æºæ¡†æ¶ã€‚\n  Springæ˜¯ä¸€ä¸ªè½»é‡çº§æ¡†æ¶ï¼Œå¯ä»¥ä¸€ç«™å¼æ„å»ºä½ çš„ä¼ä¸šçº§åº”ç”¨ã€‚\nSpringçš„æ¨¡å—å¤§æ¦‚åˆ†ä¸º6ä¸ªã€‚åˆ†åˆ«æ˜¯ï¼š\n1ã€Core Containerï¼ˆSpringçš„æ ¸å¿ƒï¼‰ã€é‡è¦ã€‘\n2ã€AOPï¼ˆé¢å‘åˆ‡é¢å˜æˆï¼‰ã€é‡è¦ã€‘\n3ã€Messagingï¼ˆæ¶ˆæ¯å‘é€çš„æ”¯æŒï¼‰\n4ã€Data Access/Integrationï¼ˆæ•°æ®è®¿é—®å’Œé›†æˆï¼‰\n5ã€Webï¼ˆä¸»è¦æ˜¯SpringWebå†…å®¹ï¼ŒåŒ…æ‹¬MVCï¼‰ã€é‡è¦ã€‘\n6ã€Testï¼ˆSpringæµ‹è¯•æ”¯æŒï¼ŒåŒ…å«JUintç­‰æµ‹è¯•å•å…ƒçš„æ”¯æŒï¼‰ 7ã€Instrumentationï¼ˆè®¾å¤‡æ”¯æŒï¼Œæ¯”å¦‚Tomcatçš„æ”¯æŒï¼‰\n  Springçš„ä¼˜åŠ¿ï¼Ÿ   æ–¹ä¾¿è§£è€¦ï¼Œç®€åŒ–å¼€å‘ ï¼šé€šè¿‡ Spring æä¾›çš„ IoC å®¹å™¨ï¼Œå¯ä»¥å°†å¯¹è±¡é—´çš„ä¾èµ–å…³ç³»äº¤ç”± Spring è¿›è¡Œæ§åˆ¶ï¼Œé¿å…ç¡¬ç¼–ç æ‰€é€  æˆçš„è¿‡åº¦ç¨‹åºè€¦åˆã€‚ç”¨æˆ·ä¹Ÿä¸å¿…å†ä¸ºå•ä¾‹æ¨¡å¼ç±»ã€å±æ€§æ–‡ä»¶è§£æç­‰è¿™äº›å¾ˆåº•å±‚çš„éœ€æ±‚ç¼–å†™ä»£ç ï¼Œå¯ ä»¥æ›´ä¸“æ³¨äºä¸Šå±‚çš„åº”ç”¨ã€‚\n  AOPç¼–ç¨‹çš„æ”¯æŒ\n  å£°æ˜å¼äº‹åŠ¡çš„æ”¯æŒ å¯ä»¥å°†æˆ‘ä»¬ä»å•è°ƒçƒ¦é—·çš„äº‹åŠ¡ç®¡ç†ä»£ç ä¸­è§£è„±å‡ºæ¥ï¼Œé€šè¿‡å£°æ˜å¼æ–¹å¼çµæ´»çš„è¿›è¡Œäº‹åŠ¡çš„ç®¡ç†ï¼Œ æé«˜å¼€å‘æ•ˆç‡å’Œè´¨é‡ã€‚\n  æ–¹ä¾¿é›†æˆå„ç§ä¼˜ç§€æ¡†æ¶ Spring å¯ä»¥é™ä½å„ç§æ¡†æ¶çš„ä½¿ç”¨éš¾åº¦ï¼Œæä¾›äº†å¯¹å„ç§ä¼˜ç§€æ¡†æ¶ï¼ˆStrutsã€Hibernateã€Hessianã€Quartz ç­‰ï¼‰çš„ç›´æ¥æ”¯æŒã€‚\n  é™ä½ JavaEE API çš„ä½¿ç”¨éš¾åº¦ Spring å¯¹ JavaEE APIï¼ˆå¦‚ JDBCã€JavaMailã€è¿œç¨‹è°ƒç”¨ç­‰ï¼‰è¿›è¡Œäº†è–„è–„çš„å°è£…å±‚ï¼Œä½¿è¿™äº› API çš„ ä½¿ç”¨éš¾åº¦å¤§ä¸ºé™ä½ã€‚\n  Springä¸­è‡ªåŠ¨è£…é…çš„æ–¹å¼æœ‰å“ªäº›  noï¼šä¸è¿›è¡Œè‡ªåŠ¨è£…é…ï¼Œæ‰‹åŠ¨è®¾ç½®Beançš„ä¾èµ–å…³ç³»ã€‚ byNameï¼šæ ¹æ®Beançš„åå­—è¿›è¡Œè‡ªåŠ¨è£…é…ã€‚ byTypeï¼šæ ¹æ®Beançš„ç±»å‹è¿›è¡Œè‡ªåŠ¨è£…é…ã€‚ constructorï¼šç±»ä¼¼äºbyTypeï¼Œä¸è¿‡æ˜¯åº”ç”¨äºæ„é€ å™¨çš„å‚æ•°ï¼Œå¦‚æœæ­£å¥½æœ‰ä¸€ä¸ªBeanä¸æ„é€ å™¨çš„å‚æ•°ç±»å‹ç›¸åŒåˆ™å¯ä»¥è‡ªåŠ¨è£…é…ï¼Œå¦åˆ™ä¼šå¯¼è‡´é”™è¯¯ã€‚ autodetectï¼šå¦‚æœæœ‰é»˜è®¤çš„æ„é€ å™¨ï¼Œåˆ™é€šè¿‡constructorçš„æ–¹å¼è¿›è¡Œè‡ªåŠ¨è£…é…ï¼Œå¦åˆ™ä½¿ç”¨byTypeçš„æ–¹å¼è¿›è¡Œè‡ªåŠ¨è£…é…ã€‚  Springä¸­Beançš„ä½œç”¨åŸŸæœ‰å“ªäº›ï¼Ÿ åœ¨Springçš„æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œä»…æœ‰ä¸¤ä¸ªä½œç”¨åŸŸï¼šsingletonå’Œprototypeï¼Œå‰è€…è¡¨ç¤ºBeanä»¥å•ä¾‹çš„æ–¹å¼å­˜åœ¨ï¼›åè€…è¡¨ç¤ºæ¯æ¬¡ä»å®¹å™¨ä¸­è°ƒç”¨Beanæ—¶ï¼Œéƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œprototypeé€šå¸¸ç¿»è¯‘ä¸ºåŸå‹ã€‚\nè®¾è®¡æ¨¡å¼ä¸­çš„åˆ›å»ºå‹æ¨¡å¼ä¸­ä¹Ÿæœ‰ä¸€ä¸ªåŸå‹æ¨¡å¼ï¼ŒåŸå‹æ¨¡å¼ä¹Ÿæ˜¯ä¸€ä¸ªå¸¸ç”¨çš„æ¨¡å¼ï¼Œä¾‹å¦‚åšä¸€ä¸ªå®¤å†…è®¾è®¡è½¯ä»¶ï¼Œæ‰€æœ‰çš„ç´ æéƒ½åœ¨å·¥å…·ç®±ä¸­ï¼Œè€Œæ¯æ¬¡ä»å·¥å…·ç®±ä¸­å–å‡ºçš„éƒ½æ˜¯ç´ æå¯¹è±¡çš„ä¸€ä¸ªåŸå‹ï¼Œå¯ä»¥é€šè¿‡å¯¹è±¡å…‹éš†æ¥å®ç°åŸå‹æ¨¡å¼ã€‚Spring 2.xä¸­é’ˆå¯¹WebApplicationContextæ–°å¢äº†3ä¸ªä½œç”¨åŸŸï¼Œåˆ†åˆ«æ˜¯ï¼šrequestï¼ˆæ¯æ¬¡HTTPè¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Beanï¼‰ã€sessionï¼ˆåŒä¸€ä¸ªHttpSessionå…±äº«åŒä¸€ä¸ªBeanï¼Œä¸åŒçš„HttpSessionä½¿ç”¨ä¸åŒçš„Beanï¼‰å’ŒglobalSessionï¼ˆåŒä¸€ä¸ªå…¨å±€Sessionå…±äº«ä¸€ä¸ªBeanï¼‰ã€‚\nå•ä¾‹æ¨¡å¼å’ŒåŸå‹æ¨¡å¼éƒ½æ˜¯é‡è¦çš„è®¾è®¡æ¨¡å¼ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ— çŠ¶æ€æˆ–çŠ¶æ€ä¸å¯å˜çš„ç±»é€‚åˆä½¿ç”¨å•ä¾‹æ¨¡å¼ã€‚åœ¨ä¼ ç»Ÿå¼€å‘ä¸­ï¼Œç”±äºDAOæŒæœ‰Connectionè¿™ä¸ªéçº¿ç¨‹å®‰å…¨å¯¹è±¡å› è€Œæ²¡æœ‰ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼›ä½†åœ¨Springç¯å¢ƒä¸‹ï¼Œæ‰€æœ‰DAOç±»å¯¹å¯ä»¥é‡‡ç”¨å•ä¾‹æ¨¡å¼ï¼Œå› ä¸ºSpringåˆ©ç”¨AOPå’ŒJava APIä¸­çš„ThreadLocalå¯¹éçº¿ç¨‹å®‰å…¨çš„å¯¹è±¡è¿›è¡Œäº†ç‰¹æ®Šå¤„ç†ã€‚\nè¯·é—®ä»€ä¹ˆæ˜¯IoCå’ŒDIï¼Ÿ   æ§åˆ¶æŒ‡çš„æ˜¯ï¼šå½“å‰å¯¹è±¡å¯¹å†…éƒ¨æˆå‘˜çš„æ§åˆ¶æƒã€‚\n  åè½¬æŒ‡çš„æ˜¯ï¼šè¿™ç§æ§åˆ¶æƒä¸ç”±å½“å‰å¯¹è±¡ç®¡ç†äº†ï¼Œç”±å…¶ä»–(ç±»,ç¬¬ä¸‰æ–¹å®¹å™¨)æ¥ç®¡ç†\n  IOCä¸å¤Ÿå¼€é—¨è§å±±ï¼Œäºæ˜¯Martin Fowleræå‡ºäº†DI(dependency injection)æ¥æ›¿ä»£IoCï¼Œå³è®©è°ƒç”¨ç±»å¯¹æŸä¸€æ¥å£å®ç°ç±»çš„ä¾èµ–å…³ç³»ç”±ç¬¬ä¸‰æ–¹(å®¹å™¨æˆ–åä½œç±»)æ³¨å…¥ï¼Œä»¥ç§»é™¤è°ƒç”¨ç±»å¯¹æŸä¸€æ¥å£å®ç°ç±»çš„ä¾èµ–ã€‚\n  ä¸¤è€…çš„åŒºåˆ«ï¼š\n IoC(æ€æƒ³ï¼Œè®¾è®¡æ¨¡å¼)ä¸»è¦çš„å®ç°æ–¹å¼æœ‰ä¸¤ç§ï¼šä¾èµ–æŸ¥æ‰¾ï¼Œä¾èµ–æ³¨å…¥ã€‚ ä¾èµ–æ³¨å…¥æ˜¯ä¸€ç§æ›´å¯å–çš„æ–¹å¼(å®ç°çš„æ–¹å¼)    ä½¿ç”¨IOCçš„å¥½å¤„(çŸ¥ä¹@Intopassçš„å›ç­”)ï¼š\n  ä¸ç”¨è‡ªå·±ç»„è£…ï¼Œæ‹¿æ¥å°±ç”¨ã€‚\n  äº«å—å•ä¾‹çš„å¥½å¤„ï¼Œæ•ˆç‡é«˜ï¼Œä¸æµªè´¹ç©ºé—´ã€‚\n  ä¾¿äºå•å…ƒæµ‹è¯•ï¼Œæ–¹ä¾¿åˆ‡æ¢mockç»„ä»¶ã€‚\n  ä¾¿äºè¿›è¡ŒAOPæ“ä½œï¼Œå¯¹äºä½¿ç”¨è€…æ˜¯é€æ˜çš„ã€‚\n  ç»Ÿä¸€é…ç½®ï¼Œä¾¿äºä¿®æ”¹ã€‚\n    IoCå«æ§åˆ¶åè½¬ï¼Œæ˜¯Inversion of Controlçš„ç¼©å†™ï¼ŒDIï¼ˆDependency Injectionï¼‰å«ä¾èµ–æ³¨å…¥ï¼Œæ˜¯å¯¹IoCæ›´ç®€å•çš„è¯ é‡Šã€‚æ§åˆ¶åè½¬æ˜¯æŠŠä¼ ç»Ÿä¸Šç”±ç¨‹åºä»£ç ç›´æ¥æ“æ§çš„å¯¹è±¡çš„è°ƒç”¨æƒäº¤ç»™å®¹å™¨ï¼Œé€šè¿‡å®¹å™¨æ¥å®ç°å¯¹è±¡ç»„ä»¶çš„è£…é…å’Œç®¡ç†ã€‚æ‰€è°“çš„\u0026quot;æ§åˆ¶åè½¬\u0026quot;å°±æ˜¯å¯¹ç»„ä»¶å¯¹è±¡æ§åˆ¶æƒçš„è½¬ç§»ï¼Œä»ç¨‹åºä»£ç æœ¬èº«è½¬ç§»åˆ°äº†å¤–éƒ¨å®¹å™¨ï¼Œç”±å®¹å™¨æ¥åˆ›å»ºå¯¹è±¡å¹¶ç®¡ç†å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚IoCä½“ç°äº†å¥½è±ååŸåˆ™ - \u0026ldquo;Donâ€™t call me, we will call you\u0026rdquo;ã€‚ä¾èµ–æ³¨å…¥çš„åŸºæœ¬åŸåˆ™æ˜¯åº”ç”¨ç»„ä»¶ä¸åº”è¯¥è´Ÿè´£æŸ¥æ‰¾èµ„æºæˆ–è€…å…¶ä»–ä¾èµ–çš„åä½œå¯¹è±¡ã€‚é…ç½®å¯¹è±¡çš„å·¥ä½œåº”è¯¥ç”±å®¹å™¨è´Ÿè´£ï¼ŒæŸ¥æ‰¾èµ„æºçš„é€»è¾‘åº”è¯¥ä»åº”ç”¨ç»„ä»¶çš„ä»£ç ä¸­æŠ½å–å‡ºæ¥ï¼Œäº¤ç»™å®¹å™¨æ¥å®Œæˆã€‚DIæ˜¯å¯¹IoCæ›´å‡†ç¡®çš„æè¿°ï¼Œå³ç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»ç”±å®¹å™¨åœ¨è¿è¡ŒæœŸå†³å®šï¼Œå½¢è±¡çš„æ¥è¯´ï¼Œå³ç”±å®¹å™¨åŠ¨æ€çš„å°†æŸç§ä¾èµ–å…³ç³»æ³¨å…¥åˆ°ç»„ä»¶ä¹‹ä¸­ã€‚\nä¸€ä¸ªç±»Aéœ€è¦ç”¨åˆ°æ¥å£Bä¸­çš„æ–¹æ³•ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸ºç±»Aå’Œæ¥å£Bå»ºç«‹å…³è”æˆ–ä¾èµ–å…³ç³»ï¼Œæœ€åŸå§‹çš„æ–¹æ³•æ˜¯åœ¨ç±»Aä¸­åˆ›å»ºä¸€ä¸ªæ¥å£Bçš„å®ç°ç±»Cçš„å®ä¾‹ï¼Œä½†è¿™ç§æ–¹æ³•éœ€è¦å¼€å‘äººå‘˜è‡ªè¡Œç»´æŠ¤äºŒè€…çš„ä¾èµ–å…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´å½“ä¾èµ–å…³ç³»å‘ç”Ÿå˜åŠ¨çš„æ—¶å€™éœ€è¦ä¿®æ”¹ä»£ç å¹¶é‡æ–°æ„å»ºæ•´ä¸ªç³»ç»Ÿã€‚å¦‚æœé€šè¿‡ä¸€ä¸ªå®¹å™¨æ¥ç®¡ç†è¿™äº›å¯¹è±¡ä»¥åŠå¯¹è±¡çš„ä¾èµ–å…³ç³»ï¼Œåˆ™åªéœ€è¦åœ¨ç±»Aä¸­å®šä¹‰å¥½ç”¨äºå…³è”æ¥å£Bçš„æ–¹æ³•ï¼ˆæ„é€ å™¨æˆ–setteræ–¹æ³•ï¼‰ï¼Œå°†ç±»Aå’Œæ¥å£Bçš„å®ç°ç±»Cæ”¾å…¥å®¹å™¨ä¸­ï¼Œé€šè¿‡å¯¹å®¹å™¨çš„é…ç½®æ¥å®ç°äºŒè€…çš„å…³è”ã€‚\nä¾èµ–æ³¨å…¥å¯ä»¥é€šè¿‡setteræ–¹æ³•æ³¨å…¥ï¼ˆè®¾å€¼æ³¨å…¥ï¼‰ã€æ„é€ å™¨æ³¨å…¥å’Œæ¥å£æ³¨å…¥ä¸‰ç§æ–¹å¼æ¥å®ç°ï¼ŒSpringæ”¯æŒsetteræ³¨å…¥å’Œæ„é€ å™¨æ³¨å…¥ï¼Œé€šå¸¸ä½¿ç”¨æ„é€ å™¨æ³¨å…¥æ¥æ³¨å…¥å¿…é¡»çš„ä¾èµ–å…³ç³»ï¼Œå¯¹äºå¯é€‰çš„ä¾èµ–å…³ç³»ï¼Œåˆ™setteræ³¨å…¥æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œsetteræ³¨å…¥éœ€è¦ç±»æä¾›\nSpringä¸­BeanFactoryå’ŒApplicationContextçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ BeanFactoryï¼š\nBeanFactoryæ˜¯springä¸­æ¯”è¾ƒåŸå§‹ï¼Œæ¯”è¾ƒå¤è€çš„Factoryã€‚å› ä¸ºæ¯”è¾ƒå¤è€ï¼Œæ‰€ä»¥BeanFactoryæ— æ³•æ”¯æŒspringæ’ä»¶ï¼Œä¾‹å¦‚ï¼šAOPã€Webåº”ç”¨ç­‰åŠŸèƒ½ã€‚\nApplicationContext\nApplicationContextæ˜¯BeanFactoryçš„å­ç±»ï¼Œå› ä¸ºå¤è€çš„BeanFactoryæ— æ³•æ»¡è¶³ä¸æ–­æ›´æ–°çš„springçš„éœ€æ±‚ï¼Œäºæ˜¯ApplicationContextå°±åŸºæœ¬ä¸Šä»£æ›¿äº†BeanFactoryçš„å·¥ä½œï¼Œä»¥ä¸€ç§æ›´é¢å‘æ¡†æ¶çš„å·¥ä½œæ–¹å¼ä»¥åŠå¯¹ä¸Šä¸‹æ–‡è¿›è¡Œåˆ†å±‚å’Œå®ç°ç»§æ‰¿ï¼Œå¹¶åœ¨è¿™ä¸ªåŸºç¡€ä¸Šå¯¹åŠŸèƒ½è¿›è¡Œæ‰©å±•ï¼š\n\u0026lt;1\u0026gt;MessageSource, æä¾›å›½é™…åŒ–çš„æ¶ˆæ¯è®¿é—®\n\u0026lt;2\u0026gt;èµ„æºè®¿é—®ï¼ˆå¦‚URLå’Œæ–‡ä»¶ï¼‰\n\u0026lt;3\u0026gt;äº‹ä»¶ä¼ é€’\n\u0026lt;4\u0026gt;Beançš„è‡ªåŠ¨è£…é…\n\u0026lt;5\u0026gt;å„ç§ä¸åŒåº”ç”¨å±‚çš„Contextå®ç°\nåŒºåˆ«ï¼š\n\u0026lt;1\u0026gt;å¦‚æœä½¿ç”¨ApplicationContextï¼Œå¦‚æœé…ç½®çš„beanæ˜¯singletonï¼Œé‚£ä¹ˆä¸ç®¡ä½ æœ‰æ²¡æœ‰æˆ–æƒ³ä¸æƒ³ç”¨å®ƒï¼Œå®ƒéƒ½ä¼šè¢«å®ä¾‹åŒ–ã€‚å¥½å¤„æ˜¯å¯ä»¥é¢„å…ˆåŠ è½½ï¼Œåå¤„æ˜¯æµªè´¹å†…å­˜ã€‚\n\u0026lt;2\u0026gt;BeanFactoryï¼Œå½“ä½¿ç”¨BeanFactoryå®ä¾‹åŒ–å¯¹è±¡æ—¶ï¼Œé…ç½®çš„beanä¸ä¼šé©¬ä¸Šè¢«å®ä¾‹åŒ–ï¼Œè€Œæ˜¯ç­‰åˆ°ä½ ä½¿ç”¨è¯¥beançš„æ—¶å€™ï¼ˆgetBeanï¼‰æ‰ä¼šè¢«å®ä¾‹åŒ–ã€‚å¥½å¤„æ˜¯èŠ‚çº¦å†…å­˜ï¼Œåå¤„æ˜¯é€Ÿåº¦æ¯”è¾ƒæ…¢ã€‚å¤šç”¨äºç§»åŠ¨è®¾å¤‡çš„å¼€å‘ã€‚\n\u0026lt;3\u0026gt;æ²¡æœ‰ç‰¹æ®Šè¦æ±‚çš„æƒ…å†µä¸‹ï¼Œåº”è¯¥ä½¿ç”¨ApplicationContextå®Œæˆã€‚å› ä¸ºBeanFactoryèƒ½å®Œæˆçš„äº‹æƒ…ï¼ŒApplicationContextéƒ½èƒ½å®Œæˆï¼Œå¹¶ä¸”æä¾›äº†æ›´å¤šæ¥è¿‘ç°åœ¨å¼€å‘çš„åŠŸèƒ½ã€‚\nApplicationContextï¼šåªè¦ä¸€è¯»å–é…ç½®æ–‡ä»¶ï¼Œé»˜è®¤æƒ…å†µä¸‹å°±ä¼šåˆ›å»ºå¯¹è±¡ã€‚ BeanFactoryï¼šä»€ä¹ˆä½¿ç”¨ä»€ä¹ˆæ—¶å€™åˆ›å»ºå¯¹è±¡ã€‚\nspringIOCåŸç†æ˜¯ä»€ä¹ˆï¼Ÿå¦‚æœä½ è¦å®ç°IOCéœ€è¦æ€ä¹ˆåšï¼Ÿè¯·ç®€å•æè¿°ä¸€ä¸‹å®ç°æ­¥éª¤ï¼Ÿ â€¢ åŸç†å°±æ˜¯é€šè¿‡Javaçš„åå°„æŠ€æœ¯æ¥å®ç°çš„ï¼é€šè¿‡åå°„æˆ‘ä»¬å¯ä»¥è·å–ç±»çš„æ‰€æœ‰ä¿¡æ¯(æˆå‘˜å˜é‡ã€ç±»åç­‰ç­‰ç­‰)ï¼\nâ€¢ å†é€šè¿‡é…ç½®æ–‡ä»¶(xml)æˆ–è€…æ³¨è§£æ¥æè¿°ç±»ä¸ç±»ä¹‹é—´çš„å…³ç³»\nâ€¢ æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¿™äº›é…ç½®ä¿¡æ¯å’Œåå°„æŠ€æœ¯æ¥æ„å»ºå‡ºå¯¹åº”çš„å¯¹è±¡å’Œä¾èµ–å…³ç³»äº†ï¼\nâ‘ IoCï¼ˆInversion of Controlï¼Œæ§åˆ¶å€’è½¬ï¼‰ã€‚è¿™æ˜¯springçš„æ ¸å¿ƒï¼Œè´¯ç©¿å§‹ç»ˆã€‚æ‰€è°“IoCï¼Œå¯¹äºspringæ¡†æ¶æ¥è¯´ï¼Œå°±æ˜¯ç”±springæ¥è´Ÿè´£æ§åˆ¶å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œå¯¹è±¡é—´çš„å…³ç³»ã€‚\nIoCçš„ä¸€ä¸ªé‡ç‚¹æ˜¯åœ¨ç³»ç»Ÿè¿è¡Œä¸­ï¼ŒåŠ¨æ€çš„å‘æŸä¸ªå¯¹è±¡æä¾›å®ƒæ‰€éœ€è¦çš„å…¶ä»–å¯¹è±¡ã€‚è¿™ä¸€ç‚¹æ˜¯é€šè¿‡DIï¼ˆDependency Injectionï¼Œä¾èµ–æ³¨å…¥ï¼‰æ¥å®ç°çš„ã€‚æ¯”å¦‚å¯¹è±¡Aéœ€è¦æ“ä½œæ•°æ®åº“ï¼Œä»¥å‰æˆ‘ä»¬æ€»æ˜¯è¦åœ¨Aä¸­è‡ªå·±ç¼–å†™ä»£ç æ¥è·å¾—ä¸€ä¸ªConnectionå¯¹è±¡ï¼Œæœ‰äº† springæˆ‘ä»¬å°±åªéœ€è¦å‘Šè¯‰springï¼ŒAä¸­éœ€è¦ä¸€ä¸ªConnectionï¼Œè‡³äºè¿™ä¸ªConnectionæ€ä¹ˆæ„é€ ï¼Œä½•æ—¶æ„é€ ï¼ŒAä¸éœ€è¦çŸ¥é“ã€‚åœ¨ç³»ç»Ÿè¿è¡Œæ—¶ï¼Œspringä¼šåœ¨é€‚å½“çš„æ—¶å€™åˆ¶é€ ä¸€ä¸ªConnectionï¼Œç„¶ååƒæ‰“é’ˆä¸€æ ·ï¼Œæ³¨å°„åˆ°Aå½“ä¸­ï¼Œè¿™æ ·å°±å®Œæˆäº†å¯¹å„ä¸ªå¯¹è±¡ä¹‹é—´å…³ç³»çš„æ§åˆ¶ã€‚Aéœ€è¦ä¾èµ– Connectionæ‰èƒ½æ­£å¸¸è¿è¡Œï¼Œè€Œè¿™ä¸ªConnectionæ˜¯ç”±springæ³¨å…¥åˆ°Aä¸­çš„ï¼Œä¾èµ–æ³¨å…¥çš„åå­—å°±è¿™ä¹ˆæ¥çš„ã€‚é‚£ä¹ˆDIæ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ Java 1.3ä¹‹åä¸€ä¸ªé‡è¦ç‰¹å¾æ˜¯åå°„ï¼ˆreflectionï¼‰ï¼Œå®ƒå…è®¸ç¨‹åºåœ¨è¿è¡Œçš„æ—¶å€™åŠ¨æ€çš„ç”Ÿæˆå¯¹è±¡ã€æ‰§è¡Œå¯¹è±¡çš„æ–¹æ³•ã€æ”¹å˜å¯¹è±¡çš„å±æ€§ï¼Œspringå°±æ˜¯é€šè¿‡åå°„æ¥å®ç°æ³¨å…¥çš„ã€‚\nä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œæˆ‘ä»¬æ‰¾å¥³æœ‹å‹å¸¸è§çš„æƒ…å†µæ˜¯ï¼Œæˆ‘ä»¬åˆ°å¤„å»çœ‹å“ªé‡Œæœ‰é•¿å¾—æ¼‚äº®èº«æåˆå¥½çš„å¥³å­©å­ï¼Œç„¶åæ‰“å¬å¥¹ä»¬çš„å…´è¶£çˆ±å¥½ã€qqå·ã€ç”µè¯å·ã€ipå·ã€iqå·â€¦â€¦â€¦ï¼Œæƒ³åŠæ³•è®¤è¯†å¥¹ä»¬ï¼ŒæŠ•å…¶æ‰€å¥½é€å…¶æ‰€è¦ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å¤æ‚æ·±å¥¥çš„ï¼Œæˆ‘ä»¬å¿…é¡»è‡ªå·±è®¾è®¡å’Œé¢å¯¹æ¯ä¸ªç¯èŠ‚ã€‚ä¼ ç»Ÿçš„ç¨‹åºå¼€å‘ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œåœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œå¦‚æœè¦ä½¿ç”¨å¦å¤–çš„å¯¹è±¡ï¼Œå°±å¿…é¡»å¾—åˆ°å®ƒï¼ˆè‡ªå·±newä¸€ä¸ªï¼Œæˆ–è€…ä»JNDIä¸­æŸ¥è¯¢ä¸€ä¸ªï¼‰ï¼Œä½¿ç”¨å®Œä¹‹åè¿˜è¦å°†å¯¹è±¡é”€æ¯ï¼ˆæ¯”å¦‚Connectionç­‰ï¼‰ï¼Œå¯¹è±¡å§‹ç»ˆä¼šå’Œå…¶ä»–çš„æ¥å£æˆ–ç±»è—•åˆèµ·æ¥ã€‚\nâ‘¡å®ç°IOCçš„æ­¥éª¤\nå®šä¹‰ç”¨æ¥æè¿°beançš„é…ç½®çš„Javaç±»\nè§£æbeançš„é…ç½®ï¼Œå°‡beançš„é…ç½®ä¿¡æ¯è½¬æ¢ä¸ºä¸Šé¢çš„BeanDefinitionå¯¹è±¡ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œspringä¸­é‡‡ç”¨HashMapè¿›è¡Œå¯¹è±¡å­˜å‚¨ï¼Œå…¶ä¸­ä¼šç”¨åˆ°ä¸€äº›xmlè§£ææŠ€æœ¯\néå†å­˜æ”¾BeanDefinitionçš„HashMapå¯¹è±¡ï¼Œé€æ¡å–å‡ºBeanDefinitionå¯¹è±¡ï¼Œè·å–beançš„é…ç½®ä¿¡æ¯ï¼Œåˆ©ç”¨Javaçš„åå°„æœºåˆ¶å®ä¾‹åŒ–å¯¹è±¡ï¼Œå°‡å®ä¾‹åŒ–åçš„å¯¹è±¡ä¿å­˜åœ¨å¦å¤–ä¸€ä¸ªMapä¸­å³å¯ã€‚\nä¾èµ–æ³¨å…¥çš„æ–¹å¼æœ‰å“ªå‡ ç§ï¼Ÿä»¥åŠè¿™äº›æ–¹æ³•å¦‚ä½•ä½¿ç”¨ï¼Ÿ  https://blog.csdn.net/icarus_wang/article/details/51588284\n 1ã€Setæ³¨å…¥ 2ã€æ„é€ å™¨æ³¨å…¥ 3ã€æ¥å£æ³¨å…¥\n@Controllerå’Œ@RestControllerçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ @RestControlleræ³¨è§£ç›¸å½“äº@ResponseBody ï¼‹ @Controlleråˆåœ¨ä¸€èµ·çš„ä½œç”¨\nè¯·è°ˆä¸€ä¸‹autowired å’ŒresourceåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ 1ã€å…±åŒç‚¹\nä¸¤è€…éƒ½å¯ä»¥å†™åœ¨å­—æ®µå’Œsetteræ–¹æ³•ä¸Šã€‚ä¸¤è€…å¦‚æœéƒ½å†™åœ¨å­—æ®µä¸Šï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦å†å†™setteræ–¹æ³•ã€‚\n2ã€ä¸åŒç‚¹\nï¼ˆ1ï¼‰@Autowired\n@Autowiredä¸ºSpringæä¾›çš„æ³¨è§£ï¼Œéœ€è¦å¯¼å…¥åŒ…org.springframework.beans.factory.annotation.Autowired;åªæŒ‰ç…§byTypeæ³¨å…¥ã€‚\n@Autowiredæ³¨è§£æ˜¯æŒ‰ç…§ç±»å‹ï¼ˆbyTypeï¼‰è£…é…ä¾èµ–å¯¹è±¡ï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒè¦æ±‚ä¾èµ–å¯¹è±¡å¿…é¡»å­˜åœ¨ï¼Œå¦‚æœå…è®¸nullå€¼ï¼Œå¯ä»¥è®¾ç½®å®ƒçš„requiredå±æ€§ä¸ºfalseã€‚å¦‚æœæˆ‘ä»¬æƒ³ä½¿ç”¨æŒ‰ç…§åç§°ï¼ˆbyNameï¼‰æ¥è£…é…ï¼Œå¯ä»¥ç»“åˆ@Qualifieræ³¨è§£ä¸€èµ·ä½¿ç”¨ã€‚\nï¼ˆ2ï¼‰@Resource\n@Resourceé»˜è®¤æŒ‰ç…§ByNameè‡ªåŠ¨æ³¨å…¥ï¼Œç”±J2EEæä¾›ï¼Œéœ€è¦å¯¼å…¥åŒ…javax.annotation.Resourceã€‚@Resourceæœ‰ä¸¤ä¸ªé‡è¦çš„å±æ€§ï¼šnameå’Œtypeï¼Œè€ŒSpringå°†@Resourceæ³¨è§£çš„nameå±æ€§è§£æä¸ºbeançš„åå­—ï¼Œè€Œtypeå±æ€§åˆ™è§£æä¸ºbeançš„ç±»å‹ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½¿ç”¨nameå±æ€§ï¼Œåˆ™ä½¿ç”¨byNameçš„è‡ªåŠ¨æ³¨å…¥ç­–ç•¥ï¼Œè€Œä½¿ç”¨typeå±æ€§æ—¶åˆ™ä½¿ç”¨byTypeè‡ªåŠ¨æ³¨å…¥ç­–ç•¥ã€‚å¦‚æœæ—¢ä¸åˆ¶å®šnameä¹Ÿä¸åˆ¶å®štypeå±æ€§ï¼Œè¿™æ—¶å°†é€šè¿‡åå°„æœºåˆ¶ä½¿ç”¨byNameè‡ªåŠ¨æ³¨å…¥ç­–ç•¥ã€‚\nbeançš„ç”Ÿå‘½å‘¨æœŸ  https://www.zhihu.com/question/38597960\nhttps://crossoverjie.top/2018/03/21/spring/spring-bean-lifecycle/\n  å•ä¾‹å¯¹è±¡ï¼šscope=\u0026quot;singleton\u0026rdquo; ä¸€ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹ã€‚å®ƒçš„ä½œç”¨èŒƒå›´å°±æ˜¯æ•´ä¸ªå¼•ç”¨ã€‚ ç”Ÿå‘½å‘¨æœŸï¼š å¯¹è±¡å‡ºç”Ÿï¼šå½“åº”ç”¨åŠ è½½ï¼Œåˆ›å»ºå®¹å™¨æ—¶ï¼Œå¯¹è±¡å°±è¢«åˆ›å»ºäº†ã€‚ å¯¹è±¡æ´»ç€ï¼šåªè¦å®¹å™¨åœ¨ï¼Œå¯¹è±¡ä¸€ç›´æ´»ç€ã€‚ å¯¹è±¡æ­»äº¡ï¼šå½“åº”ç”¨å¸è½½ï¼Œé”€æ¯å®¹å™¨æ—¶ï¼Œå¯¹è±¡å°±è¢«é”€æ¯äº†ã€‚ å¤šä¾‹å¯¹è±¡ï¼šscope=\u0026quot;prototype\u0026rdquo; æ¯æ¬¡è®¿é—®å¯¹è±¡æ—¶ï¼Œéƒ½ä¼šé‡æ–°åˆ›å»ºå¯¹è±¡å®ä¾‹ã€‚ ç”Ÿå‘½å‘¨æœŸï¼š å¯¹è±¡å‡ºç”Ÿï¼šå½“ä½¿ç”¨å¯¹è±¡æ—¶ï¼Œåˆ›å»ºæ–°çš„å¯¹è±¡å®ä¾‹ã€‚ å¯¹è±¡æ´»ç€ï¼šåªè¦å¯¹è±¡åœ¨ä½¿ç”¨ä¸­ï¼Œå°±ä¸€ç›´æ´»ç€ã€‚ å¯¹è±¡æ­»äº¡ï¼šå½“å¯¹è±¡é•¿æ—¶é—´ä¸ç”¨æ—¶ï¼Œè¢« java çš„åƒåœ¾å›æ”¶å™¨å›æ”¶äº†ã€‚  ä½œè€…ï¼šMOBIN-F\né“¾æ¥ï¼šhttps://www.zhihu.com/question/38597960/answer/77600561\næ¥æºï¼šçŸ¥ä¹\nè‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\n1.Springå¯¹Beanè¿›è¡Œå®ä¾‹åŒ–ï¼ˆç›¸å½“äºç¨‹åºä¸­çš„new Xx()ï¼‰\n2.Springå°†å€¼å’ŒBeançš„å¼•ç”¨æ³¨å…¥è¿›Beanå¯¹åº”çš„å±æ€§ä¸­\n3.å¦‚æœBeanå®ç°äº†BeanNameAwareæ¥å£ï¼ŒSpringå°†Beançš„IDä¼ é€’ç»™setBeanName()æ–¹æ³•\nï¼ˆå®ç°BeanNameAwareæ¸…ä¸»è¦æ˜¯ä¸ºäº†é€šè¿‡Beançš„å¼•ç”¨æ¥è·å¾—Beançš„IDï¼Œä¸€èˆ¬ä¸šåŠ¡ä¸­æ˜¯å¾ˆå°‘æœ‰ç”¨åˆ°Beançš„IDçš„ï¼‰\n4.å¦‚æœBeanå®ç°äº†BeanFactoryAwareæ¥å£ï¼ŒSpringå°†è°ƒç”¨setBeanDactory(BeanFactory bf)æ–¹æ³•å¹¶æŠŠBeanFactoryå®¹å™¨å®ä¾‹ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚\nï¼ˆå®ç°BeanFactoryAware ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†è·å–Springå®¹å™¨ï¼Œå¦‚Beané€šè¿‡Springå®¹å™¨å‘å¸ƒäº‹ä»¶ç­‰ï¼‰\n5.å¦‚æœBeanå®ç°äº†ApplicationContextAwaeræ¥å£ï¼ŒSpringå®¹å™¨å°†è°ƒç”¨setApplicationContext(ApplicationContext ctx)æ–¹æ³•ï¼ŒæŠŠyåº”ç”¨ä¸Šä¸‹æ–‡ä½œä¸ºå‚æ•°ä¼ å…¥.\n(ä½œç”¨ä¸BeanFactoryç±»ä¼¼éƒ½æ˜¯ä¸ºäº†è·å–Springå®¹å™¨ï¼Œä¸åŒçš„æ˜¯Springå®¹å™¨åœ¨è°ƒç”¨setApplicationContextæ–¹æ³•æ—¶ä¼šæŠŠå®ƒè‡ªå·±ä½œä¸ºsetApplicationContext çš„å‚æ•°ä¼ å…¥ï¼Œè€ŒSpringå®¹å™¨åœ¨è°ƒç”¨setBeanDactoryå‰éœ€è¦ç¨‹åºå‘˜è‡ªå·±æŒ‡å®šï¼ˆæ³¨å…¥ï¼‰setBeanDactoryé‡Œçš„å‚æ•°BeanFactory )\n6.å¦‚æœBeanå®ç°äº†BeanPostProcessæ¥å£ï¼ŒSpringå°†è°ƒç”¨å®ƒä»¬çš„postProcessBeforeInitializationï¼ˆé¢„åˆå§‹åŒ–ï¼‰æ–¹æ³•\nï¼ˆä½œç”¨æ˜¯åœ¨Beanå®ä¾‹åˆ›å»ºæˆåŠŸåå¯¹è¿›è¡Œå¢å¼ºå¤„ç†ï¼Œå¦‚å¯¹Beanè¿›è¡Œä¿®æ”¹ï¼Œå¢åŠ æŸä¸ªåŠŸèƒ½ï¼‰\n7.å¦‚æœBeanå®ç°äº†InitializingBeanæ¥å£ï¼ŒSpringå°†è°ƒç”¨å®ƒä»¬çš„afterPropertiesSetæ–¹æ³•ï¼Œä½œç”¨ä¸åœ¨é…ç½®æ–‡ä»¶ä¸­å¯¹Beanä½¿ç”¨init-methodå£°æ˜åˆå§‹åŒ–çš„ä½œç”¨ä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨Beançš„å…¨éƒ¨å±æ€§è®¾ç½®æˆåŠŸåæ‰§è¡Œçš„åˆå§‹åŒ–æ–¹æ³•ã€‚\n8.å¦‚æœBeanå®ç°äº†BeanPostProcessæ¥å£ï¼ŒSpringå°†è°ƒç”¨å®ƒä»¬çš„postProcessAfterInitializationï¼ˆååˆå§‹åŒ–ï¼‰æ–¹æ³•\nï¼ˆä½œç”¨ä¸6çš„ä¸€æ ·ï¼Œåªä¸è¿‡6æ˜¯åœ¨Beanåˆå§‹åŒ–å‰æ‰§è¡Œçš„ï¼Œè€Œè¿™ä¸ªæ˜¯åœ¨Beanåˆå§‹åŒ–åæ‰§è¡Œçš„ï¼Œæ—¶æœºä¸åŒ )\n9.ç»è¿‡ä»¥ä¸Šçš„å·¥ä½œåï¼ŒBeanå°†ä¸€ç›´é©»ç•™åœ¨åº”ç”¨ä¸Šä¸‹æ–‡ä¸­ç»™åº”ç”¨ä½¿ç”¨ï¼Œç›´åˆ°åº”ç”¨ä¸Šä¸‹æ–‡è¢«é”€æ¯\n10.å¦‚æœBeanå®ç°äº†DispostbleBeanæ¥å£ï¼ŒSpringå°†è°ƒç”¨å®ƒçš„destoryæ–¹æ³•ï¼Œä½œç”¨ä¸åœ¨é…ç½®æ–‡ä»¶ä¸­å¯¹Beanä½¿ç”¨destory-methodå±æ€§çš„ä½œç”¨ä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨Beanå®ä¾‹é”€æ¯å‰æ‰§è¡Œçš„æ–¹æ³•ã€‚\nä½œè€…ï¼šYoung Wang\né“¾æ¥ï¼šhttps://www.zhihu.com/question/38597960/answer/1063970966\næ¥æºï¼šçŸ¥ä¹\nè‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\na.å®ä¾‹åŒ–Bean\nå®¹å™¨é€šè¿‡è·å–BeanDefinitionå¯¹è±¡ä¸­çš„ä¿¡æ¯è¿›è¡Œå®ä¾‹åŒ–ã€‚å¹¶ä¸”è¿™ä¸€æ­¥ä»…ä»…æ˜¯ç®€å•çš„å®ä¾‹åŒ–ï¼Œå¹¶æœªè¿›è¡Œä¾èµ–æ³¨å…¥ã€‚\n å¯¹äºBeanFactoryå®¹å™¨ï¼Œå½“å®¢æˆ·å‘å®¹å™¨è¯·æ±‚ä¸€ä¸ªå°šæœªåˆå§‹åŒ–çš„beanæ—¶ï¼Œæˆ–åˆå§‹åŒ–beançš„æ—¶å€™éœ€è¦æ³¨å…¥å¦ä¸€ä¸ªå°šæœªåˆå§‹åŒ–çš„ä¾èµ–æ—¶ï¼Œå®¹å™¨å°±ä¼šè°ƒç”¨createBeanè¿›è¡Œå®ä¾‹åŒ–ã€‚ å¯¹äºApplicationContextå®¹å™¨ï¼Œå½“å®¹å™¨å¯åŠ¨ç»“æŸåï¼Œä¾¿å®ä¾‹åŒ–æ‰€æœ‰çš„beanã€‚  å®ä¾‹åŒ–å¯¹è±¡è¢«åŒ…è£…åœ¨BeanWrapperå¯¹è±¡ä¸­ï¼ˆå¯ä»¥è®¤ä¸ºæ˜¯Beançš„åŸç”Ÿæ€ï¼‰ï¼ŒBeanWrapperæä¾›äº†è®¾ç½®å¯¹è±¡å±æ€§çš„æ¥å£ï¼Œé¿å…äº†ä½¿ç”¨åå°„æœºåˆ¶è®¾ç½®å±æ€§ã€‚\nè¿™é‡Œæåˆ°äº†4ä¸ªç»„ä»¶ï¼šBeanFacotry\\ApplicationContext\\BeanDefinition\\BeanWrapper\nb.è®¾ç½®å¯¹è±¡å±æ€§ï¼ˆä¾èµ–æ³¨å…¥ï¼‰\nå®ä¾‹åŒ–åçš„å¯¹è±¡è¢«å°è£…åœ¨BeanWrapperå¯¹è±¡ä¸­ï¼Œå¹¶ä¸”æ­¤æ—¶å¯¹è±¡ä»ç„¶æ˜¯ä¸€ä¸ªåŸç”Ÿçš„çŠ¶æ€ï¼Œå¹¶æ²¡æœ‰è¿›è¡Œä¾èµ–æ³¨å…¥ã€‚\nç´§æ¥ç€ï¼ŒSpringæ ¹æ®BeanDefinitionä¸­çš„ä¿¡æ¯è¿›è¡Œä¾èµ–æ³¨å…¥ã€‚\nå¹¶ä¸”é€šè¿‡BeanWrapperæä¾›çš„è®¾ç½®å±æ€§çš„æ¥å£å®Œæˆä¾èµ–æ³¨å…¥ã€‚\nc.æ³¨å…¥Awareæ¥å£(ç»™beanå¢åŠ æŸç§èƒ½åŠ›ï¼Œç”³æ˜æ˜¯æŸç§ç‰¹æ®Šçš„bean)\nAwareæ¥å£ç”¨äºå¢å¼ºBeanèƒ½åŠ›\nå®¹å™¨éœ€æ£€æµ‹è¯¥å¯¹è±¡æ˜¯å¦å®ç°äº†xxxAwareæ¥å£ï¼Œå¹¶å°†ç›¸å…³çš„xxxAwareå®ä¾‹æ³¨å…¥ç»™beanã€‚\nå¸¸è§çš„Awareæ¥å£æœ‰ï¼šBeanNameAware\\BeanFactoryAware\\ApplicationContextAware\nè‡³æ­¤ï¼Œä¸€ä¸ªå¯¹è±¡å·²ç»è¢«æ­£ç¡®æ„é€ ã€‚\nd.1.BeanPostProcessor(è‡ªå®šä¹‰å¤„ç†ï¼Œæ»¡è¶³ç”¨æˆ·éœ€æ±‚)\nç»è¿‡ä¸Šè¿°å‡ ä¸ªæ­¥éª¤åï¼Œbeanå¯¹è±¡å·²ç»è¢«æ­£ç¡®æ„é€ ï¼Œä½†å¦‚æœä½ æƒ³è¦å¯¹è±¡è¢«ä½¿ç”¨å‰å†è¿›è¡Œä¸€äº›è‡ªå®šä¹‰çš„å¤„ç†ï¼Œå°±å¯ä»¥é€šè¿‡BeanPostProcessoræ¥å£å®ç°ã€‚\nè¯¥æ¥å£æä¾›äº†ä¸¤ä¸ªå‡½æ•°ï¼š\n postProcessBeforeInitialzation( Object bean, String beanName )  å½“å‰æ­£åœ¨åˆå§‹åŒ–çš„beanå¯¹è±¡ä¼šè¢«ä¼ é€’è¿›æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹è¿™ä¸ªbeanä½œä»»ä½•å¤„ç†ã€‚ è¿™ä¸ªå‡½æ•°ä¼šå…ˆäºInitialzationBeanæ‰§è¡Œï¼Œå› æ­¤ç§°ä¸ºå‰ç½®å¤„ç†ã€‚ æ‰€æœ‰Awareæ¥å£çš„æ³¨å…¥å°±æ˜¯åœ¨è¿™ä¸€æ­¥å®Œæˆçš„ã€‚\n postProcessAfterInitialzation( Object bean, String beanName )  å½“å‰æ­£åœ¨åˆå§‹åŒ–çš„beanå¯¹è±¡ä¼šè¢«ä¼ é€’è¿›æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹è¿™ä¸ªbeanä½œä»»ä½•å¤„ç†ã€‚ è¿™ä¸ªå‡½æ•°ä¼šåœ¨InitialzationBeanå®Œæˆåæ‰§è¡Œï¼Œå› æ­¤ç§°ä¸ºåç½®å¤„ç†ã€‚\nç»„ä»¶ï¼šBeanPostProcessor\nd.2.InitializingBeanä¸init-method\nå½“BeanPostProcessorçš„å‰ç½®å¤„ç†å®Œæˆåå°±ä¼šè¿›å…¥æœ¬é˜¶æ®µã€‚\nInitializingBeanæ¥å£åªæœ‰ä¸€ä¸ªå‡½æ•°ï¼š\n afterPropertiesSet()  è¿™ä¸€é˜¶æ®µä¹Ÿå¯ä»¥åœ¨beanæ­£å¼æ„é€ å®Œæˆå‰å¢åŠ æˆ‘ä»¬è‡ªå®šä¹‰çš„é€»è¾‘ï¼Œä½†å®ƒä¸å‰ç½®å¤„ç†ä¸åŒï¼Œç”±äºè¯¥å‡½æ•°å¹¶ä¸ä¼šæŠŠå½“å‰beanå¯¹è±¡ä¼ è¿›æ¥ï¼Œå› æ­¤åœ¨è¿™ä¸€æ­¥æ²¡åŠæ³•å¤„ç†å¯¹è±¡æœ¬èº«ï¼Œåªèƒ½å¢åŠ ä¸€äº›é¢å¤–çš„é€»è¾‘ã€‚\nè‹¥è¦ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬éœ€è¦è®©beanå®ç°è¯¥æ¥å£ï¼Œå¹¶æŠŠè¦å¢åŠ çš„é€»è¾‘å†™åœ¨è¯¥å‡½æ•°ä¸­ã€‚ç„¶åSpringä¼šåœ¨å‰ç½®å¤„ç†å®Œæˆåæ£€æµ‹å½“å‰beanæ˜¯å¦å®ç°äº†è¯¥æ¥å£ï¼Œå¹¶æ‰§è¡ŒafterPropertiesSetå‡½æ•°ã€‚\nå½“ç„¶ï¼ŒSpringä¸ºäº†é™ä½å¯¹å®¢æˆ·ä»£ç çš„ä¾µå…¥æ€§ï¼Œç»™beançš„é…ç½®æä¾›äº†init-methodå±æ€§ï¼Œè¯¥å±æ€§æŒ‡å®šäº†åœ¨è¿™ä¸€é˜¶æ®µéœ€è¦æ‰§è¡Œçš„å‡½æ•°åã€‚Springä¾¿ä¼šåœ¨åˆå§‹åŒ–é˜¶æ®µæ‰§è¡Œæˆ‘ä»¬è®¾ç½®çš„å‡½æ•°ã€‚init-methodæœ¬è´¨ä¸Šä»ç„¶ä½¿ç”¨äº†InitializingBeanæ¥å£ã€‚\ne.DisposableBeanå’Œdestroy-method\nå’Œinit-methodä¸€æ ·ï¼Œé€šè¿‡ç»™destroy-methodæŒ‡å®šå‡½æ•°ï¼Œå°±å¯ä»¥åœ¨beané”€æ¯å‰æ‰§è¡ŒæŒ‡å®šçš„é€»è¾‘ã€‚\nAOPæ˜¯ä»€ä¹ˆï¼Ÿ AOPï¼ˆAspect Oriented Programmingï¼‰ï¼Œå³é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œå¯ä»¥è¯´æ˜¯OOPï¼ˆObject Oriented Programmingï¼Œé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼‰çš„è¡¥å……å’Œå®Œå–„ã€‚OOPå¼•å…¥å°è£…ã€ç»§æ‰¿ã€å¤šæ€ç­‰æ¦‚å¿µæ¥å»ºç«‹ä¸€ç§å¯¹è±¡å±‚æ¬¡ç»“æ„ï¼Œç”¨äºæ¨¡æ‹Ÿå…¬å…±è¡Œä¸ºçš„ä¸€ä¸ªé›†åˆã€‚ä¸è¿‡OOPå…è®¸å¼€å‘è€…å®šä¹‰çºµå‘çš„å…³ç³»ï¼Œä½†å¹¶ä¸é€‚åˆå®šä¹‰æ¨ªå‘çš„å…³ç³»ï¼Œä¾‹å¦‚æ—¥å¿—åŠŸèƒ½ã€‚æ—¥å¿—ä»£ç å¾€å¾€æ¨ªå‘åœ°æ•£å¸ƒåœ¨æ‰€æœ‰å¯¹è±¡å±‚æ¬¡ä¸­ï¼Œè€Œä¸å®ƒå¯¹åº”çš„å¯¹è±¡çš„æ ¸å¿ƒåŠŸèƒ½æ¯«æ— å…³ç³»å¯¹äºå…¶ä»–ç±»å‹çš„ä»£ç ï¼Œå¦‚å®‰å…¨æ€§ã€å¼‚å¸¸å¤„ç†å’Œé€æ˜çš„æŒç»­æ€§ä¹Ÿéƒ½æ˜¯å¦‚æ­¤ï¼Œè¿™ç§æ•£å¸ƒåœ¨å„å¤„çš„æ— å…³çš„ä»£ç è¢«ç§°ä¸ºæ¨ªåˆ‡ï¼ˆcross cuttingï¼‰ï¼Œåœ¨OOPè®¾è®¡ä¸­ï¼Œå®ƒå¯¼è‡´äº†å¤§é‡ä»£ç çš„é‡å¤ï¼Œè€Œä¸åˆ©äºå„ä¸ªæ¨¡å—çš„é‡ç”¨ã€‚\nAOPæŠ€æœ¯æ°æ°ç›¸åï¼Œå®ƒåˆ©ç”¨ä¸€ç§ç§°ä¸º\u0026quot;æ¨ªåˆ‡\u0026quot;çš„æŠ€æœ¯ï¼Œå‰–è§£å¼€å°è£…çš„å¯¹è±¡å†…éƒ¨ï¼Œå¹¶å°†é‚£äº›å½±å“äº†å¤šä¸ªç±»çš„å…¬å…±è¡Œä¸ºå°è£…åˆ°ä¸€ä¸ªå¯é‡ç”¨æ¨¡å—ï¼Œå¹¶å°†å…¶å‘½åä¸º\u0026quot;Aspect\u0026rdquo;ï¼Œå³åˆ‡é¢ã€‚æ‰€è°“\u0026quot;åˆ‡é¢\u0026rdquo;ï¼Œç®€å•è¯´å°±æ˜¯é‚£äº›ä¸ä¸šåŠ¡æ— å…³ï¼Œå´ä¸ºä¸šåŠ¡æ¨¡å—æ‰€å…±åŒè°ƒç”¨çš„é€»è¾‘æˆ–è´£ä»»å°è£…èµ·æ¥ï¼Œä¾¿äºå‡å°‘ç³»ç»Ÿçš„é‡å¤ä»£ç ï¼Œé™ä½æ¨¡å—ä¹‹é—´çš„è€¦åˆåº¦ï¼Œå¹¶æœ‰åˆ©äºæœªæ¥çš„å¯æ“ä½œæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚\nä½¿ç”¨\u0026quot;æ¨ªåˆ‡\u0026quot;æŠ€æœ¯ï¼ŒAOPæŠŠè½¯ä»¶ç³»ç»Ÿåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šæ ¸å¿ƒå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚ä¸šåŠ¡å¤„ç†çš„ä¸»è¦æµç¨‹æ˜¯æ ¸å¿ƒå…³æ³¨ç‚¹ï¼Œä¸ä¹‹å…³ç³»ä¸å¤§çš„éƒ¨åˆ†æ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚æ¨ªåˆ‡å…³æ³¨ç‚¹çš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯ï¼Œä»–ä»¬ç»å¸¸å‘ç”Ÿåœ¨æ ¸å¿ƒå…³æ³¨ç‚¹çš„å¤šå¤„ï¼Œè€Œå„å¤„åŸºæœ¬ç›¸ä¼¼ï¼Œæ¯”å¦‚æƒé™è®¤è¯ã€æ—¥å¿—ã€äº‹ç‰©ã€‚AOPçš„ä½œç”¨åœ¨äºåˆ†ç¦»ç³»ç»Ÿä¸­çš„å„ç§å…³æ³¨ç‚¹ï¼Œå°†æ ¸å¿ƒå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨ç‚¹åˆ†ç¦»å¼€æ¥ã€‚\nIOCçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ IOC æˆ– ä¾èµ–æ³¨å…¥æŠŠåº”ç”¨çš„ä»£ç é‡é™åˆ°æœ€ä½ã€‚å®ƒä½¿åº”ç”¨å®¹æ˜“æµ‹è¯•ï¼Œå•å…ƒæµ‹è¯•ä¸å†éœ€è¦å•ä¾‹å’ŒJNDIæŸ¥æ‰¾æœºåˆ¶ã€‚æœ€å°çš„ä»£ä»·å’Œæœ€å°çš„ä¾µå…¥æ€§ä½¿æ¾æ•£è€¦åˆå¾—ä»¥å®ç°ã€‚IOCå®¹å™¨æ”¯æŒåŠ è½½æœåŠ¡æ—¶çš„é¥¿æ±‰å¼åˆå§‹åŒ–å’Œæ‡’åŠ è½½ã€‚\nå¼•å…¥IOCçš„ç›®çš„ ï¼ˆ1ï¼‰è„±å¼€ã€é™ä½ç±»ä¹‹é—´çš„è€¦åˆï¼›ï¼ˆ2ï¼‰å€¡å¯¼é¢å‘æ¥å£ç¼–ç¨‹ã€å®æ–½ä¾èµ–å€’æ¢åŸåˆ™ï¼› ï¼ˆ3ï¼‰æé«˜ç³»ç»Ÿå¯æ’å…¥ã€å¯æµ‹è¯•ã€å¯ä¿®æ”¹ç­‰ç‰¹æ€§ã€‚\nå…·ä½“åšæ³•ï¼šï¼ˆ1ï¼‰å°†beanä¹‹é—´çš„ä¾èµ–å…³ç³»å°½å¯èƒ½åœ°æŠ“æ¢ä¸ºå…³è”å…³ç³»ï¼›\nï¼ˆ2ï¼‰å°†å¯¹å…·ä½“ç±»çš„å…³è”å°½å¯èƒ½åœ°è½¬æ¢ä¸ºå¯¹Java interfaceçš„å…³è”ï¼Œè€Œä¸æ˜¯ä¸å…·ä½“çš„æœåŠ¡å¯¹è±¡ç›¸å…³è”ï¼›\nï¼ˆ3ï¼‰Beanå®ä¾‹å…·ä½“å…³è”ç›¸å…³Java interfaceçš„å“ªä¸ªå®ç°ç±»çš„å®ä¾‹ï¼Œåœ¨é…ç½®ä¿¡æ¯çš„å…ƒæ•°æ®ä¸­æè¿°ï¼›\nï¼ˆ4ï¼‰ç”±IoCç»„ä»¶ï¼ˆæˆ–ç§°å®¹å™¨ï¼‰æ ¹æ®é…ç½®ä¿¡æ¯ï¼Œå®ä¾‹åŒ–å…·ä½“beanç±»ã€å°†beanä¹‹é—´çš„ä¾èµ–å…³ç³»æ³¨å…¥è¿›æ¥ã€‚\nSpringæ¡†æ¶ä¸­çš„å•ä¾‹Beansæ˜¯çº¿ç¨‹å®‰å…¨çš„ä¹ˆï¼Ÿ Springæ¡†æ¶å¹¶æ²¡æœ‰å¯¹å•ä¾‹beanè¿›è¡Œä»»ä½•å¤šçº¿ç¨‹çš„å°è£…å¤„ç†ã€‚å…³äºå•ä¾‹beançš„çº¿ç¨‹å®‰å…¨å’Œå¹¶å‘é—®é¢˜éœ€è¦å¼€å‘è€…è‡ªè¡Œå»æå®šã€‚ä½†å®é™…ä¸Šï¼Œå¤§éƒ¨åˆ†çš„Spring beanå¹¶æ²¡æœ‰å¯å˜çš„çŠ¶æ€(æ¯”å¦‚Serviewç±»å’ŒDAOç±»)ï¼Œæ‰€ä»¥åœ¨æŸç§ç¨‹åº¦ä¸Šè¯´Springçš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å¦‚æœä½ çš„beanæœ‰å¤šç§çŠ¶æ€çš„è¯**ï¼ˆæ¯”å¦‚ View Model å¯¹è±¡ï¼‰ï¼Œå°±**éœ€è¦è‡ªè¡Œä¿è¯çº¿ç¨‹å®‰å…¨**ã€‚\nAOPçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ AOPä»£ç†ä¸»è¦åˆ†ä¸ºé™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†ï¼Œé™æ€ä»£ç†çš„ä»£è¡¨ä¸ºAspectJï¼›è€ŒåŠ¨æ€ä»£ç†åˆ™ä»¥Spring AOPä¸ºä»£è¡¨ã€‚é€šå¸¸ä½¿ç”¨AspectJçš„ç¼–è¯‘æ—¶å¢å¼ºå®ç°AOPï¼ŒAspectJæ˜¯é™æ€ä»£ç†çš„å¢å¼ºï¼Œæ‰€è°“çš„é™æ€ä»£ç†å°±æ˜¯AOPæ¡†æ¶ä¼šåœ¨ç¼–è¯‘é˜¶æ®µç”ŸæˆAOPä»£ç†ç±»ï¼Œå› æ­¤ä¹Ÿç§°ä¸ºç¼–è¯‘æ—¶å¢å¼ºã€‚\nSpring AOPä¸­çš„åŠ¨æ€ä»£ç†ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼ŒJDKåŠ¨æ€ä»£ç†å’ŒCGLIBåŠ¨æ€ä»£ç†ã€‚JDKåŠ¨æ€ä»£ç†é€šè¿‡åå°„æ¥æ¥æ”¶è¢«ä»£ç†çš„ç±»ï¼Œå¹¶ä¸”è¦æ±‚è¢«ä»£ç†çš„ç±»å¿…é¡»å®ç°ä¸€ä¸ªæ¥å£ã€‚JDKåŠ¨æ€ä»£ç†çš„æ ¸å¿ƒæ˜¯InvocationHandleræ¥å£å’ŒProxyç±»ã€‚\nå¦‚æœç›®æ ‡ç±»æ²¡æœ‰å®ç°æ¥å£ï¼Œé‚£ä¹ˆSpring AOPä¼šé€‰æ‹©ä½¿ç”¨CGLIBæ¥åŠ¨æ€ä»£ç†ç›®æ ‡ç±»ã€‚CGLIBï¼ˆCode Generation Libraryï¼‰ï¼Œæ˜¯ä¸€ä¸ªä»£ç ç”Ÿæˆçš„ç±»åº“ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€çš„ç”ŸæˆæŸä¸ªç±»çš„å­ç±»ï¼Œæ³¨æ„ï¼ŒCGLIBæ˜¯é€šè¿‡ç»§æ‰¿çš„æ–¹å¼åšçš„åŠ¨æ€ä»£ç†ï¼Œå› æ­¤å¦‚æœæŸä¸ªç±»è¢«æ ‡è®°ä¸ºfinalï¼Œé‚£ä¹ˆå®ƒæ˜¯æ— æ³•ä½¿ç”¨CGLIBåšåŠ¨æ€ä»£ç†çš„ã€‚\naopçš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ Authentication æƒé™ ï¼ŒCaching ç¼“å­˜ ï¼ŒContext passing å†…å®¹ä¼ é€’ ï¼ŒError handling é”™è¯¯å¤„ç† ï¼ŒLazy loading æ‡’åŠ è½½ ï¼ŒDebugging è°ƒè¯• ï¼Œlogging, tracing, profiling and monitoring è®°å½•è·Ÿè¸ªã€€ä¼˜åŒ–ã€€æ ¡å‡†ï¼ŒPerformance optimization æ€§èƒ½ä¼˜åŒ– ï¼ŒPersistence æŒä¹…åŒ– ï¼ŒResource pooling èµ„æºæ±  ï¼ŒSynchronization åŒæ­¥ï¼ŒTransactions äº‹åŠ¡\næŒä¹…å±‚è®¾è®¡è¦è€ƒè™‘çš„é—®é¢˜æœ‰å“ªäº›ï¼Ÿ æŒä¹…å±‚è®¾è®¡çš„ç›®æ ‡åŒ…æ‹¬ï¼š\n- æ•°æ®å­˜å‚¨é€»è¾‘çš„åˆ†ç¦»ï¼Œæä¾›æŠ½è±¡åŒ–çš„æ•°æ®è®¿é—®æ¥å£ã€‚\n- æ•°æ®è®¿é—®åº•å±‚å®ç°çš„åˆ†ç¦»ï¼Œå¯ä»¥åœ¨ä¸ä¿®æ”¹ä»£ç çš„æƒ…å†µä¸‹åˆ‡æ¢åº•å±‚å®ç°ã€‚\n- èµ„æºç®¡ç†å’Œè°ƒåº¦çš„åˆ†ç¦»ï¼Œåœ¨æ•°æ®è®¿é—®å±‚å®ç°ç»Ÿä¸€çš„èµ„æºè°ƒåº¦ï¼ˆå¦‚ç¼“å­˜æœºåˆ¶ï¼‰ã€‚\n- æ•°æ®æŠ½è±¡ï¼Œæä¾›æ›´é¢å‘å¯¹è±¡çš„æ•°æ®æ“ä½œã€‚\nå¦‚ä½•ç†è§£åˆ‡ç‚¹ï¼Œåˆ‡é¢è¿™äº›æ¦‚å¿µ  https://www.zhihu.com/question/344440064\n ä¸‰å±‚æ¶æ„   è¡¨ç°å±‚ï¼š\n ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„webå±‚ã€‚å®ƒè´Ÿè´£æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚ï¼Œå‘å®¢æˆ·ç«¯å“åº”ç»“æœï¼Œé€šå¸¸å®¢æˆ·ç«¯ä½¿ç”¨httpåè®®è¯·æ±‚ web å±‚ï¼Œweb éœ€è¦æ¥æ”¶ http è¯·æ±‚ï¼Œå®Œæˆ http å“åº”ã€‚ è¡¨ç°å±‚åŒ…æ‹¬å±•ç¤ºå±‚å’Œæ§åˆ¶å±‚ï¼šæ§åˆ¶å±‚è´Ÿè´£æ¥æ”¶è¯·æ±‚ï¼Œå±•ç¤ºå±‚è´Ÿè´£ç»“æœçš„å±•ç¤ºã€‚ è¡¨ç°å±‚ä¾èµ–ä¸šåŠ¡å±‚ï¼Œæ¥æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚ä¸€èˆ¬ä¼šè°ƒç”¨ä¸šåŠ¡å±‚è¿›è¡Œä¸šåŠ¡å¤„ç†ï¼Œå¹¶å°†å¤„ç†ç»“æœå“åº”ç»™å®¢æˆ·ç«¯ã€‚ è¡¨ç°å±‚çš„è®¾è®¡ä¸€èˆ¬éƒ½ä½¿ç”¨ MVC æ¨¡å‹ã€‚ï¼ˆMVC æ˜¯è¡¨ç°å±‚çš„è®¾è®¡æ¨¡å‹ï¼Œå’Œå…¶ä»–å±‚æ²¡æœ‰å…³ç³»ï¼‰    ä¸šåŠ¡å±‚ï¼š\n ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ service å±‚ã€‚å®ƒè´Ÿè´£ä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œå’Œæˆ‘ä»¬å¼€å‘é¡¹ç›®çš„éœ€æ±‚æ¯æ¯ç›¸å…³ã€‚web å±‚ä¾èµ–ä¸š åŠ¡å±‚ï¼Œä½†æ˜¯ä¸šåŠ¡å±‚ä¸ä¾èµ– web å±‚ã€‚ ä¸šåŠ¡å±‚åœ¨ä¸šåŠ¡å¤„ç†æ—¶å¯èƒ½ä¼šä¾èµ–æŒä¹…å±‚ï¼Œå¦‚æœè¦å¯¹æ•°æ®æŒä¹…åŒ–éœ€è¦ä¿è¯äº‹åŠ¡ä¸€è‡´æ€§ã€‚ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„ï¼Œ äº‹åŠ¡åº”è¯¥æ”¾åˆ°ä¸šåŠ¡å±‚æ¥æ§åˆ¶ï¼‰    æŒä¹…å±‚ï¼š\n  ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ˜¯å¸¸è¯´çš„ dao å±‚ã€‚è´Ÿè´£æ•°æ®æŒä¹…åŒ–ï¼ŒåŒ…æ‹¬æ•°æ®å±‚å³æ•°æ®åº“å’Œæ•°æ®è®¿é—®å±‚ï¼Œæ•°æ®åº“æ˜¯å¯¹æ•°æ®è¿› è¡ŒæŒä¹…åŒ–çš„è½½ä½“ï¼Œæ•°æ®è®¿é—®å±‚æ˜¯ä¸šåŠ¡å±‚å’ŒæŒä¹…å±‚äº¤äº’çš„æ¥å£ï¼Œä¸šåŠ¡å±‚éœ€è¦é€šè¿‡æ•°æ®è®¿é—®å±‚å°†æ•°æ®æŒä¹…åŒ–åˆ°æ•°æ®åº“ ä¸­ã€‚é€šä¿—çš„è®²ï¼ŒæŒä¹…å±‚å°±æ˜¯å’Œæ•°æ®åº“äº¤äº’ï¼Œå¯¹æ•°æ®åº“è¡¨è¿›è¡Œæ›¾åˆ æ”¹æŸ¥çš„ã€‚\n  MVCæ¨¡å‹ MVC å…¨åæ˜¯ Model View Controllerï¼Œæ˜¯æ¨¡å‹(model)ï¼è§†å›¾(view)ï¼æ§åˆ¶å™¨(controller)çš„ç¼©å†™ï¼Œ æ˜¯ä¸€ç§ç”¨äºè®¾è®¡åˆ›å»º Web åº”ç”¨ç¨‹åºè¡¨ç°å±‚çš„æ¨¡å¼ã€‚MVC ä¸­æ¯ä¸ªéƒ¨åˆ†å„å¸å…¶èŒï¼š\n  Modelï¼ˆæ¨¡å‹ï¼‰ï¼š é€šå¸¸æŒ‡çš„å°±æ˜¯æˆ‘ä»¬çš„æ•°æ®æ¨¡å‹ã€‚ä½œç”¨ä¸€èˆ¬æƒ…å†µä¸‹ç”¨äºå°è£…æ•°æ®ã€‚\n  Viewï¼ˆè§†å›¾ï¼‰ï¼š é€šå¸¸æŒ‡çš„å°±æ˜¯æˆ‘ä»¬çš„ jsp æˆ–è€… htmlã€‚ä½œç”¨ä¸€èˆ¬å°±æ˜¯å±•ç¤ºæ•°æ®çš„ã€‚ é€šå¸¸è§†å›¾æ˜¯ä¾æ®æ¨¡å‹æ•°æ®åˆ›å»ºçš„\n  Controllerï¼ˆæ§åˆ¶å™¨ï¼‰ï¼š æ˜¯åº”ç”¨ç¨‹åºä¸­å¤„ç†ç”¨æˆ·äº¤äº’çš„éƒ¨åˆ†ã€‚ä½œç”¨ä¸€èˆ¬å°±æ˜¯å¤„ç†ç¨‹åºé€»è¾‘çš„ã€‚ å®ƒç›¸å¯¹äºå‰ä¸¤ä¸ªä¸æ˜¯å¾ˆå¥½ç†è§£ï¼Œè¿™é‡Œä¸¾ä¸ªä¾‹å­ï¼š ä¾‹å¦‚ï¼š æˆ‘ä»¬è¦ä¿å­˜ä¸€ä¸ªç”¨æˆ·çš„ä¿¡æ¯ï¼Œè¯¥ç”¨æˆ·ä¿¡æ¯ä¸­åŒ…å«äº†å§“åï¼Œæ€§åˆ«ï¼Œå¹´é¾„ç­‰ç­‰ã€‚ è¿™æ—¶å€™è¡¨å•è¾“å…¥è¦æ±‚å¹´é¾„å¿…é¡»æ˜¯ 1~100 ä¹‹é—´çš„æ•´æ•°ã€‚å§“åå’Œæ€§åˆ«ä¸èƒ½ä¸ºç©ºã€‚å¹¶ä¸”æŠŠæ•°æ®å¡«å…… åˆ°æ¨¡å‹ä¹‹ä¸­ã€‚ æ­¤æ—¶é™¤äº† js çš„æ ¡éªŒä¹‹å¤–ï¼ŒæœåŠ¡å™¨ç«¯ä¹Ÿåº”è¯¥æœ‰æ•°æ®å‡†ç¡®æ€§çš„æ ¡éªŒï¼Œé‚£ä¹ˆæ ¡éªŒå°±æ˜¯æ§åˆ¶å™¨çš„è¯¥åš çš„ã€‚ å½“æ ¡éªŒå¤±è´¥åï¼Œç”±æ§åˆ¶å™¨è´Ÿè´£æŠŠé”™è¯¯é¡µé¢å±•ç¤ºç»™ä½¿ç”¨è€…ã€‚ å¦‚æœæ ¡éªŒæˆåŠŸï¼Œä¹Ÿæ˜¯æ§åˆ¶å™¨è´Ÿè´£æŠŠæ•°æ®å¡«å……åˆ°æ¨¡å‹ï¼Œå¹¶ä¸”è°ƒç”¨ä¸šåŠ¡å±‚å®ç°å®Œæ•´çš„ä¸šåŠ¡éœ€æ±‚ã€‚\n  SpringMVCçš„å¼‚å¸¸å¤„ç† ç³»ç»Ÿä¸­å¼‚å¸¸åŒ…æ‹¬ä¸¤ç±»ï¼šé¢„æœŸå¼‚å¸¸å’Œè¿è¡Œæ—¶å¼‚å¸¸ RuntimeExceptionï¼Œå‰è€…é€šè¿‡æ•è·å¼‚å¸¸ä»è€Œè·å–å¼‚å¸¸ä¿¡æ¯ï¼Œ åè€…ä¸»è¦é€šè¿‡è§„èŒƒä»£ç å¼€å‘ã€æµ‹è¯•é€šè¿‡æ‰‹æ®µå‡å°‘è¿è¡Œæ—¶å¼‚å¸¸çš„å‘ç”Ÿã€‚ ç³»ç»Ÿçš„ daoã€serviceã€controller å‡ºç°éƒ½é€šè¿‡ throws Exception å‘ä¸ŠæŠ›å‡ºï¼Œæœ€åç”± springmvc å‰ç«¯ æ§åˆ¶å™¨äº¤ç”±å¼‚å¸¸å¤„ç†å™¨è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼Œå¦‚ä¸‹å›¾ï¼š\nå…·ä½“æ­¥éª¤ï¼š\n1ã€è‡ªå®šä¹‰å¼‚å¸¸ç±»\n1 2 3 4 5 6 7 8 9 10  public class CustomException extends Exception {\rprivate String message;\rpublic CustomException(String message) {\rthis.message = message;\r}\rpublic String getMessage() {\rreturn message;\r}\r}\r  2ã€è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†å™¨\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  public class CustomExceptionResolver implements HandlerExceptionResolver {\r@Override\rpublic ModelAndView resolveException(HttpServletRequest request,\rHttpServletResponse response, Object handler, Exception ex) {\rex.printStackTrace();\rCustomException customException = null;\r//å¦‚æœæŠ›å‡ºçš„æ˜¯ç³»ç»Ÿè‡ªå®šä¹‰å¼‚å¸¸åˆ™ç›´æ¥è½¬æ¢\rif(ex instanceof CustomException){\rcustomException = (CustomException)ex;\r}else{\r//å¦‚æœæŠ›å‡ºçš„ä¸æ˜¯ç³»ç»Ÿè‡ªå®šä¹‰å¼‚å¸¸åˆ™é‡æ–°æ„é€ ä¸€ä¸ªç³»ç»Ÿé”™è¯¯å¼‚å¸¸ã€‚\rcustomException = new CustomException(\u0026#34;ç³»ç»Ÿé”™è¯¯ï¼Œè¯·ä¸ç³»ç»Ÿç®¡ç† å‘˜è”ç³»ï¼\u0026#34;);\r}\rModelAndView modelAndView = new ModelAndView();\rmodelAndView.addObject(\u0026#34;message\u0026#34;, customException.getMessage());\rmodelAndView.setViewName(\u0026#34;error\u0026#34;);\rreturn modelAndView;\r}\r}\r  3ã€ é…ç½®å¼‚å¸¸å¤„ç†å™¨\n1 2 3  \u0026lt;!-- é…ç½®è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†å™¨ --\u0026gt;\r\u0026lt;bean id=\u0026#34;handlerExceptionResolver\u0026#34;\rclass=\u0026#34;com.itheima.exception.CustomExceptionResolver\u0026#34;/\u0026gt;\r  SpringMVCæ‹¦æˆªå™¨   Spring MVC çš„å¤„ç†å™¨æ‹¦æˆªå™¨ç±»ä¼¼äº Servlet å¼€å‘ä¸­çš„è¿‡æ»¤å™¨ Filterï¼Œç”¨äºå¯¹å¤„ç†å™¨è¿›è¡Œé¢„å¤„ç†å’Œåå¤„ç†ã€‚ ç”¨æˆ·å¯ä»¥è‡ªå·±å®šä¹‰ä¸€äº›æ‹¦æˆªå™¨æ¥å®ç°ç‰¹å®šçš„åŠŸèƒ½ã€‚ è°ˆåˆ°æ‹¦æˆªå™¨ï¼Œè¿˜è¦å‘å¤§å®¶æä¸€ä¸ªè¯â€”â€”æ‹¦æˆªå™¨é“¾ï¼ˆInterceptor Chainï¼‰ã€‚æ‹¦æˆªå™¨é“¾å°±æ˜¯å°†æ‹¦æˆªå™¨æŒ‰ä¸€å®šçš„é¡º åºè”ç»“æˆä¸€æ¡é“¾ã€‚åœ¨è®¿é—®è¢«æ‹¦æˆªçš„æ–¹æ³•æˆ–å­—æ®µæ—¶ï¼Œæ‹¦æˆªå™¨é“¾ä¸­çš„æ‹¦æˆªå™¨å°±ä¼šæŒ‰å…¶ä¹‹å‰å®šä¹‰çš„é¡ºåºè¢«è°ƒç”¨ã€‚\n  å’Œè¿‡æ»¤å™¨çš„åŒºåˆ«ï¼š\n è¿‡æ»¤å™¨æ˜¯ servlet è§„èŒƒä¸­çš„ä¸€éƒ¨åˆ†ï¼Œä»»ä½• java web å·¥ç¨‹éƒ½å¯ä»¥ä½¿ç”¨ã€‚ æ‹¦æˆªå™¨æ˜¯ SpringMVC æ¡†æ¶è‡ªå·±çš„ï¼Œåªæœ‰ä½¿ç”¨äº† SpringMVC æ¡†æ¶çš„å·¥ç¨‹æ‰èƒ½ç”¨ã€‚ è¿‡æ»¤å™¨åœ¨ url-pattern ä¸­é…ç½®äº†/*ä¹‹åï¼Œå¯ä»¥å¯¹æ‰€æœ‰è¦è®¿é—®çš„èµ„æºæ‹¦æˆªã€‚ æ‹¦æˆªå™¨å®ƒæ˜¯åªä¼šæ‹¦æˆªè®¿é—®çš„æ§åˆ¶å™¨æ–¹æ³•ï¼Œå¦‚æœè®¿é—®çš„æ˜¯ jspï¼Œhtml,css,image æˆ–è€… js æ˜¯ä¸ä¼šè¿›è¡Œæ‹¦ æˆªçš„ã€‚    1ã€ç¼–å†™ä¸€ä¸ªæ™®é€šç±»å®ç° HandlerInterceptor æ¥å£\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  public class HandlerInterceptorDemo1 implements HandlerInterceptor {\r@Override\rpublic boolean preHandle(HttpServletRequest request, HttpServletResponse\rresponse, Object handler)\rthrows Exception {\rSystem.out.println(\u0026#34;preHandle æ‹¦æˆªå™¨æ‹¦æˆªäº†\u0026#34;);\rreturn true;\r}\r@Override\rpublic void postHandle(HttpServletRequest request, HttpServletResponse response,\rObject handler,\rModelAndView modelAndView) throws Exception {\rSystem.out.println(\u0026#34;postHandle æ–¹æ³•æ‰§è¡Œäº†\u0026#34;);\r}\r@Override\rpublic void afterCompletion(HttpServletRequest request, HttpServletResponse\rresponse, Object handler, Exception ex)\rthrows Exception {\rSystem.out.println(\u0026#34;afterCompletion æ–¹æ³•æ‰§è¡Œäº†\u0026#34;);\r}\r  2ã€é…ç½®æ‹¦æˆªå™¨\n1 2 3 4 5 6 7 8  \u0026lt;!-- é…ç½®æ‹¦æˆªå™¨ --\u0026gt;\r\u0026lt;mvc:interceptors\u0026gt;\r\u0026lt;mvc:interceptor\u0026gt;\r\u0026lt;mvc:mapping path=\u0026#34;/**\u0026#34;/\u0026gt;\r\u0026lt;bean id=\u0026#34;handlerInterceptorDemo1\u0026#34;\rclass=\u0026#34;com.itheima.web.interceptor.HandlerInterceptorDemo1\u0026#34;\u0026gt;\u0026lt;/bean\u0026gt;\r\u0026lt;/mvc:interceptor\u0026gt;\r\u0026lt;/mvc:interceptors\u0026gt;\r  SpringMVCæ‰§è¡Œæµç¨‹ ","description":"tabs, code-tabs, expand, alert, warning, notice, img, box","id":35,"section":"posts","tags":["é¢è¯•"],"title":"Javaé¢è¯•-Spring","uri":"https://mrxiaoling.github.io/en/posts/%E9%9D%A2%E8%AF%95/spring/spring/"},{"content":"Javaå¤šçº¿ç¨‹ çº¿ç¨‹å’Œè¿›ç¨‹çš„æ¦‚å¿µ  è¿›ç¨‹  åœ¨ç°ä»£å¤§å¤šæ•°é¢å‘çº¿ç¨‹è®¾è®¡çš„ç³»ç»Ÿï¼Œè¿›ç¨‹æ˜¯çº¿ç¨‹çš„å®¹å™¨ã€‚ï¼ˆåœ¨åˆ†æ—¶ç³»ç»Ÿä¸­ï¼Œè¿›ç¨‹ç§°ä¸ºâ€œç”¨æˆ·ç¨‹åºâ€æˆ–è€…â€œä»»åŠ¡â€ï¼‰   çº¿ç¨‹  æ˜¯æ“ä½œç³»ç»Ÿèƒ½å¤Ÿè¿›è¡Œè¿ç®—è°ƒåº¦çš„æœ€å°å•ä½ï¼Œè¢«åŒ…å«äºè¿›ç¨‹ä¹‹ä¸­ã€‚ åŒä¸€è¿›ç¨‹ä¸­çš„å¤šæ¡çº¿ç¨‹å°†å…±äº«è¯¥è¿›ç¨‹ä¸­çš„å…¨éƒ¨ç³»ç»Ÿèµ„æºï¼Œå¦‚è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œæ–‡ä»¶æè¿°ç¬¦å’Œä¿¡å·å¤„ç†ç­‰ç­‰ã€‚ä½†åŒä¸€è¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹æœ‰å„è‡ªçš„è°ƒç”¨æ ˆï¼ˆcall stackï¼‰ï¼Œè‡ªå·±çš„å¯„å­˜å™¨ç¯å¢ƒï¼ˆregister contextï¼‰ï¼Œè‡ªå·±çš„çº¿ç¨‹æœ¬åœ°å­˜å‚¨ï¼ˆthread-local storageï¼‰ã€‚    çº¿ç¨‹å®‰å…¨çš„æ¦‚å¿µ  çº¿ç¨‹å®‰å…¨ï¼š  æŒ‡æŸä¸ªå‡½æ•°ã€å‡½æ•°åº“åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­è¢«è°ƒç”¨æ—¶ï¼Œèƒ½å¤Ÿæ­£ç¡®åœ°å¤„ç†å¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„å…±äº«å˜é‡ï¼Œä½¿ç¨‹åºåŠŸèƒ½æ­£ç¡®å®Œæˆï¼Œå¾—åˆ°é¢„æœŸçš„ç»“æœ    ä»€ä¹ˆæ˜¯CAS   CASï¼ˆcompare and swapï¼‰çš„ç¼©å†™\n  CAS ä¸é€šè¿‡JVM,ç›´æ¥åˆ©â½¤javaæœ¬åœ°â½… JNIï¼ˆJava Native Interfaceä¸ºJAVAæœ¬åœ°è°ƒâ½¤ï¼‰,ç›´æ¥è°ƒâ½¤CPU çš„cmpxchgï¼ˆæ±‡ç¼–æŒ‡ä»¤ï¼‰æŒ‡ä»¤ã€‚\n  åˆ©â½¤CPUçš„CASæŒ‡ä»¤ï¼ŒåŒæ—¶å€ŸåŠ©JNIæ¥å®ŒæˆJavaçš„â¾®é˜»å¡ç®—æ³•,å®ç°åŸâ¼¦æ“ä½œã€‚å…¶å®ƒåŸâ¼¦æ“ä½œéƒ½æ˜¯åˆ©â½¤ç±»ä¼¼çš„ç‰¹æ€§å®Œæˆ çš„ã€‚\n  æ•´ä¸ªjava.util.concurrentéƒ½æ˜¯å»ºâ½´åœ¨CASä¹‹ä¸Šçš„ï¼Œå› æ­¤å¯¹äºsynchronizedé˜»å¡ç®—æ³•ï¼ŒJ.U.Cåœ¨æ€§èƒ½ä¸Šæœ‰äº†å¾ˆâ¼¤çš„æå‡\n  CASæ˜¯é¡¹ä¹è§‚é”æŠ€æœ¯ï¼Œå½“å¤šä¸ªçº¿ç¨‹å°è¯•ä½¿â½¤CASåŒæ—¶æ›´æ–°åŒâ¼€ä¸ªå˜é‡æ—¶ï¼Œåªæœ‰å…¶ä¸­â¼€ä¸ªçº¿ç¨‹èƒ½æ›´æ–°å˜é‡çš„å€¼ï¼Œâ½½å…¶å®ƒ çº¿ç¨‹éƒ½å¤±è´¥ï¼Œå¤±è´¥çš„çº¿ç¨‹å¹¶ä¸ä¼šè¢«æŒ‚èµ·ï¼Œâ½½æ˜¯è¢«å‘ŠçŸ¥è¿™æ¬¡ç«äº‰ä¸­å¤±è´¥ï¼Œå¹¶å¯ä»¥å†æ¬¡å°è¯•ã€‚\n  ç¼ºç‚¹ï¼š\n  ABAé—®é¢˜\n  å¾ªç¯æ—¶é—´é•¿å¼€é”€å¤§  è‡ªæ—‹CASï¼ˆä¹Ÿå°±æ˜¯ä¸æˆåŠŸå°±ä¸€ç›´å¾ªç¯æ‰§è¡Œç›´åˆ°æˆåŠŸï¼‰å¦‚æœé•¿æ—¶é—´ä¸æˆåŠŸï¼Œä¼šç»™CPUå¸¦æ¥éå¸¸å¤§çš„æ‰§è¡Œå¼€é”€ã€‚    åªèƒ½ä¿è¯ä¸€ä¸ªå…±äº«å˜é‡çš„åŸå­æ“ä½œ  CAS åªå¯¹å•ä¸ªå…±äº«å˜é‡æœ‰æ•ˆï¼Œå½“æ“ä½œæ¶‰åŠè·¨å¤šä¸ªå…±äº«å˜é‡æ—¶ CAS æ— æ•ˆã€‚ä½†æ˜¯ä» JDK 1.5å¼€å§‹ï¼Œæä¾›äº†AtomicReferenceç±»æ¥ä¿è¯å¼•ç”¨å¯¹è±¡ä¹‹é—´çš„åŸå­æ€§ï¼Œä½ å¯ä»¥æŠŠå¤šä¸ªå˜é‡æ”¾åœ¨ä¸€ä¸ªå¯¹è±¡é‡Œæ¥è¿›è¡Œ CAS æ“ä½œ.æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é”æˆ–è€…åˆ©ç”¨AtomicReferenceç±»æŠŠå¤šä¸ªå…±äº«å˜é‡åˆå¹¶æˆä¸€ä¸ªå…±äº«å˜é‡æ¥æ“ä½œã€‚       1ã€ä½¿â½¤CASåœ¨çº¿ç¨‹å†²çªä¸¥é‡æ—¶ï¼Œä¼šâ¼¤å¹…é™ä½ç¨‹åºæ€§èƒ½ï¼›CASåªé€‚åˆäºçº¿ç¨‹å†²çªè¾ƒå°‘çš„æƒ…å†µä½¿â½¤\n2ã€synchronizedåœ¨jdk1.6ä¹‹åï¼Œå·²ç»æ”¹è¿›ä¼˜åŒ–ã€‚synchronizedçš„åº•å±‚å®ç°ä¸»è¦ä¾é Lock-Freeçš„é˜Ÿåˆ—ï¼ŒåŸºæœ¬æ€è·¯æ˜¯â¾ƒæ—‹åé˜»å¡ï¼Œç« äº‰åˆ‡æ¢åç»§ç»­ç«äº‰é”ï¼Œç¨å¾®ç‰ºç‰²äº†å…¬å¹³æ€§ï¼Œä½†è·å¾—äº†â¾¼ååé‡ã€‚åœ¨çº¿ç¨‹å†²çªè¾ƒå°‘çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è·å¾—å’ŒCASç±»ä¼¼çš„æ€§èƒ½ï¼›â½½çº¿ ç¨‹å†²çªä¸¥é‡çš„æƒ…å†µä¸‹ï¼Œæ€§èƒ½è¿œâ¾¼äºCASã€‚\n æ‚²è§‚é”å’Œä¹è§‚é”  é¢è¯•å¿…å¤‡ä¹‹ä¹è§‚é”ä¸æ‚²è§‚é”\n   æ‚²è§‚é”\n æ€»æ˜¯å‡è®¾æœ€åçš„æƒ…å†µï¼Œæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¼šä¿®æ”¹ï¼Œæ‰€ä»¥æ¯æ¬¡åœ¨æ‹¿æ•°æ®çš„æ—¶å€™éƒ½ä¼šä¸Šé”ï¼Œè¿™æ ·åˆ«äººæƒ³æ‹¿è¿™ä¸ªæ•°æ®å°±ä¼šé˜»å¡ç›´åˆ°å®ƒæ‹¿åˆ°é”ï¼ˆå…±äº«èµ„æºæ¯æ¬¡åªç»™ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ï¼Œå…¶å®ƒçº¿ç¨‹é˜»å¡ï¼Œç”¨å®Œåå†æŠŠèµ„æºè½¬è®©ç»™å…¶å®ƒçº¿ç¨‹ï¼‰ã€‚ä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“é‡Œè¾¹å°±ç”¨åˆ°äº†å¾ˆå¤šè¿™ç§é”æœºåˆ¶ï¼Œæ¯”å¦‚è¡Œé”ï¼Œè¡¨é”ç­‰ï¼Œè¯»é”ï¼Œå†™é”ç­‰ï¼Œéƒ½æ˜¯åœ¨åšæ“ä½œä¹‹å‰å…ˆä¸Šé”ã€‚Javaä¸­synchronizedå’ŒReentrantLockç­‰ç‹¬å é”å°±æ˜¯æ‚²è§‚é”æ€æƒ³çš„å®ç°ã€‚ ä¸€èˆ¬å¤šå†™çš„åœºæ™¯ä¸‹ç”¨æ‚²è§‚é”å°±æ¯”è¾ƒåˆé€‚    ä¹è§‚é”\n æ€»æ˜¯å‡è®¾æœ€å¥½çš„æƒ…å†µï¼Œæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¸ä¼šä¿®æ”¹ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ï¼Œä½†æ˜¯åœ¨æ›´æ–°çš„æ—¶å€™ä¼šåˆ¤æ–­ä¸€ä¸‹åœ¨æ­¤æœŸé—´åˆ«äººæœ‰æ²¡æœ‰å»æ›´æ–°è¿™ä¸ªæ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ç‰ˆæœ¬å·æœºåˆ¶å’ŒCASç®—æ³•å®ç°ã€‚ä¹è§‚é”é€‚ç”¨äºå¤šè¯»çš„åº”ç”¨ç±»å‹ï¼Œè¿™æ ·å¯ä»¥æé«˜ååé‡ï¼Œåƒæ•°æ®åº“æä¾›çš„ç±»ä¼¼äºwrite_conditionæœºåˆ¶ï¼Œå…¶å®éƒ½æ˜¯æä¾›çš„ä¹è§‚é”ã€‚åœ¨Javaä¸­java.util.concurrent.atomicåŒ…ä¸‹é¢çš„åŸå­å˜é‡ç±»å°±æ˜¯ä½¿ç”¨äº†ä¹è§‚é”çš„ä¸€ç§å®ç°æ–¹å¼CASå®ç°çš„ã€‚    ä»€ä¹ˆæ˜¯AQS ä»ReentrantLockçš„å®ç°çœ‹AQSçš„åŸç†åŠåº”ç”¨\nåŸå­æ“ä½œä»¥åŠåŸå­ç±» 1ã€åŸâ¼¦æ“ä½œæ˜¯æŒ‡â¼€ä¸ªä¸å—å…¶ä»–æ“ä½œå½±å“çš„æ“ä½œä»»åŠ¡å•å…ƒã€‚åŸâ¼¦æ“ä½œæ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹é¿å…æ•°æ®ä¸â¼€è‡´å¿…é¡»çš„â¼¿æ®µã€‚\n2ã€ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¿…é¡»ä¿è¯å¢åŠ æ“ä½œæ˜¯åŸâ¼¦çš„ï¼Œåœ¨JDK1.5ä¹‹å‰æˆ‘ä»¬å¯ä»¥ä½¿â½¤åŒæ­¥æŠ€æœ¯æ¥åšåˆ°è¿™â¼€ç‚¹ã€‚ åˆ°JDK1.5ï¼Œjava.util.concurrent.atomicåŒ…æä¾›äº†intå’Œlongç±»å‹çš„è£…ç±»ï¼ˆæ¯”å¦‚AtomicIntegerï¼ŒAtomicLongï¼‰ï¼Œå®ƒä»¬å¯ä»¥â¾ƒåŠ¨çš„ä¿è¯å¯¹äºä»–ä»¬çš„æ“ä½œæ˜¯åŸâ¼¦çš„å¹¶ ä¸”ä¸éœ€è¦ä½¿â½¤åŒæ­¥ã€‚\nä»€ä¹ˆæ˜¯Executorsæ¡†æ¶ Javaé€šè¿‡Executorsæä¾›å››ç§çº¿ç¨‹æ± ï¼Œåˆ†åˆ«ä¸ºï¼š\n1ã€newCachedThreadPoolåˆ›å»ºâ¼€ä¸ªå¯ç¼“å­˜çº¿ç¨‹æ± ï¼Œå¦‚æœçº¿ç¨‹æ± â»“åº¦è¶…è¿‡å¤„ç†éœ€è¦ï¼Œå¯çµæ´»å›æ”¶ç©ºé—²çº¿ç¨‹ï¼Œè‹¥â½†å¯ å›æ”¶ï¼Œåˆ™æ–°å»ºçº¿ç¨‹ã€‚\n2ã€newFixedThreadPool åˆ›å»ºâ¼€ä¸ªå®šâ»“çº¿ç¨‹æ± ï¼Œå¯æ§åˆ¶çº¿ç¨‹æœ€â¼¤å¹¶å‘æ•°ï¼Œè¶…å‡ºçš„çº¿ç¨‹ä¼šåœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…ã€‚\n3ã€newScheduledThreadPool åˆ›å»ºâ¼€ä¸ªå®šâ»“çº¿ç¨‹æ± ï¼Œâ½€æŒå®šæ—¶åŠå‘¨æœŸæ€§ä»»åŠ¡æ‰§â¾ã€‚\n4ã€newSingleThreadExecutor åˆ›å»ºâ¼€ä¸ªå•çº¿ç¨‹åŒ–çš„çº¿ç¨‹æ± ï¼Œå®ƒåªä¼šâ½¤å”¯â¼€çš„â¼¯ä½œçº¿ç¨‹æ¥æ‰§â¾ä»»åŠ¡ï¼Œä¿è¯æ‰€æœ‰ä»»åŠ¡ æŒ‰ç…§æŒ‡å®šé¡ºåº(FIFO, LIFO, ä¼˜å…ˆçº§)æ‰§â¾ã€‚\nJavaä¸­çš„é˜»å¡é˜Ÿåˆ— 1ã€JDK7æä¾›äº†7ä¸ªé˜»å¡é˜Ÿåˆ—ã€‚ï¼ˆä¹Ÿå±äºå¹¶å‘å®¹å™¨ï¼‰\ni. ArrayBlockingQueue ï¼šâ¼€ä¸ªç”±æ•°ç»„ç»“æ„ç»„æˆçš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ã€‚\nii. LinkedBlockingQueue ï¼šâ¼€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ã€‚\niii. PriorityBlockingQueue ï¼šâ¼€ä¸ªâ½€æŒä¼˜å…ˆçº§æ’åºçš„â½†ç•Œé˜»å¡é˜Ÿåˆ—ã€‚\niv. DelayQueueï¼šâ¼€ä¸ªä½¿â½¤ä¼˜å…ˆçº§é˜Ÿåˆ—å®ç°çš„â½†ç•Œé˜»å¡é˜Ÿåˆ—ã€‚\nv. SynchronousQueueï¼šâ¼€ä¸ªä¸å­˜å‚¨å…ƒç´ çš„é˜»å¡é˜Ÿåˆ—ã€‚\nvi. LinkedTransferQueueï¼šâ¼€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„â½†ç•Œé˜»å¡é˜Ÿåˆ—ã€‚ vii. LinkedBlockingDequeï¼šâ¼€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„åŒå‘é˜»å¡é˜Ÿåˆ—ã€‚\n","description":"tabs, code-tabs, expand, alert, warning, notice, img, box","id":36,"section":"posts","tags":["é¢è¯•"],"title":"Javaé¢è¯•-å¤šçº¿ç¨‹","uri":"https://mrxiaoling.github.io/en/posts/%E9%9D%A2%E8%AF%95/%E5%A4%9A%E7%BA%BF%E7%A8%8B/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/"},{"content":"Prototypeæ¨¡å¼  å‚è€ƒï¼š1.ã€Šå›¾è§£è®¾è®¡æ¨¡å¼ã€‹\nhttps://www.cnblogs.com/xuekyo/archive/2012/07/12/2587730.html\njavaçš„æµ…å…‹éš†å’Œæ·±å…‹éš†ï¼šhttps://www.cnblogs.com/betterboyz/p/9356190.html\nSpringä¸­çš„åŸå‹æ¨¡å¼ï¼š https://www.jianshu.com/p/611be5eb42a1\n æ¨¡å¼å®šä¹‰  åˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œå¹¶ä¸”é€šè¿‡æ‹·è´è¿™äº›åŸå‹åˆ›å»ºæ–°çš„å¯¹è±¡; Prototypeæ¨¡å¼å…è®¸ä¸€ä¸ªå¯¹è±¡å†åˆ›å»ºå¦å¤–ä¸€ä¸ªå¯å®šåˆ¶çš„å¯¹è±¡ï¼Œæ ¹æœ¬æ— éœ€çŸ¥é“ä»»ä½•å¦‚ä½•åˆ›å»ºçš„ç»†èŠ‚ã€‚ ä¾‹å¦‚ä»ªå™¨æ•°æ®é‡‡é›†å™¨çš„å…±åŒåˆå§‹åŒ–å·¥ä½œå¯åœ¨åŸå‹ç±»å¯¹è±¡ä¸­å®Œæˆï¼Œéšåå°†å…¶å…‹éš†å‡ºPDFæ–‡ä»¶æ•°æ®é‡‡é›†å™¨å¯¹è±¡å’ŒExcelæ–‡ä»¶æ•°æ®é‡‡é›†å™¨å¯¹è±¡ï¼Œå¹¶ä¸ºä¸¤å¯¹è±¡å±æ€§åšåç»­çš„æ‰©å±•ï¼Œå…å»äº†å…¬å…±å±æ€§çš„åˆå§‹åŒ–å·¥ä½œã€‚  æ¨¡å¼åŸç†  é€šè¿‡å°†ä¸€ä¸ªåŸå‹å¯¹è±¡ä¼ ç»™é‚£ä¸ªè¦å‘åŠ¨åˆ›å»ºçš„å¯¹è±¡ï¼Œè¿™ä¸ªè¦å‘åŠ¨åˆ›å»ºçš„å¯¹è±¡é€šè¿‡è¯·æ±‚åŸå‹å¯¹è±¡æ‹·è´å®ƒä»¬è‡ªå·±æ¥å®æ–½åˆ›å»ºã€‚  è§£å†³ä½•ç§é—®é¢˜  è®©çˆ¶ç±»æ§åˆ¶å­ç±»æ–¹æ³•çš„è°ƒç”¨é¡ºåº æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ä¸€ä¸ªç®—æ³•çš„ç»“æ„å³å¯é‡å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚  æ¨¡å¼å¥½å¤„  æ¯æ¬¡NEWä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½éœ€è¦æ‰§è¡Œä¸€æ¬¡æ„é€ å‡½æ•°ï¼Œå¦‚æœæ„é€ å‡½æ•°æ—¶é—´é•¿ï¼Œé‚£ä¹ˆå¤šæ¬¡æ‰§è¡Œåˆå§‹åŒ–çš„æ•ˆç‡å¤§å¤§é™ä½äº†ã€‚ä¸€èˆ¬åœ¨åˆå§‹åŒ–ä¿¡æ¯ä¸å˜åŒ–çš„æƒ…å†µä¸‹ï¼Œå…‹éš†æ˜¯æœ€å¥½çš„æ–¹æ³•ã€‚è¿™æ—¢éšè—äº†å¯¹è±¡åˆ›é€ çš„ç»†èŠ‚ï¼Œåˆå¯¹æ€§èƒ½æ˜¯å¤§å¤§çš„æå‡ã€‚  æ¨¡å¼é€‚åˆåœºæ™¯  å¯¹è±¡ç§ç±»ç¹å¤šï¼Œæ— æ³•å°†å…¶æ•´åˆåˆ°ä¸€ä¸ªç±»ä¸­ï¼Œå¦‚æœè¦è¿™äº›å¯¹è±¡åˆ†åˆ«ä½œä¸ºä¸€ä¸ªç±»ï¼Œåˆ™éœ€è¦ç¼–å†™å¾ˆå¤šç±»æ–‡ä»¶ï¼› ç”Ÿæˆå®ä¾‹çš„è¿‡ç¨‹å¤ªå¤æ‚ï¼Œéš¾ä»¥æ ¹æ®ç±»æ¥ç”Ÿæˆå®ä¾‹ï¼› æƒ³è¦è®©ç”Ÿæˆå®ä¾‹çš„æ¡†æ¶ä¾èµ–å…·ä½“çš„ç±»ï¼Œè¿™æ—¶ä¸èƒ½æŒ‡å®šç±»åæ¥ç”Ÿæˆå®ä¾‹ï¼Œè€Œæ˜¯äº‹å…ˆâ€œæ³¨å†Œâ€ä¸€ä¸ªâ€œåŸå‹â€å®ä¾‹ï¼Œç„¶åé€šè¿‡å¤åˆ¶è¯¥å®ä¾‹æ¥ç”Ÿæˆæ–°çš„å®ä¾‹ã€‚  Springé‡Œçš„Prototypeæ¨¡å¼   åŸå‹beançš„åˆ›å»º\n\r\rbean\r\r åˆ›å»ºåŸå‹beanéœ€è¦ç‰¹åˆ«å£°æ˜  1  \u0026lt;bean id=\u0026#34;hello\u0026#34; class=\u0026#34;com.zlx.demo.Hello\u0026#34; scope=\u0026#34;prototype\u0026#34;/\u0026gt;\r  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49  protected \u0026lt;T\u0026gt; T doGetBean(\rfinal String name, final Class\u0026lt;T\u0026gt; requiredType, final Object[] args, boolean typeCheckOnly)\rthrows BeansException {\rfinal String beanName = transformedBeanName(name);\rObject bean;\r// Eagerly check singleton cache for manually registered singletons.\r Object sharedInstance = getSingleton(beanName);\rif (sharedInstance != null \u0026amp;\u0026amp; args == null) {\r...\r}\relse {\r...\rtry {\r...\r// Create bean instance.\r if (mbd.isSingleton()) {\r...\r}\r//åˆ›å»ºåŸå‹bean\r else if (mbd.isPrototype()) {\r// It\u0026#39;s a prototype -\u0026gt; create a new instance.\r Object prototypeInstance = null;\rtry {\rbeforePrototypeCreation(beanName);\rprototypeInstance = createBean(beanName, mbd, args);\r}\rfinally {\rafterPrototypeCreation(beanName);\r}\rbean = getObjectForBeanInstance(prototypeInstance, name, beanName, mbd);\r}\relse {\r...\r}\r}\rcatch (BeansException ex) {\rcleanupAfterBeanCreationFailure(beanName);\rthrow ex;\r}\r}\r...\rreturn (T) bean;\r}\r  \r\r   UMLç±»å›¾å¦‚ä¸‹ å„éƒ¨åˆ†ä»£ç å¦‚ä¸‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22  package cn.ling.prototype;\rimport java.util.HashMap;\r/**\r* @Author:ling\r* @Date:2020/4/30 21:08\r* @Version:1.0\r*/\rpublic class Manager {\rprivate HashMap showCase = new HashMap();\rpublic void register (String name , Product proto) {\rshowCase.put(name, proto) ;\r}\rpublic Product create (String protoname) {\rProduct product = (Product) showCase.get(protoname);\rreturn product.createClone();\r}\r}\r  1 2 3 4 5 6 7  package cn.ling.prototype;\rpublic interface Product extends Cloneable{\rpublic abstract void use(String s) ;\rpublic abstract Product createClone() ;\r}\r  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38  package cn.ling.prototype;\r/**\r* @Author:ling\r* @Date:2020/4/30 21:12\r* @Version:1.0\r*/\rpublic class MessageBox implements Product {\rprivate char decochar;\rpublic MessageBox (char decochar) {\rthis.decochar = decochar ;\r}\r@Override\rpublic void use(String s) {\rint length = s.getBytes().length;\rfor (int i = 0 ; i \u0026lt; length + 4 ; i++) {\rSystem.out.print(decochar);\r}\rSystem.out.println(\u0026#34;\u0026#34;);\rSystem.out.println(decochar + \u0026#34;\u0026#34; + s + \u0026#34;\u0026#34; + decochar);\rfor (int i = 0 ; i \u0026lt; length + 4 ; i++){\rSystem.out.print(decochar);\r}\rSystem.out.println(\u0026#34;\u0026#34;);\r}\r@Override\rpublic Product createClone() {\rProduct p = null ;\rtry {\rp = (Product) clone();\r} catch (CloneNotSupportedException e) {\re.printStackTrace();\r}\rreturn p;\r}\r}\r  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36  package cn.ling.prototype;\r/**\r* @Author:ling\r* @Date:2020/4/30 21:20\r* @Version:1.0\r*/\rpublic class UnderlinePen implements Product {\rprivate char ulchar ;\rpublic UnderlinePen (char ulchar) {\rthis.ulchar = ulchar;\r}\r@Override\rpublic void use(String s) {\rint length = s.getBytes().length;\rSystem.out.println(\u0026#34;\\\u0026#34;\u0026#34; + s + \u0026#34;\\\u0026#34;\u0026#34;);\rSystem.out.println(\u0026#34; \u0026#34;);\rfor (int i = 0 ; i \u0026lt; length + 4 ; i++) {\rSystem.out.print(ulchar);\r}\rSystem.out.println(\u0026#34;\u0026#34;);\r}\r@Override\rpublic Product createClone() {\rProduct p = null ;\rtry {\rp = (Product) clone();\r} catch (CloneNotSupportedException e) {\re.printStackTrace();\r}\rreturn p;\r}\r}\r  package cn.ling.prototype;\r/**\r* @Author:ling\r* @Date:2020/4/30 21:30\r* @Version:1.0\r*/\rpublic class Main {\rpublic static void main(String[] args) {\rManager manager = new Manager();\rUnderlinePen underlinePen = new UnderlinePen('~') ;\rMessageBox mbox = new MessageBox('*') ;\rMessageBox sbox = new MessageBox('/') ;\rmanager.register(\u0026quot;Strong message\u0026quot;, underlinePen);\rmanager.register(\u0026quot;warning box\u0026quot;, mbox);\rmanager.register(\u0026quot;slash box\u0026quot;, sbox);\rProduct p1 = manager.create(\u0026quot;Strong message\u0026quot;) ;\rp1.use(\u0026quot;Hello world\u0026quot;);\rProduct p2 = manager.create(\u0026quot;warning box\u0026quot;);\rp2.use(\u0026quot;Hello world\u0026quot;);\rProduct p3 = manager.create(\u0026quot;slash box\u0026quot;);\rp3.use(\u0026quot;Hello world\u0026quot;);\r}\r}\rJavaçš„å…‹éš†æ–¹æ³•  Javaçš„æ‰€æœ‰ç±»éƒ½æ˜¯ä»java.lang.Objectç±»ç»§æ‰¿è€Œæ¥çš„ï¼Œè€ŒObjectç±»æä¾›protected Object clone()æ–¹æ³•å¯¹å¯¹è±¡è¿›è¡Œå¤åˆ¶ï¼Œå­ç±»å½“ç„¶ä¹Ÿå¯ä»¥æŠŠè¿™ä¸ªæ–¹æ³•ç½®æ¢æ‰ï¼Œæä¾›æ»¡è¶³è‡ªå·±éœ€è¦çš„å¤åˆ¶æ–¹æ³•ã€‚å¯¹è±¡çš„å¤åˆ¶æœ‰ä¸€ä¸ªåŸºæœ¬é—®é¢˜ï¼Œå°±æ˜¯å¯¹è±¡é€šå¸¸éƒ½æœ‰å¯¹å…¶ä»–çš„å¯¹è±¡çš„å¼•ç”¨ã€‚å½“ä½¿ç”¨Objectç±»çš„clone()æ–¹æ³•æ¥å¤åˆ¶ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œæ­¤å¯¹è±¡å¯¹å…¶ä»–å¯¹è±¡çš„å¼•ç”¨ä¹ŸåŒæ—¶ä¼šè¢«å¤åˆ¶ä¸€ä»½ Javaè¯­è¨€æä¾›çš„Cloneableæ¥å£åªèµ·ä¸€ä¸ªä½œç”¨ï¼Œå°±æ˜¯åœ¨è¿è¡Œæ—¶æœŸé€šçŸ¥Javaè™šæ‹Ÿæœºå¯ä»¥å®‰å…¨åœ°åœ¨è¿™ä¸ªç±»ä¸Šä½¿ç”¨clone()æ–¹æ³•ã€‚é€šè¿‡è°ƒç”¨è¿™ä¸ªclone()æ–¹æ³•å¯ä»¥å¾—åˆ°ä¸€ä¸ªå¯¹è±¡çš„å¤åˆ¶ã€‚ç”±äºObjectç±»æœ¬èº«å¹¶ä¸å®ç°Cloneableæ¥å£ï¼Œå› æ­¤å¦‚æœæ‰€è€ƒè™‘çš„ç±»æ²¡æœ‰å®ç°Cloneableæ¥å£æ—¶ï¼Œè°ƒç”¨clone()æ–¹æ³•ä¼šæŠ›å‡ºCloneNotSupportedExceptionå¼‚å¸¸ã€‚  å…‹éš†éœ€æ»¡è¶³çš„æ¡ä»¶ clone()æ–¹æ³•å°†å¯¹è±¡å¤åˆ¶äº†ä¸€ä»½å¹¶è¿”è¿˜ç»™è°ƒç”¨è€…ã€‚æ‰€è°“â€œå¤åˆ¶â€çš„å«ä¹‰ä¸clone()æ–¹æ³•æ˜¯æ€ä¹ˆå®ç°çš„ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œclone()æ–¹æ³•æ»¡è¶³ä»¥ä¸‹çš„æè¿°ï¼š\nã€€ï¼ˆ1ï¼‰å¯¹ä»»ä½•çš„å¯¹è±¡xï¼Œéƒ½æœ‰ï¼šx.clone()!=xã€‚æ¢è¨€ä¹‹ï¼Œå…‹éš†å¯¹è±¡ä¸åŸå¯¹è±¡ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚\nã€€ï¼ˆ2ï¼‰å¯¹ä»»ä½•çš„å¯¹è±¡xï¼Œéƒ½æœ‰ï¼šx.clone().getClass() == x.getClass()ï¼Œæ¢è¨€ä¹‹ï¼Œå…‹éš†å¯¹è±¡ä¸åŸå¯¹è±¡çš„ç±»å‹ä¸€æ ·ã€‚\nã€€ï¼ˆ3ï¼‰å¦‚æœå¯¹è±¡xçš„equals()æ–¹æ³•å®šä¹‰å…¶æ°å½“çš„è¯ï¼Œé‚£ä¹ˆx.clone().equals(x)åº”å½“æˆç«‹çš„ã€‚\nã€€åœ¨JAVAè¯­è¨€çš„APIä¸­ï¼Œå‡¡æ˜¯æä¾›äº†clone()æ–¹æ³•çš„ç±»ï¼Œéƒ½æ»¡è¶³ä¸Šé¢çš„è¿™äº›æ¡ä»¶ã€‚JAVAè¯­è¨€çš„è®¾è®¡å¸ˆåœ¨è®¾è®¡è‡ªå·±çš„clone()æ–¹æ³•æ—¶ï¼Œä¹Ÿåº”å½“éµå®ˆç€ä¸‰ä¸ªæ¡ä»¶ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸Šé¢çš„ä¸‰ä¸ªæ¡ä»¶ä¸­çš„å‰ä¸¤ä¸ªæ˜¯å¿…éœ€çš„ï¼Œè€Œç¬¬ä¸‰ä¸ªæ˜¯å¯é€‰çš„ã€‚\næµ…å…‹éš†å’Œæ·±å…‹éš† -æ— è®ºä½ æ˜¯è‡ªå·±å®ç°å…‹éš†æ–¹æ³•ï¼Œè¿˜æ˜¯é‡‡ç”¨Javaæä¾›çš„å…‹éš†æ–¹æ³•ï¼Œéƒ½å­˜åœ¨ä¸€ä¸ªæµ…åº¦å…‹éš†å’Œæ·±åº¦å…‹éš†çš„é—®é¢˜ã€‚\n æµ…åº¦å…‹éš†  ã€€åªè´Ÿè´£å…‹éš†æŒ‰å€¼ä¼ é€’çš„æ•°æ®ï¼ˆæ¯”å¦‚åŸºæœ¬æ•°æ®ç±»å‹ã€Stringç±»å‹ï¼‰ï¼Œè€Œä¸å¤åˆ¶å®ƒæ‰€å¼•ç”¨çš„å¯¹è±¡ï¼Œæ¢è¨€ä¹‹ï¼Œæ‰€æœ‰çš„å¯¹å…¶ä»–å¯¹è±¡çš„å¼•ç”¨éƒ½ä»ç„¶æŒ‡å‘åŸæ¥çš„å¯¹è±¡ã€‚\n æ·±åº¦å…‹éš†  ã€€é™¤äº†æµ…åº¦å…‹éš†è¦å…‹éš†çš„å€¼å¤–ï¼Œè¿˜è´Ÿè´£å…‹éš†å¼•ç”¨ç±»å‹çš„æ•°æ®ã€‚é‚£äº›å¼•ç”¨å…¶ä»–å¯¹è±¡çš„å˜é‡å°†æŒ‡å‘è¢«å¤åˆ¶è¿‡çš„æ–°å¯¹è±¡ï¼Œè€Œä¸å†æ˜¯åŸæœ‰çš„é‚£äº›è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚æ¢è¨€ä¹‹ï¼Œæ·±åº¦å…‹éš†æŠŠè¦å¤åˆ¶çš„å¯¹è±¡æ‰€å¼•ç”¨çš„å¯¹è±¡éƒ½å¤åˆ¶äº†ä¸€éï¼Œè€Œè¿™ç§å¯¹è¢«å¼•ç”¨åˆ°çš„å¯¹è±¡çš„å¤åˆ¶å«åšé—´æ¥å¤åˆ¶ã€‚\nã€€æ·±åº¦å…‹éš†è¦æ·±å…¥åˆ°å¤šå°‘å±‚ï¼Œæ˜¯ä¸€ä¸ªä¸æ˜“ç¡®å®šçš„é—®é¢˜ã€‚åœ¨å†³å®šä»¥æ·±åº¦å…‹éš†çš„æ–¹å¼å¤åˆ¶ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œå¿…é¡»å†³å®šå¯¹é—´æ¥å¤åˆ¶çš„å¯¹è±¡æ—¶é‡‡å–æµ…åº¦å…‹éš†è¿˜æ˜¯ç»§ç»­é‡‡ç”¨æ·±åº¦å…‹éš†ã€‚å› æ­¤ï¼Œåœ¨é‡‡å–æ·±åº¦å…‹éš†æ—¶ï¼Œéœ€è¦å†³å®šå¤šæ·±æ‰ç®—æ·±ã€‚æ­¤å¤–ï¼Œåœ¨æ·±åº¦å…‹éš†çš„è¿‡ç¨‹ä¸­ï¼Œå¾ˆå¯èƒ½ä¼šå‡ºç°å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œå¿…é¡»å°å¿ƒå¤„ç†ã€‚\nåˆ©ç”¨åºåˆ—åŒ–å®ç°æ·±åº¦å…‹éš†  æŠŠå¯¹è±¡å†™åˆ°æµé‡Œçš„è¿‡ç¨‹æ˜¯åºåˆ—åŒ–(Serialization)è¿‡ç¨‹ï¼›è€ŒæŠŠå¯¹è±¡ä»æµä¸­è¯»å‡ºæ¥çš„è¿‡ç¨‹åˆ™å«ååºåˆ—åŒ–(Deserialization)è¿‡ç¨‹ã€‚åº”å½“æŒ‡å‡ºçš„æ˜¯ï¼Œå†™åˆ°æµé‡Œçš„æ˜¯å¯¹è±¡çš„ä¸€ä¸ªæ‹·è´ï¼Œè€ŒåŸå¯¹è±¡ä»ç„¶å­˜åœ¨äºJVMé‡Œé¢ã€‚ åœ¨Javaè¯­è¨€é‡Œæ·±åº¦å…‹éš†ä¸€ä¸ªå¯¹è±¡ï¼Œå¸¸å¸¸å¯ä»¥å…ˆä½¿å¯¹è±¡å®ç°Serializableæ¥å£ï¼Œç„¶åæŠŠå¯¹è±¡ï¼ˆå®é™…ä¸Šåªæ˜¯å¯¹è±¡çš„æ‹·è´ï¼‰å†™åˆ°ä¸€ä¸ªæµé‡Œï¼ˆåºåˆ—åŒ–ï¼‰ï¼Œå†ä»æµé‡Œè¯»å›æ¥ï¼ˆååºåˆ—åŒ–ï¼‰ï¼Œä¾¿å¯ä»¥é‡å»ºå¯¹è±¡ã€‚ è¿™æ ·åšçš„å‰æå°±æ˜¯å¯¹è±¡ä»¥åŠå¯¹è±¡å†…éƒ¨æ‰€æœ‰å¼•ç”¨åˆ°çš„å¯¹è±¡éƒ½æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œå¦åˆ™ï¼Œå°±éœ€è¦ä»”ç»†è€ƒå¯Ÿé‚£äº›ä¸å¯åºåˆ—åŒ–çš„å¯¹è±¡å¯å¦è®¾æˆtransientï¼Œä»è€Œå°†ä¹‹æ’é™¤åœ¨å¤åˆ¶è¿‡ç¨‹ä¹‹å¤–ã€‚ æµ…åº¦å…‹éš†æ˜¾ç„¶æ¯”æ·±åº¦å…‹éš†æ›´å®¹æ˜“å®ç°ï¼Œå› ä¸ºJavaè¯­è¨€çš„æ‰€æœ‰ç±»éƒ½ä¼šç»§æ‰¿ä¸€ä¸ªclone()æ–¹æ³•ï¼Œè€Œè¿™ä¸ªclone()æ–¹æ³•æ‰€åšçš„æ­£å¼æµ…åº¦å…‹éš†ã€‚æœ‰ä¸€äº›å¯¹è±¡ï¼Œæ¯”å¦‚çº¿ç¨‹(Thread)å¯¹è±¡æˆ–Socketå¯¹è±¡ï¼Œæ˜¯ä¸èƒ½ç®€å•å¤åˆ¶æˆ–å…±äº«çš„ã€‚ä¸ç®¡æ˜¯ä½¿ç”¨æµ…åº¦å…‹éš†è¿˜æ˜¯æ·±åº¦å…‹éš†ï¼Œåªè¦æ¶‰åŠè¿™æ ·çš„é—´æ¥å¯¹è±¡ï¼Œå°±å¿…é¡»æŠŠé—´æ¥å¯¹è±¡è®¾æˆtransientè€Œä¸äºˆå¤åˆ¶ï¼›æˆ–è€…ç”±ç¨‹åºè‡ªè¡Œåˆ›å»ºå‡ºç›¸å½“çš„åŒç§å¯¹è±¡ï¼Œæƒä¸”å½“åšå¤åˆ¶ä»¶ä½¿ç”¨ã€‚  æ¨¡å¼æ€»ç»“  åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼ŒProductæ¥å£å’ŒManagerç±»ä¸­ä»£ç ä¸­å®Œå…¨æ²¡æœ‰å‡ºç°MessageBoxç±»å’ŒUnderlinePenç±»çš„åå­—ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ç‹¬ç«‹ä¿®æ”¹Productå’ŒManagerï¼Œä¸å—MessageBoxç±»å’ŒUnderlinePenç±»çš„å½±å“ï¼Œä¸€æ—¦åœ¨ç±»ä¸­ä½¿ç”¨äº†åˆ«çš„ç±»åï¼Œå°±æ„å‘³ç€è¯¥ç±»ä¸å…¶ä»–ç±»ç´§å¯†çš„è€¦åˆåœ¨äº†ä¸€èµ·ã€‚  ","description":"tabs, code-tabs, expand, alert, warning, notice, img, box","id":37,"section":"posts","tags":["è®¾è®¡æ¨¡å¼"],"title":"Prototypeæ¨¡å¼","uri":"https://mrxiaoling.github.io/en/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/prototype%E6%A8%A1%E5%BC%8F-/"},{"content":"è®¡ç®—æœºç½‘ç»œæ¦‚è¿°  å‚è€ƒï¼šã€ŠTCP/IPè¯¦è§£ å·1ï¼šåè®®ã€‹\nBç«™UPï¼šæ¹–ç§‘å¤§æ•™ä¹¦åŒ  https://space.bilibili.com/360996402/\nOSIä½“ç³»ç»“æ„ï¼š https://blog.csdn.net/taotongning/article/details/81352985\nhttps://blog.csdn.net/qq_37954088/article/details/80171093\n ç½‘ç»œæ•°æ®äº¤äº’æ–¹æ³•   ä¸‰ç§äº¤æ¢æ–¹å¼ï¼š\n ç”µè·¯äº¤æ¢ åˆ†ç»„äº¤æ¢ æŠ¥æ–‡äº¤æ¢    ç”µè·¯äº¤æ¢çš„ 3 ä¸ªæ­¥éª¤\n å»ºç«‹è¿æ¥ï¼ˆåˆ†é…é€šä¿¡èµ„æºï¼‰ é€šè¯ï¼ˆä¸€ç›´å ç”¨é€šä¿¡èµ„æºï¼‰ é‡Šæ”¾è¿æ¥ï¼ˆå½’è¿˜é€šä¿¡èµ„æºï¼‰   åˆ†ç»„äº¤æ¢\nå°†å¾…å‘é€çš„èµ„æºåˆ†è§£æˆä¸€å®šå­—èŠ‚æ•°çš„æ•°å­—ä¿¡æ¯â€œå—â€ç‹¬ç«‹é€šè¿‡ç½‘ç»œï¼Œæ¥è‡ªä¸åŒçš„å—å¯ä»¥ç»„åˆï¼Œè€Œä¸”ä»¥åå¯ä»¥åˆ†è§£ï¼Œè¿™è¢«ç§°ä¸ºå¤šè·¯å¤ç”¨ã€‚  ä¸‰ç§æ–¹å¼çš„å¯¹æ¯”  ç”µè·¯äº¤æ¢ä¼˜ç‚¹      ä¼˜ç‚¹ ç¼ºç‚¹     åˆ†ç»„äº¤æ¢ 1. æ— éœ€å»ºç«‹è¿æ¥ï¼› 2. çº¿è·¯åˆ©ç”¨ç‡é«˜ï¼› 3. ç®€åŒ–äº†å­˜å‚¨ç®¡ç†ï¼› 4. åŠ é€Ÿä¼ è¾“ï¼› 5. å‡å°‘å‡ºé”™ç‡ 1. å¼•èµ·äº†è½¬å‘æ—¶å»¶ï¼› 2. éœ€è¦ä¼ è¾“é¢å¤–çš„ä¿¡æ¯ï¼Œä¾‹å¦‚æºåœ°å€ï¼Œç›®çš„åœ°å€ï¼› 3. å¯¹äºæ•°æ®æŠ¥å­˜åœ¨å¤±åºï¼Œä¸¢å¤±æˆ–é‡å¤åˆ†ç»„çš„é—®é¢˜ï¼›å¯¹äºè™šç”µè·¯æœåŠ¡ï¼Œå­˜åœ¨å‘¼å«å»ºç«‹ï¼Œæ•°æ®ä¼ è¾“å’Œè™šç”µè·¯é‡Šæ”¾ä¸‰ä¸ªè¿‡ç¨‹   ç”µè·¯äº¤æ¢ 1. æ—¶å»¶å° ï¼›2.æœ‰åºä¼ è¾“ ï¼›3. æ— å†²çªï¼› 4. é€‚ç”¨èŒƒå›´å¹¿ï¼› 5. å®ç”¨æ€§å¼ºï¼› 6. æ§åˆ¶ç®€å• 1. å»ºç«‹è¿æ¥æ—¶é—´é•¿ï¼›2. çº¿è·¯ç‹¬å ï¼Œä½¿ç”¨æ•ˆç‡ä½ï¼›3. çµæ´»æ€§å·®ï¼› 4. éš¾ä»¥è§„æ ¼åŒ–   æŠ¥æ–‡äº¤æ¢ 1. æ— éœ€å»ºç«‹è¿æ¥ï¼› 2. åŠ¨æ€åˆ†é…çº¿è·¯ï¼› 3. æé«˜çº¿è·¯å¯é æ€§ï¼› 4. æé«˜çº¿è·¯åˆ©ç”¨ç‡ï¼› 5. æä¾›å¤šç›®æ ‡æœåŠ¡ 1. å¼•èµ·äº†è½¬å‘æ—¶å»¶ï¼› 2. éœ€è¦è¾ƒå¤§çš„å­˜å‚¨ç©ºé—´ï¼› 3. éœ€è¦ä¼ è¾“é¢å¤–çš„ä¿¡æ¯ã€‚    ç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡ å¸¦å®½  ç”¨æ¥è¡¨ç¤ºç½‘ç»œçš„é€šä¿¡çº¿è·¯æ‰€èƒ½ä¼ é€æ•°æ®çš„èƒ½åŠ›ï¼Œå³å•ä½æ—¶é—´å†…ä»ç½‘ç»œä¸­çš„æŸä¸€ç‚¹åˆ°å¦ä¸€ç‚¹çš„æœ€é«˜é€Ÿç‡ï¼Œå•ä½ï¼šb/s,kb/s,Mb/s,Gb/s,Tb/sã€‚  é€Ÿç‡ æ¯”ç‰¹ï¼šè®¡ç®—æœºä¸­æ•°æ®é‡çš„å•ä½ï¼Œä¹Ÿæ˜¯ä¿¡æ¯è®ºä¸­æ•°æ®é‡çš„å•ä½ã€‚ä¸€ä¸ªæ¯”ç‰¹å°±æ˜¯äºŒè¿›åˆ¶ä¸­çš„ä¸€ä¸ªâ€œ0â€æˆ–ä¸€ä¸ªâ€œ1â€ï¼Œå¸¸è§æ¢ç®—ï¼š\n 8bit = 1 Byte KB = 2^10B\nMB = KÂ·KB=2^10Â·2^10B=2^20B\nGB=KÂ·MB = 2^30B\nTB = KÂ·GB = 2^40B  é€Ÿç‡ï¼šè¿æ¥åœ¨è®¡ç®—æœºç½‘ç»œçš„ä¸»æœºåœ¨ä¼ é€æ¯”ç‰¹çš„é€Ÿç‡ï¼Œä¹Ÿç§°ä¸ºæ¯”ç‰¹é€Ÿç‡æˆ–æ•°æ®ç‡ã€‚\n  bit/s (b/s , bps)\nkb/s = 10^3 b/s\nMb/s = 10^3Â·10^3b/s\n  ååé‡  å•ä½æ—¶é—´å†…é€šè¿‡æŸä¸ªç½‘ç»œï¼ˆä¿¡é“ï¼Œæ¥å£ï¼‰çš„æ•°æ®é‡ã€‚  æ—¶å»¶ ç½‘ç»œæ—¶å»¶=å‘é€æ—¶å»¶+ä¼ æ’­æ—¶å»¶+ å¤„ç†æ—¶å»¶\n å‘é€æ—¶å»¶ï¼šåˆ†ç»„é•¿åº¦(b)/å‘é€é€Ÿç‡(b/s) ä¼ æ’­æ—¶å»¶ï¼šä¿¡é“é•¿åº¦(m)/ç”µç£æ³¢ä¼ æ’­é€Ÿç‡(m/s) å¤„ç†æ—¶å»¶ï¼šä¸å®¹æ˜“è®¡ç®—  æ—¶å»¶å¸¦å®½ç§¯  æ—¶å»¶å¸¦å®½ç§¯ = ä¼ æ’­æ—¶å»¶*å¸¦å®½ åˆç§°ä»¥æ¯”ç‰¹ä¸ºå•ä½çš„é“¾è·¯é•¿åº¦  å¾€è¿”æ—¶é—´ï¼ˆRound-Trip Timeï¼‰  åŒå‘äº¤äº’ä¸€æ¬¡æ‰€éœ€è¦çš„çš„æ—¶é—´  åˆ©ç”¨ç‡  åˆ©ç”¨ç‡åŒ…æ‹¬ä¿¡é“åˆ©ç”¨ç‡å’Œç½‘ç»œåˆ©ç”¨ç‡ ä¿¡é“åˆ©ç”¨ç‡ï¼šè¡¨ç¤ºä¿¡é“æœ‰ç™¾åˆ†ä¹‹å‡ çš„æ—¶é—´æ˜¯æœ‰æ•°æ®é€šè¿‡çš„ï¼› ç½‘ç»œåˆ©ç”¨ç‡ï¼š å…¨ç½‘ç»œçš„ä¿¡é“åˆ©ç”¨ç‡çš„åŠ æƒå¹³å‡  åˆ©ç”¨ç‡å¹¶éè¶Šé«˜è¶Šå¥½â€”â€”â€”â€”â€”â€”æ ¹æ®æ’é˜Ÿè®ºï¼Œè¯¥ä¿¡æ¯å¼•èµ·çš„æ—¶å»¶ä¼šè¿…é€Ÿå¢åŠ \rä¸¢åŒ…ç‡  å³åˆ†ç»„ä¸¢å¤±ç‡ï¼ŒæŒ‡åœ¨ä¸€å®šçš„æ—¶é—´èŒƒå›´å†…ï¼Œä¼ è¾“è¿‡ç¨‹ä¸­ä¸¢å¤±çš„åˆ†ç»„æ•°é‡ä¸æ€»åˆ†ç»„æ•°é‡çš„æ¯”ç‡ åˆ†ç»„ä¸¢å¤±çš„ä¸¤ç§ä¸»è¦æƒ…å†µï¼š   åˆ†ç»„åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‡ºç°è¯¯ç ï¼Œè¢«ç»“ç‚¹ä¸¢å¼ƒï¼› åˆ†ç»„åœ¨åˆ°è¾¾å¦ä¸€å°é˜Ÿåˆ—å·²æ»¡çš„åˆ†ç»„äº¤æ¢æœºæ—¶è¢«ä¸¢å¼ƒï¼›åœ¨é€šä¿¡é‡è¾ƒå¤§æ—¶å°±å¯èƒ½é€ æˆç½‘ç»œæ‹¥å¡ã€‚  è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„åˆ†å±‚ TCP/IPä½“ç³»ç»“æ„   TCP/IPä½“ç³»ç»“æ„çš„äº”å±‚åˆ†åˆ«ä¸ºï¼šåº”ç”¨å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ã€æ•°æ®é“¾è·¯å±‚ã€ç‰©ç†å±‚\n  å…¶ä¸­ç‰©ç†å±‚å¯ä»¥å½’ä¸ºç¡¬ä»¶æŠ€æœ¯ï¼Œæ•°æ®é“¾è·¯å±‚ï¼Œç½‘ç»œå±‚å’Œä¼ è¾“å±‚å¯ä»¥å½’ä¸ºç³»ç»Ÿå±‚ï¼Œè€Œåº”ç”¨å±‚å¯ä»¥å½’ä¸ºç”¨æˆ·å±‚ã€‚\nç‰©ç†å±‚\ræ•°æ®é“¾è·¯å±‚\rç½‘ç»œå±‚\rä¼ è¾“å±‚\råº”ç”¨å±‚\ræ€»ç»“\r\r å­—é¢æ„æ€è§£é‡Šï¼šç‰©ç†ä¼ è¾“ã€ç¡¬ä»¶ã€ç‰©ç†ç‰¹æ€§ã€‚ç‹­ä¹‰æ„æ€å¯ä»¥æ˜¯å…‰ç¼†ã€ç”µç¼†ã€åŒç»çº¿å’Œæ— çº¿ç”µæ³¢è¿™äº›ä¼ è¾“ä»‹è´¨ã€ç‰©ç†æ¥å£ï¼Œä¸­é—´ä¼ çš„æ˜¯ç”µä¿¡å·æˆ–å…‰ä¿¡å· \r\r æ ‡å¿—ç½‘ç»œä¸­çš„å„ä¸»æœºï¼ˆä¸»æœºç¼–ç é—®é¢˜ï¼Œä¾‹å¦‚MACåœ°å€ï¼‰ ä»ä¿¡å·æ‰€è¡¨ç¤ºçš„ä¸€ä¸²æ¯”ç‰¹æµä¸­åŒºåˆ†å‡ºåœ°å€å’Œæ•°æ® åè°ƒå„ä¸»æœºäº‰ç”¨æ€»çº¿\n \r\r æ ‡å¿—å„ç½‘ç»œä»¥åŠç½‘ç»œä¸­çš„å„ä¸»æœºï¼ˆç½‘ç»œå’Œä¸»æœºå…±åŒç¼–å€çš„é—®é¢˜ï¼Œä¾‹å¦‚IPåœ°å€ï¼‰ è·¯ç”±å™¨å¦‚ä½•è½¬å‘åˆ†ç»„ï¼Œå¦‚ä½•è¿›è¡Œè·¯ç”±é€‰æ‹©\n \r\r  ä¼ è¾“å±‚æ˜¯è´Ÿè´£åœ¨ä¼šè¯è¿›ç¨‹ä¹‹é—´å»ºå’Œç»´æŠ¤ç«¯â€”â€”ç«¯è¿æ¥çš„ï¼Œå®ç°ç½‘ç»œç¯å¢ƒä¸­åˆ†å¸ƒå¼é€šä¿¡ã€‚\n  è§£å†³è¿›ç¨‹ä¹‹é—´åŸºäºç½‘ç»œçš„é€šä¿¡é—®é¢˜\n  å‡ºç°ä¼ è¾“é”™è¯¯æ—¶ï¼Œå¦‚ä½•å¤„ç†\n  \r é€šè¿‡åº”ç”¨è¿›ç¨‹é—´çš„äº¤äº’æ¥å®Œæˆç‰¹å®šçš„ç½‘ç»œåº”ç”¨\n \r\r\r\r\r'use strict';\rvar containerId = JSON.parse(\"\\\"41ff45eac6c30962\\\"\");\rvar containerElem = document.getElementById(containerId);\rvar tabLinks = null;\rvar tabContents = null;\rvar ids = [];\rif (containerElem) {\rtabLinks = containerElem.querySelectorAll('.tab__link');\rtabContents = containerElem.querySelectorAll('.tab__content');\r}\rfor (var i = 0; i 0) {\rtabContents[0].style.display = 'block';\r}\r\n  OSIä½“ç³»ç»“æ„  OSIä½“ç³»ç»“æ„çš„ä¸ƒå±‚åˆ†åˆ«ä¸ºï¼šåº”ç”¨å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ã€æ•°æ®é“¾è·¯å±‚ã€ä¼šè¯å±‚ã€è¡¨ç¤ºå±‚ã€ç‰©ç†å±‚  ","description":"tabs, code-tabs, expand, alert, warning, notice, img, box","id":38,"section":"posts","tags":["ç½‘ç»œåè®®"],"title":"redis","uri":"https://mrxiaoling.github.io/en/posts/redis/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0/"},{"content":"Singletonæ¨¡å¼  å‚è€ƒï¼š1.ã€Šå›¾è§£è®¾è®¡æ¨¡å¼ã€‹\näº”ç§å•ä¾‹æ¨¡å¼ï¼š https://segmentfault.com/a/1190000018000917\nå•ä¾‹æ¨¡å¼æ¦‚å¿µï¼š https://blog.csdn.net/hb_csu/article/details/80504276\nJDKä¸­çš„å•ä¾‹æ¨¡å¼ï¼š https://blog.csdn.net/wobushixiaobailian/article/details/86744763\né™æ€å†…éƒ¨ç±»åŠ è½½æ—¶é—´ï¼š https://www.cnblogs.com/zouxiangzhongyan/p/10762540.html\nåå°„ä»¥åŠååºåˆ—åŒ–æ”»å‡»ï¼š https://www.cnblogs.com/happy4java/p/11206105.html\næšä¸¾æ€ä¹ˆä¿è¯çº¿ç¨‹å®‰å…¨ï¼š https://blog.csdn.net/ncuzengxiebo/article/details/80754107\n æ¨¡å¼å®šä¹‰  åœ¨è½¯ä»¶ç³»ç»Ÿè¿è¡Œè¿‡ç¨‹ä¸­ï¼ŒæŸä¸ªç±»åªå­˜åœ¨ä¸€ä¸ªå®ä¾‹ : ä¸€ä¸ªç±»å®ç°å•ä¾‹æ¨¡å¼æ—¶éœ€è¦å…·å¤‡ä»¥ä¸‹3ä¸ªæ¡ä»¶ï¼š ç±»çš„å†…éƒ¨å®šä¹‰ä¸€ä¸ªè¯¥ç±»çš„é™æ€ç§æœ‰æˆå‘˜å˜é‡ï¼› æ„é€ æ–¹æ³•ä¸ºç§æœ‰ï¼› æä¾›é™æ€å·¥å‚æ–¹æ³•ï¼Œä¾›å¤–éƒ¨è·å–ç±»çš„å®ä¾‹ï¼›  æ¨¡å¼ä¼˜ç‚¹ è§£å†³ä½•ç§é—®é¢˜  ä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶ä¸”æä¾›ä¸€ä¸ªè®¿é—®è¯¥å®ä¾‹çš„å…¨å±€è®¿é—®å…¥å£  æ¨¡å¼å¥½å¤„  ç”±äºå•ä¾‹æ¨¡å¼åªç”Ÿæˆä¸€ä¸ªå®ä¾‹ ï¼Œå‡å°‘äº†ç³»ç»Ÿç»™çš„æ€§èƒ½å¼€é”€ï¼Œå½“ä¸€ä¸ªå¯¹è±¡éœ€è¦äº§ç”Ÿæ—¶ï¼Œå½“æ—¶æ¶ˆè€—çš„èµ„æºè¾ƒå¤šã€‚é‚£ä¹ˆäº§ç”Ÿå¯¹è±¡æ—¶æ„å»ºçš„æ–¹å¼å°±å¯ä»¥é€šè¿‡å•ä¾‹å»æ„å»º ï¼› å•ä¾‹æ¨¡å¼å­˜åœ¨å…¨å±€è®¿é—®ç‚¹ï¼Œæ‰€ä»¥å¯ä»¥ä¼˜åŒ–å…±äº«èµ„æºè®¿é—®ã€‚  æ¨¡å¼å®ä¾‹  Windowsçš„ä»»åŠ¡ç®¡ç†å™¨ Windowsçš„å›æ”¶ç«™ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå•ä¾‹åº”ç”¨ é¡¹ç›®ä¸­çš„è¯»å–é…ç½®æ–‡ä»¶çš„å¯¹è±¡ æ•°æ®åº“çš„è¿æ¥æ±  Servletä¸­çš„Application Servlet SpringMVC Strutsä¸­çš„æ§åˆ¶å™¨ Springä¸­çš„Beané»˜è®¤ä¹Ÿæ˜¯å•ä¾‹çš„  æ¨¡å¼ä½¿ç”¨åœºæ™¯  éœ€è¦é¢‘ç¹å®ä¾‹åŒ–ç„¶åé”€æ¯çš„å¯¹è±¡ ï¼› åˆ›å»ºå¯¹è±¡æ—¶è€—æ—¶è¿‡å¤šæˆ–è€…è€—èµ„æºè¿‡å¤šï¼Œä½†åˆç»å¸¸ç”¨åˆ°çš„å¯¹è±¡ ï¼› æœ‰çŠ¶æ€çš„å·¥å…·ç±»å¯¹è±¡ ï¼› é¢‘ç¹è®¿é—®æ•°æ®åº“æˆ–æ–‡ä»¶çš„å¯¹è±¡ ï¼›  JDKé‡Œçš„Template Methodæ¨¡å¼   java.lang.Runtime\n  java.text. NumberFormat\n\r\rRuntime\r\r1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  /**\r* Every Java application has a single instance of class\r*/\rpublic class Runtime {\rprivate static Runtime currentRuntime = new Runtime();\r/**\r* Returns the runtime object associated with the current Java application.\r* Most of the methods of class \u0026lt;code\u0026gt;Runtime\u0026lt;/code\u0026gt; are instance\r* methods and must be invoked with respect to the current runtime object.\r*\r* @return the \u0026lt;code\u0026gt;Runtime\u0026lt;/code\u0026gt; object associated with the current\r* Java application.\r*/\rpublic static Runtime getRuntime() {\rreturn currentRuntime;\r}\r/** Don\u0026#39;t let anyone else instantiate this class */\rprivate Runtime() {}\r....\r}\r  \r\r   å„éƒ¨åˆ†ä»£ç å¦‚ä¸‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  package cn.ling.singleton;\r/**\r* é¥¿æ±‰å¼ï¼šçº¿ç¨‹å®‰å…¨ï¼Œè°ƒç”¨æ•ˆç‡é«˜ï¼Œä½†æ˜¯ä¸èƒ½å»¶æ—¶åŠ è½½\r* ç¼ºç‚¹:ç³»ç»ŸåŠ è½½æ—¶æ¶ˆè€—é¢å¤–èµ„æºï¼Œå¦‚æœè¯¥å®ä¾‹æ²¡æœ‰ä½¿ç”¨çš„æƒ…å†µä¼šé€ æˆèµ„æºæµªè´¹\r*/\rpublic class Singleton1 {\r//åœ¨ç±»åŠ è½½å¼è‡ªè¡Œå®ä¾‹åŒ–å¯¹è±¡,çº¿ç¨‹å®‰å…¨çš„,å› ä¸ºç±»åªåŠ è½½ä¸€æ¬¡\r //ç±»åˆå§‹åŒ–æ—¶ï¼Œç«‹å³åŠ è½½è¿™ä¸ªå¯¹è±¡\r private static Singleton1 instance = new Singleton1();\r//æ„é€ å™¨ç§æœ‰ æ— æ³•åˆ›å»ºå¯¹è±¡\r private Singleton1() {\r}\r//å¯¹å¤–æä¾›getæ–¹æ³•è·å– è¯¥ç±»çš„å®ä¾‹\r public static Singleton1 getInstance() {\rreturn instance;\r}\r}\r  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  package cn.ling.singleton;\r/**\r* æ‡’æ±‰å¼ï¼Œçº¿ç¨‹ä¸å®‰å…¨\r*/\rpublic class Singleton2 {\rprivate static Singleton2 instance = null ;\rprivate Singleton2 () {\r}\r//è°ƒç”¨æ—¶åŠ è½½å¯¹è±¡\r //ä¸‹é¢è¿™æ®µä»£ç  ä¸æ˜¯åŸå­æ€§æ“ä½œ ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜\r //å¦‚æœæƒ³è¦çº¿ç¨‹å®‰å…¨ï¼Œå¯åŠ ä¸Šsynchronizedå…³é”®å­—ï¼Œä½†æ˜¯è¿™æ ·æ•ˆç‡ä½ä¸‹\r public /**synchronized*/static Singleton2 getInstance() {\rif (instance == null) {\rinstance = new Singleton2();\r}\rreturn instance;\r}\r}\r  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27  package cn.ling.singleton;\r/**\r* æ‡’æ±‰å¼ï¼ˆåŒé‡åŒæ­¥é”ï¼‰\r*/\rpublic class Singleton3 {\rpublic static volatile Singleton3 instance = null ;\rprivate Singleton3() {\r}\r/**\r* è§£å†³äº†æ€§èƒ½é—®é¢˜ï¼Œæ¥è‡ªJVMçš„æŒ‡ä»¤é‡æ’åº\r* è§£å†³ï¼šåœ¨å¯¹è±¡ä¸­æ·»åŠ volatile å…³é”®å­—æ¥ ä¸è®©jvmå¯¹è¯¥ å¯¹è±¡åšä¼˜åŒ–\r* @return\r*/\rpublic static Singleton3 getInstance() {\rif (instance == null) {\rsynchronized (Singleton3.class) {\rif (instance == null) {\rinstance = new Singleton3();\r}\r}\r}\rreturn instance;\r}\r}\r  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  package cn.ling.singleton;\r/**\r* é™æ€å†…éƒ¨ç±»\r* é™æ€å†…éƒ¨ç±»å¼å’Œé¥¿æ±‰å¼ä¸€æ ·ï¼ŒåŒæ ·åˆ©ç”¨äº†ClassLoaderçš„æœºåˆ¶ä¿è¯äº†çº¿ç¨‹å®‰å…¨\r* åŒçš„æ˜¯ï¼Œé¥¿æ±‰å¼åœ¨Singletonç±»è¢«åŠ è½½æ—¶å°±åˆ›å»ºäº†ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œ\r* è€Œé™æ€å†…éƒ¨ç±»å³ä½¿Singletonç±»è¢«åŠ è½½ä¹Ÿä¸ä¼šåˆ›å»ºå•ä¾‹å¯¹è±¡ï¼Œ\r* é™¤éè°ƒç”¨é‡Œé¢çš„getInstance()æ–¹æ³•ã€‚å› ä¸ºå½“Singletonç±»è¢«åŠ è½½æ—¶\r* å…¶é™æ€å†…éƒ¨ç±»SingletonHolderæ²¡æœ‰è¢«ä¸»åŠ¨ä½¿ç”¨ã€‚åªæœ‰å½“è°ƒç”¨getInstanceæ–¹æ³•æ—¶ï¼Œ\r* æ‰ä¼šè£…è½½SingletonHolderç±»ï¼Œä»è€Œå®ä¾‹åŒ–å•ä¾‹å¯¹è±¡ã€‚\r* è¿™æ ·ï¼Œé€šè¿‡é™æ€å†…éƒ¨ç±»çš„æ–¹æ³•å°±å®ç°äº†lazy loadingï¼Œå¾ˆå¥½åœ°å°†æ‡’æ±‰å¼å’Œé¥¿æ±‰å¼ç»“åˆèµ·æ¥ï¼Œ\r* æ—¢å®ç°å»¶è¿ŸåŠ è½½ï¼Œä¿è¯ç³»ç»Ÿæ€§èƒ½ï¼Œä¹Ÿèƒ½ä¿è¯çº¿ç¨‹å®‰å…¨\r*/\rpublic class Singleton4 {\rprivate static class SingleInnerHolder {\rprivate static Singleton4 instance = new Singleton4();\r}\rprivate Singleton4() {\r}\rpublic static Singleton4 getInstance() {\rreturn SingleInnerHolder.instance;\r}\r}\r  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  package cn.ling.singleton;\r/**\r* @Author:ling\r* @Date:2020/4/23 13:19\r* @Version:1.0\r* æšä¸¾å•ä¾‹\r*/\rpublic enum Singleton5 {\r//å®ä¾‹åŒ–å¯¹è±¡\r INSTANCE ;\rvoid getInstance() {\r}\r}\r  æ¨¡å¼æ€»ç»“  æ‡’æ±‰å¼æ•ˆç‡æœ€ä½ï¼› å ç”¨èµ„æºå°‘ ä¸éœ€è¦å»¶æ—¶åŠ è½½ æšä¸¾ä¼˜äº é¥¿æ±‰å¼ ï¼› å ç”¨èµ„æºæ¯”è¾ƒå¤š éœ€è¦å»¶æ—¶åŠ è½½ é™æ€å†…éƒ¨ç±» ä¼˜äº æ‡’æ±‰å¼ ã€‚  ","description":"tabs, code-tabs, expand, alert, warning, notice, img, box","id":39,"section":"posts","tags":["è®¾è®¡æ¨¡å¼"],"title":"Singletonæ¨¡å¼","uri":"https://mrxiaoling.github.io/en/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/singleton%E6%A8%A1%E5%BC%8F/"},{"content":"ä¼ è¾“å±‚  å¦‚æœè¯´ç½‘ç»œå±‚ï¼ˆIPï¼‰æ¯”ä½œæ”¶è´§åœ°å€ï¼Œé‚£ä¹ˆä¼ è¾“å±‚ï¼ˆTCP\u0026amp;UDPï¼‰å†³å®šæ”¶è´§äººï¼ˆæ¥æ”¶çš„åº”ç”¨ç¨‹åºï¼‰ï¼Œä¸ºäº†å®ç°è¿™ä¸€åŠŸèƒ½ï¼Œä½¿ç”¨äº†ç«¯å£å·æ¥è¯†åˆ«åº”ç”¨ç¨‹åºã€‚ TCPæ˜¯é¢å‘è¿æ¥çš„ï¼Œå¯é çš„æµï¼ˆæµæŒ‡ä¸é—´æ–­çš„æ•°æ®ç»“æ„ï¼‰åè®®ã€‚TCPä¸ºäº†å®ç°å¯é ä¼ è¾“ï¼Œå®ç°â€œé¡ºåºæ§åˆ¶â€æˆ–â€œé‡å‘æ§åˆ¶â€æœºåˆ¶ï¼Œæ­¤å¤–è¿˜å…·å¤‡â€œæµæ§åˆ¶ï¼ˆæµé‡æ§åˆ¶ï¼‰â€ã€â€œæ‹¥å¡æ§åˆ¶â€ã€æé«˜ç½‘ç»œåˆ©ç”¨ç‡ç­‰åŠŸèƒ½ï¼› UDPæ˜¯ä¸å¯é çš„æ•°æ®åŒ…åè®®ã€‚è™½ç„¶å¯ä»¥ç¡®ä¿å‘é€æ¶ˆæ¯çš„å¤§å°ï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯æ¶ˆæ¯ä¸€å®šä¼šåˆ°è¾¾ï¼Œå¦‚æœéœ€è¦é‡å‘å¤„ç†ï¼Œåˆ™è¯¥æ“ä½œäº¤ç”±ç¨‹åºå®Œæˆã€‚ æ“ä½œç³»ç»Ÿä½¿ç”¨TCPæˆ–è€…UDPè¿›è¡Œé€šä¿¡æ—¶ï¼Œåˆä¼šå¹¿æ³›ä½¿ç”¨å¥—æ¥å­—ï¼ˆsocketï¼‰çš„APIï¼Œå¥—æ¥å­—ç”±ä¸¤ç»„IPï¼športç»„æˆã€‚  ç«¯å£å·  é“¾è·¯å±‚å’Œç½‘ç»œå±‚ä¸­çš„åœ°å€å«MACåœ°å€å’ŒIPåœ°å€ï¼Œå‰è€…ç”¨æ¥è¯†åˆ«åŒä¸€é“¾è·¯ä¸­ä¸åŒçš„è®¡ç®—æœºï¼Œåè€…ç”¨æ¥è¯†åˆ«TCP/IPç½‘ç»œä¸­äº’è¿çš„ä¸»æœºå’Œè·¯ç”±å™¨ã€‚ ä¼ è¾“å±‚ä¹Ÿæœ‰è¿™ç§ç±»ä¼¼åœ°å€çš„æ¦‚å¿µï¼Œå°±æ˜¯ç«¯å£å·ï¼Œç”¨æ¥è¯†åˆ«åŒä¸€å°è®¡ç®—æœºä¸­è¿›è¡Œé€šä¿¡çš„ä¸åŒç¨‹åºï¼Œå› æ­¤ä¹Ÿè¢«ç¨‹åºåœ°å€ã€‚  é€šè¿‡IPåœ°å€ã€ç«¯å£å·ã€åè®®å·è¿›è¡Œé€šä¿¡è¯†åˆ«  TCP/IPæˆ–è€…UDP/IP é€šå¸¸é‡‡ç”¨â€œæºåœ°å€IPåœ°å€â€ã€â€œç›®æ ‡IPåœ°å€â€ã€â€œåè®®å·â€ã€â€œæºç«¯å£å·â€ã€â€œç›®æ ‡ç«¯å£å·â€ï¼Œåªè¦æœ‰ä¸€é¡¹ä¸åŒï¼Œåˆ™è¢«è®¤ä¸ºæ˜¯å…¶ä»–é€šä¿¡ã€‚  ç«¯å£å·å¦‚ä½•ç¡®å®š  æ ‡å‡†æ—¢å®šçš„ç«¯å£å·ï¼ˆé™æ€æ–¹æ³•ï¼‰  è‡ªè¡ŒæŒ‡å®šç«¯å£å·ï¼Œä½†æ˜¯è¦é¿å¼€çŸ¥åç«¯å£å·ä»¥åŠæ³¨å†Œç«¯å£å·   æ—¶åºåˆ†é…æ³•ï¼ˆåŠ¨æ€æ–¹æ³•ï¼‰  ç¨‹åºæ— éœ€è®¾ç½®ç«¯å£å·ï¼Œå®Œå…¨äº¤ç”±æ“ä½œç³»ç»Ÿï¼ŒåŠ¨æ€åˆ†é…çš„ç«¯å£å·å–å€¼èŒƒå›´åœ¨49152åˆ°65535ä¹‹é—´ã€‚    ç«¯å£å·ä¸åè®®  ç«¯å£å·ç”±å…¶ä½¿ç”¨çš„ä¼ è¾“å±‚åè®®å†³å®šï¼Œæ‰€ä»¥ä¸åŒçš„ä¼ è¾“åè®®å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ç«¯å£å·  UDP  UDPï¼ŒUser Datagram Protocol UDP é€šå¸¸ç”¨äºä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š  åŒ…æ€»é‡è¾ƒå°‘çš„é€šä¿¡ï¼ˆDNSï¼ŒSNMPç­‰ï¼‰ è§†é¢‘ï¼ŒéŸ³é¢‘ç­‰å¤šåª’ä½“é€šä¿¡ï¼ˆå³æ—¶é€šä¿¡ï¼‰ é™å®šäºLANç­‰ç‰¹å®šç½‘ç»œä¸­åº”ç”¨ç¨‹åºä¸­çš„åº”ç”¨é€šä¿¡ å¹¿æ’­é€šä¿¡ï¼ˆå¹¿æ’­ï¼Œå¤šæ’­ï¼‰    TCP è¶…æ—¶é‡å‘å¦‚ä½•ç¡®å®š  é‡å‘è¶…æ—¶æŒ‡åœ¨é‡å‘æ•°æ®å‰ï¼Œç­‰å¾…ç¡®è®¤åº”ç­”åˆ°æ¥çš„é‚£ä¸ªç‰¹å®šæ—¶é—´é—´éš”ï¼Œå¦‚æœè¶…è¿‡äº†è¿™ä¸ªæ—¶é—´ä»æœªæ”¶åˆ°ç¡®è®¤åº”ç­”ï¼Œå‘é€ç«¯å°†è¿›è¡Œæ•°æ®é‡å‘ï¼› è¿™ä¸ªæ—¶é—´ä¼šéšç€ç½‘ç»œç¯å¢ƒä¸æ–­å˜åŒ–ï¼Œè€ŒTCPè¦æ±‚æ— è®ºåœ¨ä½•ç§ç¯å¢ƒä¸‹éƒ½éœ€è¦æä¾›é«˜æ€§èƒ½é€šä¿¡ï¼Œä¸ºæ­¤TCPåœ¨æ¯æ¬¡å‘åŒ…æ—¶éƒ½ä¼šè®¡ç®—å¾€è¿”æ—¶é—´åŠå…¶åå·®ï¼Œå°†è¿™ä¸ªå¾€è¿”æ—¶é—´å’Œåå·®ç›¸åŠ é‡å‘è¶…æ—¶çš„æ—¶é—´å°±èƒ½ç¡®ä¿â€œç¡®è®¤åº”ç­”ä¸€å®šèƒ½åœ¨è¿™ä¸ªæ—¶é—´å†…è¿”å›â€  è¿æ¥ç®¡ç†\u0026mdash;ä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹  TCPåœ¨æ•°æ®é€šä¿¡ä¹‹å‰ï¼Œé€šè¿‡TCPé¦–éƒ¨å‘é€SYNåŒ…ä½œä¸ºå»ºç«‹è¿æ¥çš„è¯·æ±‚ç­‰å¾…ç¡®è®¤åº”ç­”ï¼Œå¦‚ä¸Šå›¾ï¼Œä¸€ä¸ªè¿æ¥çš„å»ºç«‹å’Œæ–­å¼€ï¼Œæ­£å¸¸è‡³å°‘éœ€è¦æ¥å›å‘é€7ä¸ªåŒ…æ‰èƒ½å®Œæˆ å»ºç«‹è¿æ¥  å®¢æˆ·ç«¯é€šè¿‡å‘æœåŠ¡å™¨ç«¯å‘é€ä¸€ä¸ªSYNæ¥åˆ›å»ºä¸€ä¸ªä¸»åŠ¨æ‰“å¼€ï¼Œä½œä¸ºä¸‰æ¬¡æ¡æ‰‹çš„ä¸€éƒ¨åˆ†ã€‚å®¢æˆ·ç«¯æŠŠè¿™æ®µè¿æ¥çš„åºå·è®¾å®šä¸ºéšæœºæ•°Aã€‚  æœåŠ¡å™¨ç«¯åº”å½“ä¸ºä¸€ä¸ªåˆæ³•çš„SYNå›é€ä¸€ä¸ªSYN/ACKã€‚ACKçš„ç¡®è®¤ç åº”ä¸ºA+1ï¼ŒSYN/ACKåŒ…æœ¬èº«åˆæœ‰ä¸€ä¸ªéšæœºäº§ç”Ÿçš„åºå·Bã€‚ æœ€åï¼Œå®¢æˆ·ç«¯å†å‘é€ä¸€ä¸ªACKã€‚æ­¤æ—¶åŒ…çš„åºå·è¢«è®¾å®šä¸ºA+1ï¼Œè€ŒACKçš„ç¡®è®¤ç åˆ™ä¸ºB+1ã€‚å½“æœåŠ¡ç«¯æ”¶åˆ°è¿™ä¸ªACKçš„æ—¶å€™ï¼Œå°±å®Œæˆäº†ä¸‰æ¬¡æ¡æ‰‹ï¼Œå¹¶è¿›å…¥äº†è¿æ¥åˆ›å»ºçŠ¶æ€ã€‚     å¦‚æœæœåŠ¡å™¨ç«¯æ¥åˆ°äº†å®¢æˆ·ç«¯å‘çš„SYNåå›äº†SYN-ACKåå®¢æˆ·ç«¯æ‰çº¿äº†ï¼ŒæœåŠ¡å™¨ç«¯æ²¡æœ‰æ”¶åˆ°å®¢æˆ·ç«¯å›æ¥çš„ACKï¼Œé‚£ä¹ˆï¼Œè¿™ä¸ªè¿æ¥å¤„äºä¸€ä¸ªä¸­é—´çŠ¶æ€ï¼Œæ—¢æ²¡æˆåŠŸï¼Œä¹Ÿæ²¡å¤±è´¥ã€‚äºæ˜¯ï¼ŒæœåŠ¡å™¨ç«¯å¦‚æœåœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°çš„TCPä¼šé‡å‘SYN-ACKã€‚åœ¨Linuxä¸‹ï¼Œé»˜è®¤é‡è¯•æ¬¡æ•°ä¸º5æ¬¡ï¼Œé‡è¯•çš„é—´éš”æ—¶é—´ä»1så¼€å§‹æ¯æ¬¡éƒ½ç¿»å€ï¼Œ5æ¬¡çš„é‡è¯•æ—¶é—´é—´éš”ä¸º1s, 2s, 4s, 8s, 16sï¼Œæ€»å…±31sï¼Œç¬¬5æ¬¡å‘å‡ºåè¿˜è¦ç­‰32sæ‰çŸ¥é“ç¬¬5æ¬¡ä¹Ÿè¶…æ—¶äº†ï¼Œæ‰€ä»¥ï¼Œæ€»å…±éœ€è¦ 1s + 2s + 4s+ 8s+ 16s + 32s = 63sï¼ŒTCPæ‰ä¼šæ–­å¼€è¿™ä¸ªè¿æ¥ã€‚ä½¿ç”¨ä¸‰ä¸ªTCPå‚æ•°æ¥è°ƒæ•´è¡Œä¸ºï¼štcp_synack_retries å‡å°‘é‡è¯•æ¬¡æ•°ï¼›tcp_max_syn_backlogï¼Œå¢å¤§SYNè¿æ¥æ•°ï¼›tcp_abort_on_overflowå†³å®šè¶…å‡ºèƒ½åŠ›æ—¶çš„è¡Œä¸ºã€‚\n  æ–­å¼€è¿æ¥   åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­è¿æ¥çš„æ¯ä¸€ä¾§éƒ½ç‹¬ç«‹åœ°è¢«ç»ˆæ­¢ã€‚å½“ä¸€ä¸ªç«¯ç‚¹è¦åœæ­¢å®ƒè¿™ä¸€ä¾§çš„è¿æ¥ï¼Œå°±å‘å¯¹ä¾§å‘é€FINï¼Œå¯¹ä¾§å›å¤ACKè¡¨ç¤ºç¡®è®¤ã€‚å› æ­¤ï¼Œæ‹†æ‰ä¸€ä¾§çš„è¿æ¥è¿‡ç¨‹éœ€è¦ä¸€å¯¹FINå’ŒACKï¼Œåˆ†åˆ«ç”±ä¸¤ä¾§ç«¯ç‚¹å‘å‡ºã€‚\n  é¦–å…ˆå‘å‡ºFINçš„ä¸€ä¾§ï¼Œå¦‚æœç»™å¯¹ä¾§çš„FINå“åº”äº†ACKï¼Œé‚£ä¹ˆå°±ä¼šè¶…æ—¶ç­‰å¾…2*MSLæ—¶é—´ï¼Œç„¶åå…³é—­è¿æ¥ã€‚åœ¨è¿™æ®µè¶…æ—¶ç­‰å¾…æ—¶é—´å†…ï¼Œæœ¬åœ°çš„ç«¯å£ä¸èƒ½è¢«æ–°è¿æ¥ä½¿ç”¨ï¼›é¿å…å»¶æ—¶çš„åŒ…çš„åˆ°è¾¾ä¸éšåçš„æ–°è¿æ¥ç›¸æ··æ·†ã€‚RFC793å®šä¹‰äº†MSLä¸º2åˆ†é’Ÿï¼ŒLinuxè®¾ç½®æˆäº†30sã€‚å‚æ•°tcp_max_tw_bucketsæ§åˆ¶å¹¶å‘çš„TIME_WAITçš„æ•°é‡ï¼Œé»˜è®¤å€¼æ˜¯180000ï¼Œå¦‚æœè¶…é™ï¼Œé‚£ä¹ˆï¼Œç³»ç»Ÿä¼šæŠŠå¤šçš„TIME_WAITçŠ¶æ€çš„è¿æ¥ç»™destoryæ‰ï¼Œç„¶ååœ¨æ—¥å¿—é‡Œæ‰“ä¸€ä¸ªè­¦å‘Šï¼ˆå¦‚ï¼štime wait bucket table overflowï¼‰\n  è¿æ¥å¯ä»¥å·¥ä½œåœ¨TCPåŠå¼€çŠ¶æ€ã€‚å³ä¸€ä¾§å…³é—­äº†è¿æ¥ï¼Œä¸å†å‘é€æ•°æ®ï¼›ä½†å¦ä¸€ä¾§æ²¡æœ‰å…³é—­è¿æ¥ï¼Œä»å¯ä»¥å‘é€æ•°æ®ã€‚å·²å…³é—­çš„ä¸€ä¾§ä»ç„¶åº”æ¥æ”¶æ•°æ®ï¼Œç›´è‡³å¯¹ä¾§ä¹Ÿå…³é—­äº†è¿æ¥ã€‚\nä¹Ÿå¯ä»¥é€šè¿‡æµ‹ä¸‰æ¬¡æ¡æ‰‹å…³é—­è¿æ¥ã€‚ä¸»æœºAå‘å‡ºFINï¼Œä¸»æœºBå›å¤FIN \u0026amp; ACKï¼Œç„¶åä¸»æœºAå›å¤ACK\n ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ ä¸‰æ¬¡æ¡æ‰‹çš„ç›®çš„æ˜¯å»ºç«‹å¯é çš„é€šä¿¡ä¿¡é“ï¼Œè¯´åˆ°é€šè®¯ï¼Œç®€å•æ¥è¯´å°±æ˜¯æ•°æ®çš„å‘é€ä¸æ¥æ”¶ï¼Œè€Œä¸‰æ¬¡æ¡æ‰‹æœ€ä¸»è¦çš„ç›®çš„å°±æ˜¯ åŒæ–¹ç¡®è®¤è‡ªå·±ä¸å¯¹æ–¹çš„å‘é€ä¸æ¥æ”¶æ˜¯æ­£å¸¸çš„ã€‚\n1ã€å®¢æˆ·ç«¯â€“å‘é€å¸¦æœ‰ SYN æ ‡å¿—çš„æ•°æ®åŒ…â€“ä¸€æ¬¡æ¡æ‰‹â€“æœåŠ¡ç«¯\n2ã€ æœåŠ¡ç«¯â€“å‘é€å¸¦æœ‰ SYN/ACK æ ‡å¿—çš„æ•°æ®åŒ…â€“äºŒæ¬¡æ¡æ‰‹â€“å®¢æˆ·ç«¯\n3ã€å®¢æˆ·ç«¯â€“å‘é€å¸¦æœ‰å¸¦æœ‰ ACK æ ‡å¿—çš„æ•°æ®åŒ…â€“ä¸‰æ¬¡æ¡æ‰‹â€“æœåŠ¡ç«¯\n  ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šClient ä»€ä¹ˆéƒ½ä¸èƒ½ç¡®è®¤ï¼›Server ç¡®è®¤äº†å¯¹æ–¹å‘é€æ­£å¸¸ï¼Œè‡ªå·±æ¥æ”¶æ­£å¸¸ã€‚\n  ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šClient ç¡®è®¤äº†ï¼šè‡ªå·±å‘é€ã€æ¥æ”¶æ­£å¸¸ï¼Œå¯¹æ–¹å‘é€ã€æ¥æ”¶æ­£å¸¸ï¼›Server ç¡®è®¤äº†ï¼šè‡ªå·±æ¥æ”¶æ­£å¸¸ï¼Œå¯¹æ–¹å‘ é€æ­£å¸¸\n  ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šClient ç¡®è®¤äº†ï¼šè‡ªå·±å‘é€ã€æ¥æ”¶æ­£å¸¸ï¼Œå¯¹æ–¹å‘é€ã€æ¥æ”¶æ­£å¸¸ï¼›Server ç¡®è®¤äº†ï¼šè‡ªå·±å‘é€ã€æ¥æ”¶æ­£å¸¸ï¼Œ å¯¹æ–¹å‘é€æ¥æ”¶æ­£å¸¸ æ‰€ä»¥ä¸‰æ¬¡æ¡æ‰‹å°±èƒ½ç¡®è®¤åŒå‘æ”¶å‘åŠŸèƒ½éƒ½æ­£å¸¸ï¼Œç¼ºä¸€ä¸å¯ã€‚\n  ä¸ºä»€ä¹ˆè¦ä¼ å› SYN æ¥æ”¶ç«¯ä¼ å›å‘é€ç«¯æ‰€å‘é€çš„ SYN æ˜¯ä¸ºäº†å‘Šè¯‰å‘é€ç«¯ï¼Œæˆ‘æ¥æ”¶åˆ°çš„ä¿¡æ¯ç¡®å®å°±æ˜¯ä½ æ‰€å‘é€çš„ä¿¡å·äº†ã€‚ SYN æ˜¯ TCP/IP å»ºç«‹è¿æ¥æ—¶ä½¿ç”¨çš„æ¡æ‰‹ä¿¡å·ã€‚åœ¨å®¢æˆ·æœºå’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹æ­£å¸¸çš„ TCP ç½‘ç»œè¿æ¥æ—¶ï¼Œå®¢æˆ·æœºé¦–å…ˆ å‘å‡ºä¸€ä¸ª SYN æ¶ˆæ¯ï¼ŒæœåŠ¡å™¨ä½¿ç”¨ SYN-ACK åº”ç­”è¡¨ç¤ºæ¥æ”¶åˆ°äº†è¿™ä¸ªæ¶ˆæ¯ï¼Œæœ€åå®¢æˆ·æœºå†ä»¥ ACK(Acknowledgement[æ±‰è¯‘ï¼šç¡®è®¤å­—ç¬¦ ,åœ¨æ•°æ®é€šä¿¡ä¼ è¾“ä¸­ï¼Œæ¥æ”¶ç«™å‘ç»™å‘é€ç«™çš„ä¸€ç§ä¼ è¾“æ§åˆ¶å­—ç¬¦ã€‚å®ƒè¡¨ ç¤ºç¡®è®¤å‘æ¥çš„æ•°æ®å·²ç»æ¥å—æ— è¯¯ã€‚ ]ï¼‰æ¶ˆæ¯å“åº”ã€‚è¿™æ ·åœ¨å®¢æˆ·æœºå’ŒæœåŠ¡å™¨ä¹‹é—´æ‰èƒ½å»ºç«‹èµ·å¯é çš„TCPè¿æ¥ï¼Œæ•°æ® æ‰å¯ä»¥åœ¨å®¢æˆ·æœºå’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ é€’ã€‚\n  ä¸ºä»€ä¹ˆè¦å››æ¬¡æŒ¥æ‰‹\n  ä»»ä½•ä¸€æ–¹éƒ½å¯ä»¥åœ¨æ•°æ®ä¼ é€ç»“æŸåå‘å‡ºè¿æ¥é‡Šæ”¾çš„é€šçŸ¥ï¼Œå¾…å¯¹æ–¹ç¡®è®¤åè¿›å…¥åŠå…³é—­çŠ¶æ€ã€‚å½“å¦ä¸€æ–¹ä¹Ÿæ²¡æœ‰æ•°æ®å†å‘é€ çš„æ—¶å€™ï¼Œåˆ™å‘å‡ºè¿æ¥é‡Šæ”¾é€šçŸ¥ï¼Œå¯¹æ–¹ç¡®è®¤åå°±å®Œå…¨å…³é—­äº†TCPè¿æ¥ã€‚ ä¸¾ä¸ªä¾‹å­ï¼šA å’Œ B æ‰“ç”µè¯ï¼Œé€šè¯å³å°†ç»“æŸåï¼ŒA è¯´â€œæˆ‘æ²¡å•¥è¦è¯´çš„äº†â€ï¼ŒBå›ç­”â€œæˆ‘çŸ¥é“äº†â€ï¼Œä½†æ˜¯ B å¯èƒ½è¿˜ä¼šæœ‰è¦è¯´çš„ è¯ï¼ŒA ä¸èƒ½è¦æ±‚ B è·Ÿç€è‡ªå·±çš„èŠ‚å¥ç»“æŸé€šè¯ï¼Œäºæ˜¯ B å¯èƒ½åˆå·´æ‹‰å·´æ‹‰è¯´äº†ä¸€é€šï¼Œæœ€å B è¯´â€œæˆ‘è¯´å®Œäº†â€ï¼ŒA å›ç­”â€œçŸ¥é“ äº†â€ï¼Œè¿™æ ·é€šè¯æ‰ç®—ç»“æŸã€‚\n  TCPä»¥æ®µä¸ºå•ä½å‘é€æ•°æ®  åœ¨å»ºç«‹TCPè¿æ¥çš„åŒæ—¶ï¼Œå¯ä»¥ç¡®è®¤å‘é€æ•°æ®åŒ…çš„å•ä½MSSï¼ˆMaximum Segment Size,æœ€å¤§æ¶ˆæ¯é•¿åº¦ï¼‰ï¼Œæœ€ç†æƒ³çš„æƒ…å†µæ˜¯æ­£å¥½æ˜¯IPä¸­ä¸ä¼šè¢«åˆ†ç‰‡å¤„ç†çš„æœ€å¤§æ•°æ®é•¿åº¦ã€‚TCPåœ¨ä¼ é€å¤§é‡æ•°æ®æ—¶ï¼Œæ˜¯ä»¥MSSçš„å¤§å°å°†æ•°æ®è¿›è¡Œåˆ†å‰²å‘é€ã€‚ åœ¨ä¸‰æ¬¡æ¡æ‰‹æ—¶ï¼Œä¼šåœ¨TCPé¦–éƒ¨å†™å…¥MSSé€‰é¡¹ï¼Œç„¶ååœ¨ä¸¤è€…ä¹‹é—´é€‰æ‹©ä¸€ä¸ªè¾ƒå°çš„å€¼æŠ•å…¥ä½¿ç”¨  åˆ©ç”¨çª—å£æ§åˆ¶æé«˜é€Ÿåº¦  æ¯å‘ä¸€ä¸ªæ®µæ•°æ®åŒ…è¿›è¡Œä¸€æ¬¡ç¡®è®¤åº”ç­”çš„å¤„ç†çš„ç¼ºç‚¹ï¼šåŒ…çš„å¾€è¿”æ—¶é—´è¶Šé•¿é€šä¿¡æ€§èƒ½è¶Šä½ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜å¼•å…¥äº†çª—å£è¿™ä¸ªæ¦‚å¿µï¼Œå‘é€ç«¯åœ¨å‘é€äº†ä¸€ä¸ªæ®µåä¸å¿…ä¸€ç›´ç­‰å¾…ç¡®è®¤åº”ç­”ï¼Œè€Œæ˜¯ç»§ç»­å‘é€ çª—å£å¤§å°ï¼š  æŒ‡æ— éœ€ç­‰å¾…ç¡®è®¤åº”ç­”è€Œå¯ä»¥ç»§ç»­å‘é€æ•°æ®çš„æœ€å¤§å€¼ï¼Œ    çª—å£æ§åˆ¶ä¸é‡å‘æ§åˆ¶  ç¡®è®¤åº”ç­”æœªèƒ½è¿”å›çš„æƒ…å†µï¼š  è¿™ç§æƒ…å†µä¸‹æ•°æ®å·²ç»åˆ°è¾¾å¯¹ç«¯ï¼Œæ˜¯ä¸éœ€è¦é‡å‘çš„     æŸä¸ªæŠ¥æ–‡æ®µä¸¢å¤±çš„æƒ…å†µï¼š  å½“æŸä¸ªæŠ¥æ–‡æ®µä¸¢å¤±åï¼Œå‘é€ç«¯ä¼šä¸€ç›´æ”¶åˆ°æ¥æ”¶ç«¯å‘é€çš„åŒä¸€ä¸ªç¡®è®¤åº”ç­”ï¼Œå½“è¿ç»­ä¸‰æ¬¡æ”¶åˆ°åŒä¸€ä¸ªç¡®è®¤åº”ç­”å°±ä¼šå°†å¯¹åº”çš„æ•°æ®è¿›è¡Œé‡å‘ï¼Œè¿™å°±æ˜¯TCPçš„é«˜é€Ÿé‡å‘æ§åˆ¶    æµæ§åˆ¶  åœ¨ä¸€äº›é«˜è´Ÿè·çš„æƒ…å†µä¸‹ï¼Œæ¥æ”¶ç«¯å°†æœ¬åº”è¯¥æ¥æ”¶çš„æ•°æ®ä¸¢å¼ƒçš„è¯ï¼Œåˆä¼šé‡å‘é‡å‘æœºåˆ¶ï¼Œä»è€Œå¯¼è‡´ç½‘ç»œæµé‡çš„æµªè´¹ å› æ­¤TCPæä¾›äº†ä¸€ç§å¯ä»¥è®©å‘é€ç«¯æ ¹æ®æ¥æ”¶ç«¯çš„å®é™…æ¥æ”¶èƒ½åŠ›æ§åˆ¶å‘é€çš„æ•°æ®é‡çš„æœºåˆ¶ï¼Œå³æµæ§åˆ¶ï¼Œå…·ä½“æ“ä½œæ˜¯æ¥æ”¶ç«¯ä¸»æœºå‘å‘é€ç«¯ä¸»æœºé€šçŸ¥è‡ªå·±å¯ä»¥æ¥æ”¶æ•°æ®çš„å¤§å°ï¼Œäºæ˜¯å‘é€ç«¯ä¼šå‘é€ä¸è¶…è¿‡è¿™ä¸ªé™åº¦çš„æ•°æ®ã€‚è¯¥å¤§å°é™åº¦å°±æ˜¯çª—å£å¤§å°ï¼Œç”±æ¥æ”¶ç«¯ä¸»æœºå†³å®šã€‚  æ‹¥å¡æ§åˆ¶   TCPçš„çª—å£æ§åˆ¶ä½¿å¾—å¯ä»¥è¿ç»­å‘é€å¤§é‡æ•°æ®åŒ…ï¼Œä½†æ˜¯å¦‚æœåœ¨é€šä¿¡åˆšå¼€å§‹æ—¶å°±å‘é€å¤§é‡æ•°æ®ä¼šå¼•å‘ä¸€äº›é—®é¢˜ï¼Œç”šè‡³ä¼šå¯¼è‡´æ•´ä¸ªç½‘ç»œçš„ç˜«ç—ª\n  TCPä¸ºäº†é˜²æ­¢è¯¥é—®é¢˜ï¼Œåœ¨é€šä¿¡ä¸€å¼€å§‹æ—¶å°±ä¼šé€šè¿‡ä¸€ä¸ªå«æ…¢å¯åŠ¨ç®—æ³•å¾—çš„æ•°å€¼å¯¹å‘é€æ•°æ®é‡è¿›è¡Œæ§åˆ¶\n  ä¸ºäº†é‡åŒ–å‘é€ç«¯è°ƒèŠ‚çš„æ•°æ®çš„é‡ï¼Œå®šä¹‰äº†ä¸€ä¸ªå«â€œæ‹¥å¡çª—å£â€çš„æ¦‚å¿µï¼Œåœ¨æ…¢å¯åŠ¨çš„æ—¶å€™æŠŠæ‹¥å¡çª—å£çš„å¤§å°è®¾ç½®ä¸º1ä¸ªæ•°æ®æ®µï¼ˆ1MSSï¼‰ï¼Œä¹‹åæ¯æ”¶åˆ°ä¸€æ¬¡ç¡®è®¤åº”ç­”ï¼Œæ‹¥å¡çª—å£çš„å€¼å°±+1ï¼Œåœ¨å‘é€å‰è¿˜è¦ä¸æ¥æ”¶ç«¯é€šçŸ¥çš„çª—å£å¤§å°åšæ¯”è¾ƒï¼Œé€‰æ‹©è¾ƒå°è€…\n  éšç€åŒ…çš„æ¯æ¬¡å¾€è¿”ï¼Œæ‹¥å¡çª—å£çš„å€¼ä»¥1ã€2ã€4ç­‰æŒ‡æ•°å‡½æ•°çš„å¢é•¿ï¼Œä»è€Œå¯¼è‡´ç½‘ç»œæ‹¥å¡çš„å‘ç”Ÿï¼Œä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µçš„å‘ç”Ÿï¼Œå¼•å…¥äº†æ…¢å¯åŠ¨é˜ˆå€¼çš„æ¦‚å¿µï¼Œåªè¦æ‹¥å¡çª—å£çš„å€¼è¶…å‡ºè¿™ä¸ªé˜ˆå€¼ï¼Œåœ¨æ¯æ”¶åˆ°ä¸€æ¬¡ç¡®è®¤åº”ç­”æ—¶ï¼Œåªå…è®¸ä»¥ä¸‹é¢çš„æ¯”ä¾‹æ”¾å¤§æ‹¥å¡çª—å£ï¼š\nâ€‹\tï¼ˆ1ä¸ªæ•°æ®æ®µçš„å­—èŠ‚æ•°*1ä¸ªæ•°æ®æ®µå­—èŠ‚æ•°ï¼‰/æ‹¥å¡çª—å£ï¼ˆå­—èŠ‚ï¼‰\n  TCPé€šä¿¡åˆšå¼€å§‹æ—¶ï¼Œå¹¶æ²¡ä¸è®¾ç½®ç›¸åº”çš„æ…¢å¯åŠ¨é˜ˆå€¼ï¼Œè€Œæ˜¯åœ¨è¶…æ—¶é‡å‘æ—¶æ‰ä¼šè®¾ç½®ä¸ºå½“æ—¶æ‹¥å¡çª—å£ä¸€åŠçš„å¤§å°\n  è€Œç”±é‡å¤ç¡®è®¤åº”ç­”è¿›è¡Œé«˜é€Ÿé‡å‘æ§åˆ¶æ—¶ï¼Œæ…¢å¯åŠ¨é˜ˆå€¼çš„å¤§å°è¢«è®¾ç½®ä¸ºâ€œå®é™…å·²å‘é€ä½†æœªæ”¶åˆ°ç¡®è®¤åº”ç­”çš„æ•°æ®é‡â€çš„ä¸€åŠï¼Œç„¶åå°†çª—å£çš„å¤§å°è®¾ç½®ä¸ºè¯¥æ…¢å¯åŠ¨é˜ˆå€¼+3ä¸ªæ•°æ®æ®µçš„å¤§å°ã€‚\n  æé«˜ç½‘ç»œåˆ©ç”¨ç‡çš„è§„èŒƒ  Nagleç®—æ³• å»¶è¿Ÿç¡®è®¤åº”ç­”  æ”¶åˆ°æ•°æ®åä¸ç«‹å³è¿”å›ç¡®è®¤åº”ç­”ï¼Œè€Œæ˜¯å»¶è¿Ÿä¸€æ®µæ—¶é—´ ç”±äºTCPé‡‡ç”¨æ»‘åŠ¨çª—å£çš„æ§åˆ¶æœºåˆ¶ï¼Œåœ¨TCPæ–‡ä»¶ä¼ è¾“ä¸­å¤§å¤šæ•°æ˜¯æ¯ä¸¤ä¸ªæ•°æ®æ®µè¿”å›ä¸€æ¬¡ç¡®è®¤åº”ç­”ã€‚   æå¸¦åº”ç­”  UDPé¦–éƒ¨æ ¼å¼  æ ¡éªŒå’Œï¼š https://blog.csdn.net/yaoxingshuai/article/details/51063546\nhttps://seanwangjs.github.io/2017/10/19/udp-protocol-checksum.html\n\u0026ldquo;äºŒè¿›åˆ¶åç æ±‚å’Œ\u0026rdquo; ç­‰ä»·äº \u0026ldquo;äºŒè¿›åˆ¶æ±‚å’Œå†å–å\u0026rdquo; ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ https://blog.csdn.net/limanjihe/article/details/85270291\n  æ ¡éªŒå’Œ  UDPæ ¡éªŒå’Œä½¿ç”¨çš„æ˜¯UDPä¼ªé¦–éƒ¨ï¼Œè¿™æ˜¯ç”±äºTCP/IP è¯†åˆ«ä¸€ä¸ªè¿›è¡Œé€šä¿¡çš„åº”ç”¨çš„äº”è¦ç´ ï¼šâ€œæºåœ°å€IPåœ°å€â€ã€â€œç›®æ ‡IPåœ°å€â€ã€â€œåè®®å·â€ã€â€œæºç«¯å£å·â€ã€â€œç›®æ ‡ç«¯å£å·â€ï¼Œä½†æ˜¯UDPé¦–éƒ¨åªåŒ…å«æºç«¯å£å’Œç›®æ ‡ç«¯å£ï¼Œå‰©ä¸‹çš„ä¸‰é¡¹åœ¨IPé¦–éƒ¨ï¼Œå¦‚æœå…¶ä»–ä¸‰é¡¹è¢«ç ´åï¼Œå°±ä¼šå¯¼è‡´æ”¶åŒ…çš„åº”ç”¨æ”¶ä¸åˆ°åŒ… æ£€éªŒå’Œè®¡ç®—æ­¥éª¤ï¼š  æŠŠæ£€éªŒå’Œå­—æ®µç½®ä¸º0 å…¶æ¬¡ï¼Œå¯¹æ•´ä¸ªé¦–éƒ¨ä¸­çš„æ¯ä¸ª16 bitè¿›è¡ŒäºŒè¿›åˆ¶åç æ±‚å’Œ å°†è®¡ç®—å¾—åˆ°çš„è¡¥ç å’Œå†™å…¥æ ¡éªŒå’Œå­—æ®µ      å®ä¾‹ï¼š\nIPå¤´ï¼š\nâ€‹ 45 00 0031\nâ€‹ 89 F5 0000\nâ€‹ 6E 06 0000ï¼ˆæ ¡éªŒå­—æ®µï¼‰\nâ€‹ DE B7 455D -\u0026gt; 222.183.69.93\nâ€‹ C0 A8 00DC -\u0026gt; 192.168.0.220\nè®¡ç®—ï¼š\n4500+ 0031 +89F5 + 0000 + 6e06+ 0000 + DEB7 + 455D + C0A8 + 00DC =322C4\n0003+ 22C4 = 22C7\n~22C7 =DD38 -\u0026gt;å³ä¸ºåº”å¡«å……çš„æ ¡éªŒå’Œ\nå½“æ¥å—åˆ°IPæ•°æ®åŒ…æ—¶ï¼Œè¦æ£€æŸ¥IPå¤´æ˜¯å¦æ­£ç¡®ï¼Œåˆ™å¯¹IPå¤´è¿›è¡Œæ£€éªŒï¼Œæ–¹æ³•åŒä¸Šï¼š\nè®¡ç®—ï¼š\n4500 + 0031+89F5 + 0000 + 6E06+ DD38 + DEB7 + 455D + C0A8 + 00DC =3 FFFC\n0003 + FFFC= FFFF\n~FFFF =00000 -\u0026gt;æ­£ç¡®\nTCPé¦–éƒ¨æ ¼å¼  åºåˆ—å·  å­—æ®µé•¿32ä½ï¼ŒæŒ‡å‘é€æ•°æ®çš„ä½ç½®ï¼Œæ¯å‘ä¸€æ¬¡æ•°æ®ï¼Œå°±ç´¯åŠ ä¸€æ¬¡è¯¥æ•°æ®å­—èŠ‚æ•°çš„å¤§å° åºåˆ—å·ä¸æ˜¯ä»0æˆ–1å¼€å§‹ï¼Œè€Œæ˜¯å°†ä¸€ä¸ªéšæœºæ•°ä½œä¸ºåˆå§‹å€¼ï¼Œç„¶åé€šè¿‡SYNåŒ…ä¼ ç»™æ¥æ”¶ç«¯ä¸»æœº   ç¡®è®¤åº”ç­”å·  å­—æ®µé•¿32ä½ï¼ŒæŒ‡ä¸‹ä¸€æ¬¡åº”è¯¥æ”¶åˆ°çš„æ•°æ®çš„åºåˆ—å·   æ•°æ®åç§»  å­—æ®µé•¿32ä½ï¼ˆé•¿4ä½ï¼Œå•ä½ä¸º4å­—èŠ‚ï¼‰ï¼Œè¡¨ç¤ºTCPä¼ è¾“çš„æ•°æ®éƒ¨åˆ†åº”è¯¥ä»TCPåŒ…çš„å“ªä¸ªä½å¼€å§‹è®¡ç®—ï¼Œå¯çœ‹ä½œæ˜¯TCPé¦–éƒ¨çš„é•¿åº¦   ä¿ç•™  ä¸ºäº†ä»¥åæ‹“å±•ä½¿ç”¨ï¼Œé•¿åº¦4ä½ï¼Œä¸€èˆ¬è®¾ç½®ä¸º0   æ§åˆ¶ä½  é•¿åº¦ä¸º8ä½ï¼Œä»å·¦è‡³å³åˆ†åˆ«ä¸ºï¼šCWRã€ECEã€URGã€ACKã€PSHã€RSTã€SYNã€FIN CWRï¼ˆCongestion Window Reducedï¼‰  ä¸åé¢çš„ECEéƒ½ç”¨äºIPé¦–éƒ¨çš„ECNå­—æ®µï¼Œä¸º1æ—¶åˆ™é€šçŸ¥å¯¹æ–¹å·²å°†æ‹¥å¡çª—å£ç¼©å°   ECEï¼ˆECN-Echoï¼‰  ä¸º1æ—¶è¡¨ç¤ºä¼šé€šä¿¡å¯¹æ–¹ï¼Œä»å¯¹æ–¹åˆ°è¿™è¾¹çš„ç½‘ç»œæœ‰æ‹¥å¡ã€‚åœ¨æ”¶åˆ°æ•°æ®åŒ…çš„IPé¦–éƒ¨ä¸­ECNä¸º1æ—¶å°†TCPé¦–éƒ¨çš„ECEè®¾ç½®ä¸º1   URGï¼ˆUrgent Flagï¼‰  ä¸º1æ—¶è¡¨ç¤ºåŒ…ä¸­æœ‰éœ€è¦ç´§æ€¥å¤„ç†çš„æ•°æ®ï¼Œå¹¶åœ¨åé¢çš„ç´§æ€¥æŒ‡é’ˆä¸­å†è¿›è¡Œè§£é‡Š   ACKï¼ˆAcknowledgement Flagï¼‰  ä¸º1æ—¶ï¼Œç¡®è®¤åº”ç­”çš„å­—æ®µå˜ä¸ºæœ‰æ•ˆã€‚TCPè§„å®šé™¤äº†æœ€åˆå»ºç«‹è¿æ¥çš„SYNåŒ…ä¹‹å¤–è¯¥ä½å¿…é¡»è®¾ç½®ä¸º1   PSHï¼ˆPush Flagï¼‰  ä¸º1æ—¶è¡¨ç¤ºéœ€è¦å°†æ”¶åˆ°çš„æ•°æ®ç«‹åˆ»ä¼ ç»™ä¸Šå±‚åº”ç”¨åè®®ï¼›ä¸º0æ—¶ä¸éœ€è¦ç«‹å³ä¼ è€Œæ˜¯å…ˆè¿›è¡Œç¼“å­˜   RSTï¼ˆReset Flagï¼‰  ä¸º1æ—¶è¡¨ç¤ºTCPè¿æ¥ä¸­å‡ºç°å¼‚å¸¸å¿…é¡»å¼ºåˆ¶æ–­å¼€è¿æ¥   SYNï¼ˆSynchronize Flagï¼‰  ç”¨äºå»ºç«‹è¿æ¥ï¼Œä¸º1æ—¶è¡¨ç¤ºå¸Œæœ›å»ºç«‹è¿æ¥ï¼Œå¹¶åœ¨å…¶åºå·çš„å­—æ®µè¿›è¡Œåºå·çš„åˆå§‹å€¼è®¾å®š   FINï¼ˆFin Flagï¼‰  ä¸º1æ—¶è¡¨ç¤ºä»Šåä¸ä¼šå†æœ‰æ•°æ®å‘é€ï¼Œå¸Œæœ›æ–­å¼€è¿æ¥     çª—å£å¤§å°ï¼ˆwindow sizeï¼‰  å­—æ®µé•¿16ä½ï¼Œç”¨äºé€šçŸ¥ä»ç›¸åŒTCPé¦–éƒ¨çš„ç¡®è®¤åº”ç­”å·æ‰€æŒ‡ä½ç½®å¼€å§‹èƒ½æ¥æ”¶çš„æ•°æ®å¤§å°ï¼ˆ8å­—èŠ‚ï¼‰ï¼›å¦‚æœçª—å£ä¸º0ï¼Œåˆ™è¡¨ç¤ºå¯ä»¥å‘é€çª—å£æ¢æµ‹ï¼Œä½†æ˜¯è¿™ä¸ªæ•°æ®å¿…é¡»æ˜¯1ä¸ªå­—èŠ‚   ç´§æ€¥æŒ‡é’ˆï¼ˆUrgent Pointerï¼‰  å­—æ®µé•¿16ä½ï¼Œåªæœ‰åœ¨URGæ§åˆ¶ä½ä¸º1æ—¶æœ‰æ•ˆã€‚ä»æ•°æ®éƒ¨åˆ†çš„é¦–ä½åˆ°ç´§æ€¥æŒ‡é’ˆæ‰€æŒ‡ç¤ºçš„ä½ç½®ä¸ºæ­¢ä¸ºç´§æ€¥æ•°æ®   é€‰é¡¹ï¼ˆOptionsï¼‰  ç”¨äºæé«˜TCPçš„ä¼ è¾“æ€§èƒ½ï¼Œé•¿åº¦æœ€å¤§ä¸º40å­—èŠ‚ å¸¸è§é€‰é¡¹ç±»å‹ï¼š  ç±»å‹2:MSS ç±»å‹3ï¼šçª—å£æ‰©å¤§ï¼Œç”¨äºæ”¹è¿›TCPååé‡çš„é€‰é¡¹ ç±»å‹8ï¼šæ—¶é—´æˆ³ï¼Œå½“æ•°æ®é‡éå¸¸å¤§æ—¶ï¼Œ32ä½åºåˆ—å·å¯èƒ½è¿…é€Ÿç”¨å®Œï¼Œæ‰€ä»¥å¼•å…¥è¿™ä¸ªé€‰é¡¹ï¼ŒåŒºåˆ†æ–°è€æ—¶é—´æˆ³ ç±»å‹4å’Œ5ï¼šç”¨äºé€‰æ‹©æ€§åº”ç­”ï¼ˆSelective ACKnowledgementï¼‰,TCP çš„åº”ç­”ä¸€èˆ¬åªæœ‰ä¸€ä¸ªæ•°å­—ï¼Œæ•°æ®æ®µåœ¨æ—¶ä¸æ—¶ä¸¢å¤±çš„æƒ…å†µä¸‹ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°çš„æ•°æ®æ®µçš„åºå·ä¸è¿ç»­ï¼Œå‘ˆæœ‰ä¸€ä¸ªæ¯ä¸€ä¸ªçš„â€œè±ç‰™å­çŠ¶æ€â€ï¼Œæœ‰äº†è¿™ä¸ªé€‰é¡¹å°±å¯ä»¥å…è®¸æœ€å¤§4æ¬¡çš„â€œè±ç‰™å­çŠ¶æ€â€ç¡®è®¤åº”ç­”ï¼Œè¿™æ ·æ—¢å¯ä»¥é¿å…æ— ç”¨é‡å‘çš„åŒæ—¶ï¼Œè¿˜å¯ä»¥æé«˜é‡å‘çš„é€Ÿåº¦ï¼Œè¿›è€Œæé«˜ç½‘ç»œçš„ååé‡      çª—å£å¤§å°ä¸ååé‡  TCPé€šä¿¡çš„æœ€å¤§ååé‡ç”±çª—å£å¤§å°å’Œå¾€è¿”æ—¶é—´å†³å®šï¼Œè®¾æœ€å¤§ååé‡ä¸ºTmax,çª—å£å¤§å°ä¸ºWï¼Œåˆ™Tmax=W/RTT è®¾çª—å£ä¸º65535å­—èŠ‚ï¼ŒRTTä¸º0.1ç§’ï¼Œåˆ™Tmax=5242800ï¼ˆbpsï¼‰=5.2(Mbps) ä¸Šé¢çš„å…¬å¼è¡¨æ˜1ä¸ªTCPè¿æ¥æ‰€èƒ½ä¼ è¾“çš„æœ€å¤§ååé‡ä¸º5.2Mbps  ","description":"tabs, code-tabs, expand, alert, warning, notice, img, box","id":40,"section":"posts","tags":["å›¾è§£TCPIP"],"title":"TCP\u0026UDP","uri":"https://mrxiaoling.github.io/en/posts/%E5%9B%BE%E8%A7%A3tcpip/tcpudp/"},{"content":"TemplateMethodæ¨¡å¼  å‚è€ƒï¼š1.ã€Šå›¾è§£è®¾è®¡æ¨¡å¼ã€‹\nhttps://cloud.tencent.com/developer/article/1609361\nhttps://www.jianshu.com/p/800a44c1d9dd\nhttps://www.cnblogs.com/jing99/p/12607905.html\n æ¨¡å¼å®šä¹‰  å®šä¹‰ä¸€ä¸ªæ“ä½œç®—æ³•ä¸­çš„æ¡†æ¶ï¼Œè€Œå°†è¿™äº›æ­¥éª¤å»¶è¿ŸåŠ è½½åˆ°å­ç±»ä¸­ï¼› å…¶æœ¬è´¨å°±æ˜¯å›ºå®šç®—æ³•æ¡†æ¶æˆ–è€…è¯´ç®—æ³•æ¯ä¸ªéƒ¨åˆ†çš„æ‰§è¡Œé¡ºåº  è§£å†³ä½•ç§é—®é¢˜  è®©çˆ¶ç±»æ§åˆ¶å­ç±»æ–¹æ³•çš„è°ƒç”¨é¡ºåº æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ä¸€ä¸ªç®—æ³•çš„ç»“æ„å³å¯é‡å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚  æ¨¡å¼å¥½å¤„  å¼€å‘äººå‘˜åœ¨å¼€å‘æ—¶ï¼Œåªéœ€è¦è€ƒè™‘æ–¹æ³•çš„å®ç°ã€‚ä¸éœ€è¦è€ƒè™‘æ–¹æ³•åœ¨ä½•ç§æƒ…å†µä¸‹è¢«è°ƒç”¨ã€‚å®ç°ä»£ç å¤ç”¨ã€‚  æ¨¡å¼é€‚åˆåœºæ™¯   ä¸€æ¬¡æ€§å®ç°ä¸€ä¸ªç®—æ³•çš„ä¸å˜éƒ¨åˆ†ï¼Œå¹¶å°†å¯å˜çš„è¡Œä¸ºç•™ç»™å­ç±»æ¥å®ç°ã€‚\n  å„å­ç±»ä¸­å…¬å…±çš„è¡Œä¸ºåº”è¢«æå–å‡ºæ¥å¹¶é›†ä¸­åˆ°ä¸€ä¸ªå…¬å…±çˆ¶ç±»ä¸­ä»¥é¿å…ä»£ç é‡å¤ã€‚\n  éœ€è¦é€šè¿‡å­ç±»æ¥å†³å®šçˆ¶ç±»ç®—æ³•ä¸­æŸä¸ªæ­¥éª¤æ˜¯å¦æ‰§è¡Œï¼Œå®ç°å­ç±»å¯¹çˆ¶ç±»çš„åå‘æ§åˆ¶ã€‚\n  JDKé‡Œçš„Template Methodæ¨¡å¼   java.io.InputStream ã€ java.io.OutputStream ã€ java.io.Reader ä»¥åŠjava.io.Writerä¸­æ‰€æœ‰éæŠ½è±¡æ–¹æ³•\n  java.util.AbstractList, java.util.AbstractSetä»¥åŠjava.util.AbstractMapä¸­æ‰€æœ‰éæŠ½è±¡æ–¹æ³•ã€‚\n\r\rInputStream\r\r ä¸Šé¢çš„éæŠ½è±¡æ–¹æ³•ç»™å®šäº†ä»è¾“å…¥æµä¸­è¯»å–æ•°æ®çš„å…·ä½“æµç¨‹ï¼Œè€Œå¦‚ä½•ä»è¾“å…¥æµä¸­è¯»å–ï¼Œå´æ²¡æœ‰ç»™å‡ºå…·ä½“çš„å®ç°æ–¹æ³•ï¼Œéœ€è¦java.io.InputStreamè¿™ä¸ªæŠ½è±¡ç±»çš„å­ç±»æ¥å…·ä½“å®ç°readæ–¹æ³•ã€‚  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30  public int read(byte b[], int off, int len) throws IOException {\rif (b == null) {\rthrow new NullPointerException();\r} else if (off \u0026lt; 0 || len \u0026lt; 0 || len \u0026gt; b.length - off) {\rthrow new IndexOutOfBoundsException();\r} else if (len == 0) {\rreturn 0;\r}\rint c = read();\rif (c == -1) {\rreturn -1;\r}\rb[off] = (byte)c;\rint i = 1;\rtry {\rfor (; i \u0026lt; len ; i++) {\rc = read();\rif (c == -1) {\rbreak;\r}\rb[off + i] = (byte)c;\r}\r} catch (IOException ee) {\r}\rreturn i;\r}\rpublic abstract int read() throws IOException;\r  \r\r   UMLç±»å›¾å¦‚ä¸‹ å„éƒ¨åˆ†ä»£ç å¦‚ä¸‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29  package cn.ling.TemplateMethod;\rpublic abstract class Game {\r/**\r* åˆå§‹åŒ–æ¸¸æˆ\r*/\rpublic abstract void initialize();\r/**\r* å¼€å§‹æ¸¸æˆ\r*/\rpublic abstract void startPlay();\r/**\r* ç»“æŸæ¸¸æˆ\r*/\rpublic abstract void endPlay();\r/**\r* æ¨¡æ¿æ–¹æ³•ï¼šç¡®å®šäº†æ¸¸æˆçš„æµç¨‹\r*/\rpublic final void playGame() {\rinitialize();\rstartPlay();\rendPlay();\r}\r}\r  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  package cn.ling.TemplateMethod;\rpublic class BasketBallGame extends Game {\r@Override\rpublic void initialize() {\rSystem.out.println(\u0026#34;Basketball Game Initialized! Start playing.\u0026#34;);\r}\r@Override\rpublic void startPlay() {\rSystem.out.println(\u0026#34;Basketball Game Started. Enjoy the game!\u0026#34;);\r}\r@Override\rpublic void endPlay() {\rSystem.out.println(\u0026#34;Basketball Game Finished!\u0026#34;);\r}\r}\r  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  package cn.ling.TemplateMethod;\rpublic class FootBallGame extends Game {\r@Override\rpublic void initialize() {\rSystem.out.println(\u0026#34;Football Game Initialized! Start playing.\u0026#34;);\r}\r@Override\rpublic void startPlay() {\rSystem.out.println(\u0026#34;Football Game Started. Enjoy the game!\u0026#34;);\r}\r@Override\rpublic void endPlay() {\rSystem.out.println(\u0026#34;Football Game Finished!\u0026#34;);\r}\r}\r  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  package cn.ling.TemplateMethod;\r/**\r* æµ‹è¯•ä»£ç \r*/\rpublic class Main {\rpublic static void main(String[] args) {\rGame basketBallGame = new BasketBallGame();\rGame footBallGame = new FootBallGame();\rbasketBallGame.playGame();\rSystem.out.println();\rfootBallGame.playGame();\r}\r}\r  æ¨¡å¼æ€»ç»“   æ¨¡æ¿æ–¹æ³•æ¨¡å¼æœ‰ä¸¤ä¸ªè§’è‰²ï¼šæŠ½è±¡ç±»å’Œå…·ä½“å­ç±»\n  AblstractClassï¼ˆæŠ½è±¡ç±»ï¼‰ï¼šåœ¨æŠ½è±¡ç±»ä¸­å®šä¹‰äº†ä¸€ç³»åˆ—çš„æ“ä½œPrimitiveOperationï¼Œæ¯ä¸ªæ“ä½œå¯ä»¥ä½¿å…·ä½“çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯æŠ½è±¡çš„ï¼Œæ¯ä¸ªæ“ä½œå¯¹åº”ä¸€ä¸ªç®—æ³•çš„æ­¥éª¤ï¼Œåœ¨å­ç±»ä¸­å¯ä»¥é‡æ–°å®šä¹‰æˆ–å®ç°è¿™äº›æ­¥éª¤ã€‚TmplateMethod()è¿™ä¸ªæ–¹æ³•ç”¨äºå®šä¹‰ä¸€ä¸ªç®—æ³•ç»“æ„ï¼Œæ¨¡æ¿æ–¹æ³•ä¸ä»…å¯ä»¥è°ƒç”¨åœ¨æŠ½è±¡ç±»ä¸­å®ç°çš„åŸºæœ¬æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨åœ¨æŠ½è±¡ç±»çš„å­ç±»ä¸­å®ç°çš„åŸºæœ¬æ–¹æ³•ï¼Œè¿˜å¯ä»¥è°ƒç”¨å…¶ä»–å¯¹è±¡ä¸­çš„æ–¹æ³•ã€‚\n  ConcreteClassï¼ˆå…·ä½“å­ç±»ï¼‰ï¼šç”¨äºå®ç°åœ¨çˆ¶ç±»ä¸­å£°æ˜çš„æŠ½è±¡åŸºæœ¬æ“ä½œï¼Œä¹Ÿå¯ä»¥è¦†ç›–åœ¨çˆ¶ç±»ä¸­å·²ç»å®ç°çš„å…·ä½“åŸºæœ¬æ“ä½œã€‚\n  ","description":"tabs, code-tabs, expand, alert, warning, notice, img, box","id":41,"section":"posts","tags":["è®¾è®¡æ¨¡å¼"],"title":"TemplateMethodæ¨¡å¼","uri":"https://mrxiaoling.github.io/en/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/templatemethod%E6%A8%A1%E5%BC%8F/"},{"content":"Nginx å®‰è£…ä»¥åŠé…ç½®  å‚è€ƒé“¾æ¥ï¼š https://blog.csdn.net/stinkstone/article/details/78082748\n Centos7\rWindows\r\r1ã€ å®˜ç½‘ä¸‹è½½å®‰è£…åŒ… http://nginx.org/en/download.html å¯ä»¥é€‰æ‹©æµè§ˆå™¨ä¸‹è½½æˆ–è€…é€šè¿‡ wget å‘½ä»¤ä¸‹è½½\n1 2  cd /usr/local\rwget http://nginx.org/download/nginx-1.16.1.tar.gz\r  2ã€ å®‰è£… Nginx é¦–å…ˆå®‰è£… Nginx ä¾èµ–åº“\n1 2 3 4 5 6 7  yum install gcc-c++\ryum install pcre\ryum install pcre-devel\ryum install zlib\ryum install zlib-devel\ryum install openssl\ryum install openssl-devel\r  è§£å‹å®‰è£…åŒ…\n1  tar -zxvf nginx-1.16.1.tar.gz\r  æ‰§è¡Œå®‰è£…ï¼Œnginx ä¼šé»˜è®¤å®‰è£…åˆ°/usr/local/nginx ç›®å½•\n1 2  cd /usr/local/nginx-1.16.1.tar.gz\r./configure #æ‰§è¡Œ./configure\r  å¦‚æœæ‰§è¡ŒæˆåŠŸï¼Œæ‰§è¡Œ make å’Œ make install ç¼–è¯‘ Nginx\n1 2  make\rmake install\r  3ã€é…ç½® Nginx å¼€æœºå¯åŠ¨ 1 2  cd /lib/systemd/system/\rvim nginx.service #åˆ›å»ºnginx.serviceæ–‡ä»¶\r  æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13  [Unit]\rDescription=nginx\r After=network.target\r [Service]\rType=forking\r ExecStart=/usr/local/nginx/sbin/nginx\r ExecReload=/usr/local/nginx/sbin/nginx reload\r ExecStop=/usr/local/nginx/sbin/nginx quit\r PrivateTmp=true\r [Install]\rWantedBy=multi-user.target\r   æ‰§è¡Œ systemctl enable nginx.service ä½¿ nginx å¼€æœºå¯åŠ¨\n1  systemctl enable nginx.service\r  4ã€ç›¸å…³å‘½ä»¤ 1 2 3 4 5  systemctl start nginx.service #å¯åŠ¨nginx\rsystemctl stop nginx.service #ç»“æŸnginx\rsystemctl restart nginx.service #é‡å¯nginx\r  5ã€éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ è¾“å…¥http://æœåŠ¡å™¨IP/ å¦‚æœèƒ½çœ‹åˆ° nginx çš„ç•Œé¢ï¼Œå°±è¡¨ç¤ºå®‰è£…æˆåŠŸäº†ï¼Œå¦‚æœæ˜¯æœ¬åœ°æœºå™¨è®¿é—®ï¼Œæ‰§è¡Œè¾“å…¥ localhost å³å¯\n6ã€Nginx é™æ€èµ„æºé…ç½®  åˆ‡æ¢åˆ°/usr/local/nginx/conf ç›®å½•ï¼Œå¹¶æ‰“å¼€ nginx.conf æ–‡ä»¶  1 2  cd /usr/local/nginx/conf\rvi nginx.conf\r  \r1ã€ä¸‹è½½å®‰è£…åŒ… http://nginx.org/en/download.htmlä¸‹è½½ç›¸åº”ç‰ˆæœ¬çš„windowså®‰è£…åŒ…ï¼Œè§£å‹åˆ°è‡ªå·±çš„æ–‡ä»¶å¤¹ä¸‹\n2ã€å¯åŠ¨ Nginx æœ‰å¾ˆå¤šç§æ–¹æ³•å¯åŠ¨ nginx\n  ç›´æ¥åŒå‡» nginx.exeï¼ŒåŒå‡»åä¸€ä¸ªé»‘è‰²çš„å¼¹çª—ä¸€é—ªè€Œè¿‡\n  æ‰“å¼€ cmd å‘½ä»¤çª—å£ï¼Œåˆ‡æ¢åˆ° nginx è§£å‹ç›®å½•ä¸‹ï¼Œè¾“å…¥å‘½ä»¤ nginx.exe æˆ–è€… start nginx ï¼Œå›è½¦å³å¯ã€‚\n  3ã€éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ  è¾“å…¥http://æœåŠ¡å™¨IP/ å¦‚æœèƒ½çœ‹åˆ° nginx çš„ç•Œé¢ï¼Œå°±è¡¨ç¤ºå®‰è£…æˆåŠŸäº†ï¼Œå¦‚æœæ˜¯æœ¬åœ°æœºå™¨è®¿é—®ï¼Œæ‰§è¡Œè¾“å…¥ localhost å³å¯ã€‚  4ã€Nginx é…ç½®ä»¥åŠé™æ€èµ„æºéƒ¨ç½²  è¿›å…¥ conf æ–‡ä»¶ï¼Œç¼–è¾‘ nginx.conf æ–‡ä»¶\n æ‰¾åˆ°ä»¥ä¸‹è¿™æ®µä»£ç ï¼š\n éƒ¨ç½²é™æ€èµ„æºæ—¶ç›´æ¥å°†å…¶å¤åˆ¶åˆ°éƒ¨ç½²æ–‡ä»¶ä¸‹å³å¯ï¼Œä¸‹é¢æ˜¯æˆ‘çš„åšå®¢é™æ€èµ„æº\n  \r\r\r'use strict';\rvar containerId = JSON.parse(\"\\\"0d751410100e3590\\\"\");\rvar containerElem = document.getElementById(containerId);\rvar tabLinks = null;\rvar tabContents = null;\rvar ids = [];\rif (containerElem) {\rtabLinks = containerElem.querySelectorAll('.tab__link');\rtabContents = containerElem.querySelectorAll('.tab__content');\r}\rfor (var i = 0; i 0) {\rtabContents[0].style.display = 'block';\r}\r ","description":"tabs, code-tabs, expand, alert, warning, notice, img, box","id":42,"section":"posts","tags":["å¼€å‘ç¯å¢ƒé…ç½®"],"title":"å„ç§å¼€å‘ç¯å¢ƒé…ç½®åˆé›†","uri":"https://mrxiaoling.github.io/en/posts/%E5%90%84%E7%A7%8D%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E9%9B%86%E5%90%88/"},{"content":"æ•°æ®é“¾è·¯çš„ä½œç”¨  æ•°æ®é“¾è·¯æŒ‡å‚è€ƒæ¨¡å‹çš„æ•°æ®é“¾è·¯å±‚ï¼Œæœ‰æ—¶ä¹ŸæŒ‡ä»¥å¤ªç½‘ï¼Œæ— çº¿å±€åŸŸç½‘ç­‰æ‰‹æ®µã€‚  æ•°æ®é“¾è·¯ç›¸å…³æŠ€æœ¯  MACåœ°å€ï¼ˆ Media Access Control Address ï¼‰  åª’ä½“è®¿é—®æ§åˆ¶åœ°å€ï¼Œä¹Ÿç§°ä¸ºå±€åŸŸç½‘åœ°å€ï¼ˆLAN Addressï¼‰ï¼Œä»¥å¤ªç½‘åœ°å€ï¼ˆEthernet Addressï¼‰æˆ–ç‰©ç†åœ°å€ï¼ˆPhysical Addressï¼‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªç”¨æ¥ç¡®è®¤ç½‘ç»œè®¾å¤‡ä½ç½®çš„åœ°å€ï¼ˆè¯†åˆ«æ•°æ®é“¾è·¯ä¸­äº’è¿çš„èŠ‚ç‚¹ï¼‰ã€‚     å…±äº«ä»‹è´¨å‹ç½‘ç»œ  å…±äº«ä»‹è´¨å‹ç½‘ç»œæœ‰ä¸¤ç§ä»‹è´¨è®¿é—®æ§åˆ¶æ–¹å¼ï¼š  äº‰ç”¨æ–¹å¼  ä¹Ÿå«CSMAï¼ˆ Carrier Sense Multiple Access ï¼Œè½½æ³¢ç›‘å¬å¤šè·¯è®¿é—®ï¼‰ åœ¨ä¸€éƒ¨åˆ†ä»¥å¤ªç½‘ä¸­é‡‡ç”¨çš„æ˜¯CSMA/CDæ–¹å¼ï¼ˆ Carrier Sense Multiple Access with Collision Detection ï¼Œè½½æ³¢ä¾¦å¬å¤šè·¯è®¿é—®ï¼ç¢°æ’æ£€æµ‹ï¼‰  å¦‚æœè½½æ³¢ä¿¡é“ä¸Šæ²¡æœ‰ä¿¡é“æµåŠ¨ï¼Œåˆ™ä»»ä½•æ ˆéƒ½å¯ä»¥å‘é€æ•°æ® æ£€æŸ¥æ˜¯å¦ä¼šå‘ç”Ÿå†²çªï¼Œä¸€æ—¦å‘ç”Ÿå†²çªï¼Œç«‹å³æ”¾å¼ƒå‘é€æ•°æ®ï¼ŒåŒæ—¶ç«‹å³é‡Šæ”¾è½½æ³¢ä¿¡é“ æ”¾å¼ƒå‘é€åï¼Œéšæœºå»¶æ—¶ä¸€æ®µæ—¶é—´ï¼Œåœ¨é‡æ–°äº‰ç”¨ä»‹è´¨ï¼Œé‡æ–°å‘é€å¸§     ä»¤ç‰Œä¼ é€’æ–¹å¼  æ²¿ç€ä»¤ç‰Œç¯å‘é€å«åšâ€œä»¤ç‰Œâ€çš„ç‰¹æ®ŠæŠ¥æ–‡ï¼Œåªæœ‰è·å¾—ä»¤ç‰Œé¢ç«™æ‰èƒ½å‘é€æ•°æ® ç‰¹ç‚¹ï¼š  ä¸ä¼šæœ‰å†²çª æ¯ä¸ªç«™éƒ½æœ‰é€šè¿‡å¹³ç­‰å¾ªç¯è·å¾—ä»¤ç‰Œçš„æœºä¼š         éå…±äº«ä»‹è´¨ç½‘ç»œ  ä¸€èˆ¬é‡‡ç”¨åŒå…¨å·¥é€šä¿¡æ–¹å¼ é€šè¿‡ä»¥å¤ªç½‘äº¤æ¢æœºæ„å»ºç½‘ç»œï¼Œä»è€Œä½¿è®¡ç®—æœºä¸äº¤æ¢æœºç«¯å£ä¹‹é—´å½¢æˆä¸€å¯¹ä¸€çš„è¿æ¥ï¼Œå³å¯å®ç°åŒå…¨å·¥é€šä¿¡ï¼Œä¸ä¼šå‘ç”Ÿå†²çª   æ ¹æ®ï¼­ï¼¡ï¼£åœ°å€è½¬å‘  ä»¥å¤ªç½‘æœ‰å¤šä¸ªç«¯å£ï¼Œæ ¹æ®æ¯ä¸ªå¸§çš„ç›®æ ‡MACåœ°å€å†³å®šä»å“ªä¸ªç½‘ç»œæ¥å£å‘é€æ•°æ®ï¼Œä¾é **è½¬å‘è¡¨ï¼ˆForwarding Tableï¼‰**å®ç° äº¤æ¢æœºè‡ªå­¦åŸç†  æ•°æ®é“¾è·¯å±‚çš„æ¯ä¸ªé€šè¿‡ç‚¹åœ¨è¿æ¥åˆ°åŒ…æ—¶ï¼Œä¼šä»ä¸­å°†æºMACåœ°å€ä»¥åŠæ›¾ç»æ¥æ”¶è¯¥åœ°å€å‘é€çš„æ•°æ®åŒ…çš„æ¥å£ä½œä¸ºå¯¹åº”å…³ç³»è®°å½•åˆ°è½¬å‘è¡¨ä¸­     ç¯è·¯æ£€æµ‹æŠ€æœ¯  ç”Ÿæˆæ ‘æ–¹å¼  æ¯ä¸ªç½‘æ¡¥å¿…é¡»åœ¨æ¯1~10ç§’å†…ç›¸äº’äº¤äº’BPDUï¼ˆBridge Protocol Data Unitï¼‰åŒ…ï¼Œä»è€Œåˆ¤æ–­å“ªäº›ç«¯å£ä¸é€‚ç”¨ï¼Œä»¥ä¾¿æ¶ˆé™¤ç¯è·¯ ç¼ºç‚¹æ˜¯å‘ç”Ÿæ•…éšœåˆ°åˆ‡æ¢ç½‘ç»œéœ€è¦å‡ åç§’ï¼Œæ‰€ä»¥å¯ç”¨RSTPï¼ˆRapid Spanning Tree Protocolï¼‰ï¼Œå¯ç¼©çŸ­è‡³å‡ ç§’å†…   æºè·¯ç”±æ³•   VLAN\n å¦‚ä¸Šå›¾ï¼Œäº¤æ¢æœºæŒ‰ç…§ç«¯å£åŒºåˆ†äº†å¤šä¸ªç½‘æ®µï¼Œä»è€ŒåŒºåˆ†äº†å¹¿æ’­æ•°æ®ä¼ æ’­çš„èŒƒå›´ï¼Œå‡å°‘äº†ç½‘ç»œè´Ÿè½½å¹¶æé«˜äº†ç½‘ç»œçš„å®‰å…¨æ€§ï¼Œä¸¤ä¸ªç½‘æ®µåˆ™éœ€è¦é€šè¿‡ä¸‰å±‚äº¤æ¢æœºï¼ˆå¦‚è·¯ç”±ï¼‰è¿›è¡Œé€šä¿¡    ä»¥å¤ªç½‘ï¼ˆEthernetï¼‰ ä»¥å¤ªç½‘å¸§æ ¼å¼  ä»¥å¤ªç½‘å‰ç«¯æœ‰ä¸ªå‰å¯¼ç ï¼ˆPreambleï¼‰çš„éƒ¨åˆ†ï¼Œè¡¨ç¤ºä¸€ä¸ªä»¥å¤ªç½‘å¸§çš„è€ƒè¯•ï¼Œä¹Ÿæ˜¯å¯¹ç«¯ç½‘å¡èƒ½å¤Ÿç¡®ä¿ä¸å…¶åŒæ­¥çš„æ ‡å¿—ï¼Œå‰å¯¼ç æœ«å°¾æ˜¯ä¸€ä¸ªå«åšâ€œSFDï¼ˆStart Frame Delimiterï¼‰â€çš„åŸŸï¼Œå€¼æ˜¯â€œ11â€ï¼Œåœ¨è¿™ä¸ªåŸŸåæ˜¯ä»¥å¤ªç½‘å¸§çš„æœ¬ä½“ æœ¬ä½“å‰ç«¯åé¢æ˜¯ä»¥å¤ªç½‘çš„é¦–éƒ¨ï¼Œå…±å 14ä¸ªå­—èŠ‚   FCSï¼ˆFrame Check Sequenceï¼Œå¸§æ£€éªŒåºåˆ—ï¼‰ï¼Œç”¨äºæ£€æµ‹å¸§æ˜¯å¦æœ‰æŸå  PPP  PPPï¼ˆPoint-to-Point Protocolï¼Œç‚¹å¯¹ç‚¹åè®®ï¼‰ PPPä¸»è¦åŠŸèƒ½åŒ…æ‹¬ä¸¤ä¸ªåè®®ï¼š  ä¸ä¾èµ–ä¸Šå±‚çš„LCPåè®®ï¼ˆLink Control Protocolï¼‰  è´Ÿè´£å»ºç«‹å’Œæ–­å¼€è¿æ¥ï¼Œè®¾ç½®æœ€å¤§æ¥æ”¶å•å…ƒï¼ˆMRU Maximum Receive Unitï¼‰ï¼Œè®¾ç½®éªŒè¯åè®®ï¼ˆPAPæˆ–CHAPï¼‰ä»¥åŠè®¾ç½®æ˜¯å¦è¿›è¡Œé€šä¿¡è´¨é‡çš„ç›‘æ§   ä¾èµ–ä¸Šå±‚çš„NCPåè®®ï¼ˆNetwotrk Control Protocolï¼‰ï¼Œå¦‚æœä¸Šå±‚ä¸ºIPï¼Œæ­¤æ—¶IPCPï¼ˆIP Control Protocolï¼‰  IPCPè´Ÿè´£IPåœ°å€è®¾ç½®ä»¥åŠæ˜¯å¦è¿›è¡ŒTCP/IPé¦–éƒ¨å‹ç¼©       é€šè¿‡PPPè¿æ¥æ—¶ï¼Œé€šå¸¸éœ€è¦è¿›è¡Œç”¨æˆ·åå¯†ç çš„éªŒè¯ï¼Œå¹¶å¯¹é€šä¿¡åŒç«¯è¿›è¡ŒåŒæ–¹å‘çš„éªŒè¯ï¼ˆä½†ä¸€èˆ¬å¯¹ISPä¸éªŒè¯ï¼‰ã€‚ä¸»è¦åè®®æœ‰ä¸¤ç§ï¼š  PAPï¼ˆPassword Authentication Protocolï¼‰  å¯†ç ä»¥æ˜æ–‡ä¼ è¾“ï¼Œå®‰å…¨æ€§è¾ƒå¼±   CHAPï¼ˆChallenge Handshake Authentication Protocolï¼‰  ä½¿ç”¨ä¸€æ¬¡æ€§å¯†ç ï¼ˆOne Time Passwordï¼‰ï¼Œå¯è®¿çªƒå¬ä¸”ä¼šè¿›è¡Œå®šæœŸçš„å¯†ç äº¤æ¢ï¼Œç”¨æ¥æ£€éªŒå¯¹ç«¯æ˜¯å¦ä¸­é€”è¢«æ›¿æ¢ã€‚     PPPçš„å¸§æ ¼å¼  PPPæ˜¯åŸºäºHDLCï¼ˆHigh Level Data Link Control Procedure,é«˜çº§æ•°æ®é“¾è·¯æ§åˆ¶ï¼‰åˆ¶å®šå‡ºæ¥çš„ä¸€ç§åè®® åœ¨æ¯ä¸ªå¸§çš„å‰ååŠ ä¸Šä¸€ä¸ª8ä½å­—èŠ‚çš„æ ‡å¿—ç â€œ01111110â€ç”¨æ¥åŒºåˆ†å¸§ï¼Œ åœ¨ä¸¤ä¸ªæ ‡å¿—ç ä¸­é—´ä¸å…è®¸å‡ºç°è¿ç»­6ä¸ªä¸€ä¸ªçš„â€œ1â€ï¼Œå½“å‡ºç°è¿ç»­5ä¸ª1æ—¶åé¢å¿…é¡»æ’å…¥ä¸€ä¸ªâ€œ0â€     PPPoE  ä»¥å¤ªç½‘æ²¡æœ‰éªŒè¯åŠŸèƒ½ï¼Œä¹Ÿæ²¡æœ‰å»ºç«‹å’Œæ–­å¼€è¿æ¥çš„å¤„ç†ï¼Œæ‰€ä»¥é‡‡ç”¨PPPoE(PPPoE over Ethernet)    ","description":"tabs, code-tabs, expand, alert, warning, notice, img, box","id":43,"section":"posts","tags":["å›¾è§£TCPIP"],"title":"æ•°æ®é“¾è·¯","uri":"https://mrxiaoling.github.io/en/posts/%E5%9B%BE%E8%A7%A3tcpip/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF/"},{"content":"è®¡ç®—æœºç½‘ç»œæ¦‚è¿°  å‚è€ƒï¼šã€ŠTCP/IPè¯¦è§£ å·1ï¼šåè®®ã€‹\nBç«™UPï¼šæ¹–ç§‘å¤§æ•™ä¹¦åŒ  https://space.bilibili.com/360996402/\n ç‰©ç†å±‚æ¦‚å¿µ  ç‰©ç†å±‚è§£å†³çš„æ˜¯å„ç§ä¼ è¾“åª’ä½“ä¸Šä¼ è¾“æ¯”ç‰¹0å’Œ1çš„é—®é¢˜ï¼Œè¿›è€Œç»™é“¾è·¯å±‚æä¾›é€æ˜ä¼ è¾“æ¯”ç‰¹æµçš„æœåŠ¡ï¼ˆæ‰€è°“â€œé€æ˜â€ï¼Œæ˜¯æŒ‡é“¾è·¯å±‚çœ‹ä¸è§ï¼Œä¹Ÿæ— éœ€çœ‹è§ç‰©ç†å±‚ä½¿ç”¨çš„ä»€ä¹ˆæ–¹æ³•è¿›è¡Œæ¯”ç‰¹ä¼ è¾“çš„ï¼Œåªéœ€äº«å—ç‰©ç†å±‚æä¾›çš„æ¯”ç‰¹æµä¼ è¾“æœåŠ¡å³å¯ï¼‰  ç‰©ç†å±‚åè®®çš„ä¸»è¦ä»»åŠ¡  æœºæ¢°ç‰¹æ€§ï¼š æŒ‡æ˜æ¥å£æ‰€ç”¨æ¥çº¿å™¨çš„å½¢çŠ¶å’Œå°ºå¯¸ï¼Œå¼•å¯¼æ•°ç›®å’Œæ’åˆ—ã€å›ºå®šå’Œé”å®šè£…ç½®ï¼› ç”µæ°”ç‰¹æ€§ï¼š æŒ‡æ˜åœ¨æ¥å£ç”µç¼†çš„å„æ¡çº¿ä¸Šå‡ºç°çš„ç”µå‹èŒƒå›´ï¼› åŠŸèƒ½ç‰¹æ€§ï¼š æŸæ¡çº¿ä¸Šå‡ºç°çš„æŸä¸€ç”µå¹³çš„ç”µå‹è¡¨ç¤ºä½•ç§æ„ä¹‰ï¼› è¿‡ç¨‹ç‰¹æ€§ï¼š æŒ‡æ˜å¯¹äºä¸åŒåŠŸèƒ½çš„å„ç§å¯èƒ½äº‹ä»¶çš„å‡ºç°ç‰¹æ€§ã€‚  ç‰©ç†å±‚ä¸‹çš„ä¼ è¾“åª’ä½“  å¯¼å¼•å‹ä¼ è¾“åª’ä½“ï¼š åŒè½´ç”µç¼†ã€åŒç»çº¿ã€å…‰çº¤å’Œç”µåŠ›çº¿ï¼› éå¯¼å¼•å‹ä¼ è¾“åª’ä½“ï¼š æ— çº¿ç”µæ³¢ã€å¾®æ³¢ã€çº¢å¤–çº¿å’Œå¯è§å…‰ã€‚  ä¼ è¾“æ–¹å¼  ä¸²è¡Œä¼ è¾“ä¸å¹¶è¡Œä¼ è¾“ï¼š ç½‘ç»œä¼ è¾“ä¸€èˆ¬ç”¨ä¸²è¡Œä¼ è¾“ï¼Œåœ¨è®¡ç®—æœºå†…éƒ¨ä¸€èˆ¬ç”¨å¹¶è¡Œï¼Œæ¯”å¦‚å¤šæ ¸CPUä¸æ€»çº¿ åŒæ­¥ä¼ è¾“ä¸å¼‚æ­¥ä¼ è¾“ å•å‘é€šä¿¡ï¼ˆå•å·¥ï¼‰ã€åŒå‘äº¤æ›¿é€šä¿¡ï¼ˆåŠåŒå·¥ï¼‰å’ŒåŒå‘åŒæ—¶é€šä¿¡ï¼ˆåŒå·¥ï¼‰  åŒæ­¥ä¼ è¾“ä¸å¼‚æ­¥ä¼ è¾“  åŒæ­¥ä¼ è¾“ï¼š  æ‰‹æ³•åŒæ–¹æ—¶é’ŸåŒæ­¥æ–¹æ³•ï¼š  å¤–åŒæ­¥ï¼š åœ¨åŒæ–¹ä¹‹é—´æ·»åŠ ä¸€æ¡å•ç‹¬çš„æ—¶é’Ÿä¿¡å·çº¿ï¼› å†…åŒæ­¥ï¼š å‘é€ç«¯å°†æ—¶é’ŸåŒæ­¥ä¿¡å·ç¼–ç åˆ°å‘é€æ•°æ®ä¸­ä¸€èµ·ä¼ è¾“ï¼Œå¦‚æ›¼å½»æ–¯ç‰¹ç¼–ç ã€‚     å¼‚æ­¥ä¼ è¾“  å­—èŠ‚ä¹‹é—´å¼‚æ­¥ï¼ˆå­—èŠ‚ä¹‹é—´çš„æ—¶é—´é—´éš”ä¸å›ºå®šï¼‰ å­—èŠ‚ä¸­çš„æ¯ä¸ªæ¯”ç‰¹ä»»ç„¶è¦åŒæ­¥ï¼ˆå„æ¯”ç‰¹çš„æŒç»­æ—¶é—´æ˜¯ç›¸åŒçš„ï¼‰    ç¼–ç è°ƒåˆ¶  ç å…ƒï¼š  åœ¨ä½¿ç”¨æ—¶é—´åŸŸçš„æ³¢å½¢è¡¨ç¤ºæ•°å­—ä¿¡å·æ—¶ï¼Œä»£è¡¨ä¸åŒç¦»æ•£æ•°å€¼çš„åŸºæœ¬æ³¢å½¢    å¸¸ç”¨ç¼–ç  è°ƒåˆ¶æ–¹æ³•  åŸºæœ¬è°ƒåˆ¶ä¸æ··åˆè°ƒåˆ¶  æ··åˆè°ƒåˆ¶ä¸¾ä¾‹-æ­£äº¤æŒ¯å¹…è°ƒåˆ¶QAM    ä¿¡é“çš„æé™å®¹é‡  ä¿¡å·å¤±çœŸé—®é¢˜ï¼š  å¥ˆæ°å‡†åˆ™  å¥ˆæ°å‡†åˆ™ï¼š  åœ¨å‡å®šçš„ç†æƒ³æ¡ä»¶ä¸‹ï¼Œä¸ºäº†é¿å…ç é—´ä¸²æ‰°ï¼Œç å…ƒä¼ è¾“é€Ÿç‡æ˜¯æœ‰ä¸Šé™çš„ï¼› åœ¨ç†æƒ³ä½é€šé“çš„æœ€é«˜ç å…ƒä¼ è¾“é€Ÿç‡=2W Baud = 2W ç å…ƒ/ç§’ï¼›ï¼ˆWï¼š ä¿¡é“å¸¦å®½ï¼ˆHzï¼‰ Baudï¼š æ³¢ç‰¹ï¼Œå³ç å…ƒ/ç§’ï¼‰ ç†æƒ³å¸¦é€šä¿¡é“çš„æœ€é«˜ç å…ƒä¼ è¾“é€Ÿç‡ = W Baud = W ç å…ƒ/ç§’ï¼› æ³¢ç‰¹ç‡ä¸æ¯”ç‰¹ç‡çš„å…³ç³»ï¼š  å½“ä¸€ä¸ªç å…ƒåªæºå¸¦1æ¯”ç‰¹çš„ä¿¡æ¯é‡æ—¶ï¼Œä¸¤è€…åœ¨æ•°å€¼ä¸Šæ˜¯ç›¸ç­‰çš„ï¼› å½“ä¸€ä¸ªç å…ƒæºå¸¦næ¯”ç‰¹çš„ä¿¡æ¯é‡æ—¶ï¼Œåˆ™æ³¢ç‰¹ç‡è½¬æ¢æˆæ¯”ç‰¹ç‡æ—¶ï¼Œæ•°å€¼è¦ä¹˜ä»¥n   è¦æé«˜ä¼ è¾“é€Ÿç‡ï¼ˆæ¯”ç‰¹ç‡ï¼‰ï¼Œå°±å¿…é¡»è®¾æ³•ä½¿æ¯ä¸€ä¸ªç å…ƒèƒ½æºå¸¦æ›´å¤šä¸ªæ¯”ç‰¹çš„ä¿¡æ¯é‡ï¼Œè¿™éœ€è¦é‡‡ç”¨å¤šå…ƒåˆ¶   é¦™å†œå…¬å¼ï¼š  å¸¦å®½å—é™ä¸”æœ‰é«˜æ–¯ç™½å™ªå£°å¹²æ‰°çš„ä¿¡é“çš„æé™ä¿¡æ¯ä¼ è¾“é€Ÿç‡ï¼›    $$\nc=W\\times \\log_{2}(\\frac SN + 1)\n$$\nc: ä¿¡é“çš„æé™ä¿¡æ¯ä¼ è¾“é€Ÿç‡ï¼ˆb/sï¼‰\nWï¼š ä¿¡é“å¸¦å®½ï¼ˆHzï¼‰\nSï¼š ä¿¡é“å†…æ‰€ä¼ ä¿¡å·çš„å¹³å‡åŠŸç‡\nNï¼š ä¿¡é“å†…çš„é«˜æ–¯å™ªå£°åŠŸç‡\nS/N: ä¿¡å™ªæ¯”ï¼Œä½¿ç”¨åˆ†è´ï¼ˆdBï¼‰ä½œå•ä½\n$$\nS/N=10 \\times \\log_{10}\\frac SN (dB)\n$$\n æ ¹æ®å…¬å¼ï¼Œè¦æƒ³æé«˜ä¼ è¾“é€Ÿç‡ï¼Œå¿…é¡»æé«˜ä¿¡é“ä¸­çš„ä¿¡å™ªæ¯”  ","description":"tabs, code-tabs, expand, alert, warning, notice, img, box","id":44,"section":"posts","tags":["ç½‘ç»œåè®®"],"title":"ç‰©ç†å±‚åè®®","uri":"https://mrxiaoling.github.io/en/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%89%A9%E7%90%86%E5%B1%82/"},{"content":"è®¡ç®—æœºç½‘ç»œæ¦‚è¿°  å‚è€ƒï¼šã€ŠTCP/IPè¯¦è§£ å·1ï¼šåè®®ã€‹\nBç«™UPï¼šæ¹–ç§‘å¤§æ•™ä¹¦åŒ  https://space.bilibili.com/360996402/\nOSIä½“ç³»ç»“æ„ï¼š https://blog.csdn.net/taotongning/article/details/81352985\nhttps://blog.csdn.net/qq_37954088/article/details/80171093\n ç½‘ç»œæ•°æ®äº¤äº’æ–¹æ³•   ä¸‰ç§äº¤æ¢æ–¹å¼ï¼š\n ç”µè·¯äº¤æ¢ åˆ†ç»„äº¤æ¢ æŠ¥æ–‡äº¤æ¢    ç”µè·¯äº¤æ¢çš„ 3 ä¸ªæ­¥éª¤\n å»ºç«‹è¿æ¥ï¼ˆåˆ†é…é€šä¿¡èµ„æºï¼‰ é€šè¯ï¼ˆä¸€ç›´å ç”¨é€šä¿¡èµ„æºï¼‰ é‡Šæ”¾è¿æ¥ï¼ˆå½’è¿˜é€šä¿¡èµ„æºï¼‰   åˆ†ç»„äº¤æ¢\nå°†å¾…å‘é€çš„èµ„æºåˆ†è§£æˆä¸€å®šå­—èŠ‚æ•°çš„æ•°å­—ä¿¡æ¯â€œå—â€ç‹¬ç«‹é€šè¿‡ç½‘ç»œï¼Œæ¥è‡ªä¸åŒçš„å—å¯ä»¥ç»„åˆï¼Œè€Œä¸”ä»¥åå¯ä»¥åˆ†è§£ï¼Œè¿™è¢«ç§°ä¸ºå¤šè·¯å¤ç”¨ã€‚  ä¸‰ç§æ–¹å¼çš„å¯¹æ¯”  ç”µè·¯äº¤æ¢ä¼˜ç‚¹      ä¼˜ç‚¹ ç¼ºç‚¹     åˆ†ç»„äº¤æ¢ 1. æ— éœ€å»ºç«‹è¿æ¥ï¼› 2. çº¿è·¯åˆ©ç”¨ç‡é«˜ï¼› 3. ç®€åŒ–äº†å­˜å‚¨ç®¡ç†ï¼› 4. åŠ é€Ÿä¼ è¾“ï¼› 5. å‡å°‘å‡ºé”™ç‡ 1. å¼•èµ·äº†è½¬å‘æ—¶å»¶ï¼› 2. éœ€è¦ä¼ è¾“é¢å¤–çš„ä¿¡æ¯ï¼Œä¾‹å¦‚æºåœ°å€ï¼Œç›®çš„åœ°å€ï¼› 3. å¯¹äºæ•°æ®æŠ¥å­˜åœ¨å¤±åºï¼Œä¸¢å¤±æˆ–é‡å¤åˆ†ç»„çš„é—®é¢˜ï¼›å¯¹äºè™šç”µè·¯æœåŠ¡ï¼Œå­˜åœ¨å‘¼å«å»ºç«‹ï¼Œæ•°æ®ä¼ è¾“å’Œè™šç”µè·¯é‡Šæ”¾ä¸‰ä¸ªè¿‡ç¨‹   ç”µè·¯äº¤æ¢ 1. æ—¶å»¶å° ï¼›2.æœ‰åºä¼ è¾“ ï¼›3. æ— å†²çªï¼› 4. é€‚ç”¨èŒƒå›´å¹¿ï¼› 5. å®ç”¨æ€§å¼ºï¼› 6. æ§åˆ¶ç®€å• 1. å»ºç«‹è¿æ¥æ—¶é—´é•¿ï¼›2. çº¿è·¯ç‹¬å ï¼Œä½¿ç”¨æ•ˆç‡ä½ï¼›3. çµæ´»æ€§å·®ï¼› 4. éš¾ä»¥è§„æ ¼åŒ–   æŠ¥æ–‡äº¤æ¢ 1. æ— éœ€å»ºç«‹è¿æ¥ï¼› 2. åŠ¨æ€åˆ†é…çº¿è·¯ï¼› 3. æé«˜çº¿è·¯å¯é æ€§ï¼› 4. æé«˜çº¿è·¯åˆ©ç”¨ç‡ï¼› 5. æä¾›å¤šç›®æ ‡æœåŠ¡ 1. å¼•èµ·äº†è½¬å‘æ—¶å»¶ï¼› 2. éœ€è¦è¾ƒå¤§çš„å­˜å‚¨ç©ºé—´ï¼› 3. éœ€è¦ä¼ è¾“é¢å¤–çš„ä¿¡æ¯ã€‚    ç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡ å¸¦å®½  ç”¨æ¥è¡¨ç¤ºç½‘ç»œçš„é€šä¿¡çº¿è·¯æ‰€èƒ½ä¼ é€æ•°æ®çš„èƒ½åŠ›ï¼Œå³å•ä½æ—¶é—´å†…ä»ç½‘ç»œä¸­çš„æŸä¸€ç‚¹åˆ°å¦ä¸€ç‚¹çš„æœ€é«˜é€Ÿç‡ï¼Œå•ä½ï¼šb/s,kb/s,Mb/s,Gb/s,Tb/sã€‚  é€Ÿç‡ æ¯”ç‰¹ï¼šè®¡ç®—æœºä¸­æ•°æ®é‡çš„å•ä½ï¼Œä¹Ÿæ˜¯ä¿¡æ¯è®ºä¸­æ•°æ®é‡çš„å•ä½ã€‚ä¸€ä¸ªæ¯”ç‰¹å°±æ˜¯äºŒè¿›åˆ¶ä¸­çš„ä¸€ä¸ªâ€œ0â€æˆ–ä¸€ä¸ªâ€œ1â€ï¼Œå¸¸è§æ¢ç®—ï¼š\n 8bit = 1 Byte KB = 2^10B\nMB = KÂ·KB=2^10Â·2^10B=2^20B\nGB=KÂ·MB = 2^30B\nTB = KÂ·GB = 2^40B  é€Ÿç‡ï¼šè¿æ¥åœ¨è®¡ç®—æœºç½‘ç»œçš„ä¸»æœºåœ¨ä¼ é€æ¯”ç‰¹çš„é€Ÿç‡ï¼Œä¹Ÿç§°ä¸ºæ¯”ç‰¹é€Ÿç‡æˆ–æ•°æ®ç‡ã€‚\n  bit/s (b/s , bps)\nkb/s = 10^3 b/s\nMb/s = 10^3Â·10^3b/s\n  ååé‡  å•ä½æ—¶é—´å†…é€šè¿‡æŸä¸ªç½‘ç»œï¼ˆä¿¡é“ï¼Œæ¥å£ï¼‰çš„æ•°æ®é‡ã€‚  æ—¶å»¶ ç½‘ç»œæ—¶å»¶=å‘é€æ—¶å»¶+ä¼ æ’­æ—¶å»¶+ å¤„ç†æ—¶å»¶\n å‘é€æ—¶å»¶ï¼šåˆ†ç»„é•¿åº¦(b)/å‘é€é€Ÿç‡(b/s) ä¼ æ’­æ—¶å»¶ï¼šä¿¡é“é•¿åº¦(m)/ç”µç£æ³¢ä¼ æ’­é€Ÿç‡(m/s) å¤„ç†æ—¶å»¶ï¼šä¸å®¹æ˜“è®¡ç®—  æ—¶å»¶å¸¦å®½ç§¯  æ—¶å»¶å¸¦å®½ç§¯ = ä¼ æ’­æ—¶å»¶*å¸¦å®½ åˆç§°ä»¥æ¯”ç‰¹ä¸ºå•ä½çš„é“¾è·¯é•¿åº¦  å¾€è¿”æ—¶é—´ï¼ˆRound-Trip Timeï¼‰  åŒå‘äº¤äº’ä¸€æ¬¡æ‰€éœ€è¦çš„çš„æ—¶é—´  åˆ©ç”¨ç‡  åˆ©ç”¨ç‡åŒ…æ‹¬ä¿¡é“åˆ©ç”¨ç‡å’Œç½‘ç»œåˆ©ç”¨ç‡ ä¿¡é“åˆ©ç”¨ç‡ï¼šè¡¨ç¤ºä¿¡é“æœ‰ç™¾åˆ†ä¹‹å‡ çš„æ—¶é—´æ˜¯æœ‰æ•°æ®é€šè¿‡çš„ï¼› ç½‘ç»œåˆ©ç”¨ç‡ï¼š å…¨ç½‘ç»œçš„ä¿¡é“åˆ©ç”¨ç‡çš„åŠ æƒå¹³å‡  åˆ©ç”¨ç‡å¹¶éè¶Šé«˜è¶Šå¥½â€”â€”â€”â€”â€”â€”æ ¹æ®æ’é˜Ÿè®ºï¼Œè¯¥ä¿¡æ¯å¼•èµ·çš„æ—¶å»¶ä¼šè¿…é€Ÿå¢åŠ \rä¸¢åŒ…ç‡  å³åˆ†ç»„ä¸¢å¤±ç‡ï¼ŒæŒ‡åœ¨ä¸€å®šçš„æ—¶é—´èŒƒå›´å†…ï¼Œä¼ è¾“è¿‡ç¨‹ä¸­ä¸¢å¤±çš„åˆ†ç»„æ•°é‡ä¸æ€»åˆ†ç»„æ•°é‡çš„æ¯”ç‡ åˆ†ç»„ä¸¢å¤±çš„ä¸¤ç§ä¸»è¦æƒ…å†µï¼š   åˆ†ç»„åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‡ºç°è¯¯ç ï¼Œè¢«ç»“ç‚¹ä¸¢å¼ƒï¼› åˆ†ç»„åœ¨åˆ°è¾¾å¦ä¸€å°é˜Ÿåˆ—å·²æ»¡çš„åˆ†ç»„äº¤æ¢æœºæ—¶è¢«ä¸¢å¼ƒï¼›åœ¨é€šä¿¡é‡è¾ƒå¤§æ—¶å°±å¯èƒ½é€ æˆç½‘ç»œæ‹¥å¡ã€‚  è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„åˆ†å±‚ TCP/IPä½“ç³»ç»“æ„   TCP/IPä½“ç³»ç»“æ„çš„äº”å±‚åˆ†åˆ«ä¸ºï¼šåº”ç”¨å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ã€æ•°æ®é“¾è·¯å±‚ã€ç‰©ç†å±‚\n  å…¶ä¸­ç‰©ç†å±‚å¯ä»¥å½’ä¸ºç¡¬ä»¶æŠ€æœ¯ï¼Œæ•°æ®é“¾è·¯å±‚ï¼Œç½‘ç»œå±‚å’Œä¼ è¾“å±‚å¯ä»¥å½’ä¸ºç³»ç»Ÿå±‚ï¼Œè€Œåº”ç”¨å±‚å¯ä»¥å½’ä¸ºç”¨æˆ·å±‚ã€‚\nç‰©ç†å±‚\ræ•°æ®é“¾è·¯å±‚\rç½‘ç»œå±‚\rä¼ è¾“å±‚\råº”ç”¨å±‚\ræ€»ç»“\r\r å­—é¢æ„æ€è§£é‡Šï¼šç‰©ç†ä¼ è¾“ã€ç¡¬ä»¶ã€ç‰©ç†ç‰¹æ€§ã€‚ç‹­ä¹‰æ„æ€å¯ä»¥æ˜¯å…‰ç¼†ã€ç”µç¼†ã€åŒç»çº¿å’Œæ— çº¿ç”µæ³¢è¿™äº›ä¼ è¾“ä»‹è´¨ã€ç‰©ç†æ¥å£ï¼Œä¸­é—´ä¼ çš„æ˜¯ç”µä¿¡å·æˆ–å…‰ä¿¡å· \r\r æ ‡å¿—ç½‘ç»œä¸­çš„å„ä¸»æœºï¼ˆä¸»æœºç¼–ç é—®é¢˜ï¼Œä¾‹å¦‚MACåœ°å€ï¼‰ ä»ä¿¡å·æ‰€è¡¨ç¤ºçš„ä¸€ä¸²æ¯”ç‰¹æµä¸­åŒºåˆ†å‡ºåœ°å€å’Œæ•°æ® åè°ƒå„ä¸»æœºäº‰ç”¨æ€»çº¿\n \r\r æ ‡å¿—å„ç½‘ç»œä»¥åŠç½‘ç»œä¸­çš„å„ä¸»æœºï¼ˆç½‘ç»œå’Œä¸»æœºå…±åŒç¼–å€çš„é—®é¢˜ï¼Œä¾‹å¦‚IPåœ°å€ï¼‰ è·¯ç”±å™¨å¦‚ä½•è½¬å‘åˆ†ç»„ï¼Œå¦‚ä½•è¿›è¡Œè·¯ç”±é€‰æ‹©\n \r\r  ä¼ è¾“å±‚æ˜¯è´Ÿè´£åœ¨ä¼šè¯è¿›ç¨‹ä¹‹é—´å»ºå’Œç»´æŠ¤ç«¯â€”â€”ç«¯è¿æ¥çš„ï¼Œå®ç°ç½‘ç»œç¯å¢ƒä¸­åˆ†å¸ƒå¼é€šä¿¡ã€‚\n  è§£å†³è¿›ç¨‹ä¹‹é—´åŸºäºç½‘ç»œçš„é€šä¿¡é—®é¢˜\n  å‡ºç°ä¼ è¾“é”™è¯¯æ—¶ï¼Œå¦‚ä½•å¤„ç†\n  \r é€šè¿‡åº”ç”¨è¿›ç¨‹é—´çš„äº¤äº’æ¥å®Œæˆç‰¹å®šçš„ç½‘ç»œåº”ç”¨\n \r\r\r\r\r'use strict';\rvar containerId = JSON.parse(\"\\\"41ff45eac6c30962\\\"\");\rvar containerElem = document.getElementById(containerId);\rvar tabLinks = null;\rvar tabContents = null;\rvar ids = [];\rif (containerElem) {\rtabLinks = containerElem.querySelectorAll('.tab__link');\rtabContents = containerElem.querySelectorAll('.tab__content');\r}\rfor (var i = 0; i 0) {\rtabContents[0].style.display = 'block';\r}\r\n  OSIä½“ç³»ç»“æ„  OSIä½“ç³»ç»“æ„çš„ä¸ƒå±‚åˆ†åˆ«ä¸ºï¼šåº”ç”¨å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ã€æ•°æ®é“¾è·¯å±‚ã€ä¼šè¯å±‚ã€è¡¨ç¤ºå±‚ã€ç‰©ç†å±‚  ","description":"tabs, code-tabs, expand, alert, warning, notice, img, box","id":45,"section":"posts","tags":["ç½‘ç»œåè®®"],"title":"è®¡ç®—æœºç½‘ç»œæ¦‚è¿°","uri":"https://mrxiaoling.github.io/en/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0/"},{"content":"é“¾è·¯å±‚  å‚è€ƒï¼šã€ŠTCP/IPè¯¦è§£ å·1ï¼šåè®®ã€‹\nBç«™UPï¼šæ¹–ç§‘å¤§æ•™ä¹¦åŒ  https://space.bilibili.com/360996402/\n é“¾è·¯å±‚æ¦‚å¿µ  æ²¿ç€é€šä¿¡è·¯åŠ²è¿æ¥ç›¸é‚»èŠ‚ç‚¹ï¼ˆè¿è¡Œé“¾è·¯å±‚åè®®çš„ä»»ä½•è®¾å¤‡ç§°ä¸ºâ€œèŠ‚ç‚¹â€œåŒ…æ‹¬ä¸»æœºï¼Œè·¯ç”±å™¨å’Œäº¤æ¢æœºç­‰ï¼‰çš„é€šä¿¡ä¿¡é“ç§°ä¸ºé“¾è·¯ï¼ˆlinkï¼‰ã€‚  é“¾è·¯å±‚åè®®æä¾›çš„æœåŠ¡  æˆå¸§ï¼ˆframingï¼‰ï¼šç½‘ç»œå±‚æ•°æ®æŠ¥ç»é“¾è·¯å±‚å‘é€å‰ï¼Œé“¾è·¯å±‚åè®®å°†å…¶ç”¨é“¾è·¯å±‚å¸§å°è£…èµ·æ¥ï¼› é“¾è·¯æ¥å…¥ï¼šåª’ä½“è®¿é—®æ§åˆ¶ï¼ˆMedium Access Controlï¼ŒMACï¼‰åè®®è§„å®šäº†å¸§åœ¨é“¾è·¯ä¸Šçš„ä¼ è¾“è§„åˆ™ï¼› å¯é äº¤ä»˜ï¼šä¿è¯æ— å·®é”™åœ°ç»é“¾è·¯å±‚ç§»åŠ¨æ¯ä¸ªç½‘ç»œå±‚æ•°æ®æŠ¥ï¼› å·®é”™æ£€æµ‹å’Œçº æ­£ã€‚  é“¾è·¯å±‚åœ¨ä½•å¤„å®ç°  é“¾è·¯å±‚çš„ä¸»ä½“éƒ¨åˆ†åœ¨ç½‘ç»œé€‚é…å™¨ï¼ˆnetwork adapterï¼‰ä¸­å®ç°çš„ã€‚  å·®é”™æ£€æµ‹ä¸çº æ­£è®¡æ•° å¥‡å¶æ ¡éªŒ  å‘é€çš„ä¿¡æ¯Dæœ‰dä¸ªæ¯”ç‰¹ï¼Œå‘é€æ—¶é™„åŠ ä¸€ä¸ªæ¯”ç‰¹ï¼Œé€‰æ‹©å®ƒçš„å€¼ä½¿å¾—è¿™d+1ä¸ªæ¯”ç‰¹ä¸­â€œ1â€çš„æ€»æ•°æ˜¯å¶æ•°ï¼› æ›´å¸¸ç”¨çš„æ˜¯äºŒç»´å¥‡å¶æ ¡éªŒï¼šå°†dä¸ªæ¯”ç‰¹åˆ’åˆ†ä¸ºiè¡Œjåˆ—,å¯¹æ¯è¡Œå’Œæ¯åˆ—è®¡ç®—å¥‡å¶å€¼ï¼Œäº§ç”Ÿçš„i+j+1ä¸ªå¥‡å¶æ¯”ç‰¹æ„æˆäº†é“¾è·¯å±‚å¸§çš„å·®é”™æ£€æµ‹æ¯”ç‰¹ï¼› è¿™ç§æ¥æ”¶æ–¹æ£€æµ‹å’Œçº æ­£å·®é”™çš„èƒ½åŠ›è¢«ç§°ä¸ºå‰å‘çº é”™ï¼ˆForward Error Correctionï¼ŒFECï¼‰  æ£€éªŒå’Œæ–¹æ³•  å¯¹æ•°æ®çš„å­—èŠ‚ä½œä¸º16æ¯”ç‰¹çš„æ•´æ•°å¹¶æ±‚å’Œï¼Œæ¥æ”¶æ–¹å¯¹æ•°æ®å’Œæ±‚åç ï¼Œæ£€æµ‹å…¶ç»“æœæ˜¯å¦å…¨ä¸º1ï¼Œå¦‚æœè¿™äº›æ¯”ç‰¹æœ‰ä»»ä½•æ¯”ç‰¹ä¸º0ï¼Œè¡¨ç¤ºå‡ºå·®é”™ã€‚  å¾ªç¯å†—ä½™æ£€æµ‹CRC  CRCåˆè¢«ç§°ä¸ºå¤šé¡¹å¼ç¼–ç ï¼Œæ¥æ”¶æ–¹ç”¨ç”Ÿæˆçš„å¤šé¡¹å¼Gå»é™¤æ¥æ”¶åˆ°çš„d+ræ¯”ç‰¹ï¼Œå¦‚æœä½™æ•°ä¸º0è¡¨ç¤ºæœªå‡ºé”™ï¼Œå¦åˆ™è®¤ä¸ºæ•°æ®æœªæ­£ç¡®å‘é€ã€‚  å¤šè·¯è®¿é—®é“¾è·¯å’Œåè®®  å¤šè·¯è®¿é—®åè®®ï¼ˆmutiple access protocolï¼‰:èŠ‚ç‚¹é€šè¿‡è¿™äº›åè®®æ¥è§„èŒƒä»–ä»¬åœ¨å…±äº«çš„å¹¿æ’­ä¿¡é“ä¸Šçš„ä¼ è¾“è¡Œä¸ºã€‚  ä¿¡é“åˆ’åˆ†åè®®  æ—¶åˆ†å¤šè·¯å¤ç”¨ï¼ˆTDMï¼‰  ä¼˜ç‚¹ï¼š  æ¶ˆé™¤äº†ç¢°æ’ï¼Œè€Œä¸”éå¸¸å…¬å¹³ï¼›   ç¼ºç‚¹ï¼š  å„ä¸ªç»“ç‚¹çš„é€Ÿç‡è¢«é™åˆ¶åœ¨äº†R/N bpsçš„å¹³å‡é€Ÿç‡ï¼Œå³æ—¶å®ƒæ˜¯å”¯ä¸€è¦å‘é€åˆ†ç»„çš„ç»“ç‚¹ã€‚     é¢‘åˆ†å¤šè·¯å¤ç”¨ï¼ˆFDMï¼‰  ä¼˜ç¼ºç‚¹åŒTDM   ç åˆ†å¤šå€ï¼ˆCode Division Mutiple Access,CDMAï¼‰  CDMAå¯¹æ¯ä¸ªç»“ç‚¹åˆ†é…ä¸€ç§ä¸åŒçš„ç¼–ç ï¼Œç„¶åæ¯ä¸ªç»“ç‚¹ç”¨å®ƒå”¯ä¸€çš„ç¼–ç æ¥å¯¹å®ƒå‘é€çš„æ•°æ®è¿›è¡Œç¼–ç ã€‚    éšæœºæ¥å…¥åè®®  åœ¨æ­¤åè®®ä¸­ï¼Œä¸€ä¸ªä¼ è¾“ç»“ç‚¹æ€»æ˜¯ä»¥ä¿¡é“çš„å…¨éƒ¨é€Ÿç‡Rè¿›è¡Œå‘é€ï¼Œå½“æœ‰ç¢°æ’æ—¶ï¼Œæ¶‰åŠåˆ°çš„ç»“ç‚¹åå¤çš„é‡å‘ï¼ŒçŸ¥é“è¯¥åˆ†ç»„äº”æ— ç¢°æ’çš„é€šè¿‡ä¸ºæ­¢ï¼› éšæœºæ¥å…¥åè®®æœ‰æ—¶éš™ALOHAï¼ŒALOHAï¼Œè½½æ³¢ä¾¦å¬å¤šè·¯è®¿é—®ï¼ˆCSMAï¼‰ï¼Œå…·æœ‰ç¢°æ’æ£€æµ‹çš„è½½æ³¢ä¾¦å¬å¤šè·¯è®¿é—®ï¼ˆCSMA/DAï¼‰ã€‚  è½®æµåè®®  ä¸»è¦åè®®æœ‰è½®è¯¢åè®®ï¼ˆpolling protocolï¼‰å’Œä»¤ç‰Œä¼ é€’åè®®ï¼ˆtoken-passing protocol)ã€‚  DOCSIS  è¿™æ˜¯ç”¨äºç”µç¼†å› ç‰¹ç½‘æ¥å…¥çš„é“¾è·¯å±‚åè®®  äº¤æ¢å±€åŸŸç½‘ é“¾è·¯å±‚å¯»å€å’ŒARP  é“¾è·¯å±‚åœ°å€æœ‰å¤šç§ç§°å‘¼ï¼šLANåœ°å€ï¼ˆLAN adressï¼‰ã€ç‰©ç†åœ°å€ï¼ˆphysical addressï¼‰å’ŒMACåœ°å€ï¼ˆMAC addressï¼‰ï¼Œå…¶ä¸­MACåœ°å€æœ€å¸¸ç”¨ï¼› å› ä¸ºç½‘ç»œå±‚åœ°å€ï¼ˆå¦‚IPåœ°å€ï¼‰å’Œé“¾è·¯å±‚åœ°å€ï¼ˆMACåœ°å€ï¼‰ä¹‹é—´éœ€è¦äº’ç›¸è½¬æ¢ï¼Œæ‰€ä»¥éœ€è¦åœ°å€è§£æåè®®ï¼ˆAddress Resolution Protocolï¼ŒARPï¼‰ï¼› ARPåªèƒ½åœ¨åŒä¸€ä¸ªå­ç½‘ä¸‹çš„ä¸»æœºå’Œè·¯ç”±å™¨æ¥å£è§£æIPåœ°å€ï¼› å½“éœ€è¦å‘é€æ•°æ®åˆ°å¤–ç½‘æ—¶ï¼Œé¦–å…ˆé€šè¿‡IPå¯»å€æ‰¾åˆ°ç›®çš„ä¸»æœºå­ç½‘çš„è·¯ç”±å™¨ï¼Œå†é€šè¿‡è¿™è·¯ç”±å™¨ç”¨ARPæ‰¾åˆ°ç›®çš„MACåœ°å€çš„ä¸»æœºã€‚  ä»¥å¤ªç½‘  æ‰€æœ‰çš„ä»¥å¤ªç½‘æŠ€æœ¯éƒ½å‘ç½‘ç»œå±‚æä¾›æ— è¿æ¥æœåŠ¡ï¼Œä¹Ÿå°±æ˜¯è¯´å½“é€‚é…å™¨Aè¦å‘é€‚é…å™¨Bå‘é€ä¸€ä¸ªæ•°æ®æŠ¥æ—¶ï¼Œé€‚é…å™¨Aåœ¨ä¸€ä¸ªä»¥å¤ªç½‘å¸§ä¸­å°è£…è¯¥æ•°æ®æŠ¥ï¼Œå¹¶æŠŠè¯¥å¸§å‘é€åˆ°å±€åŸŸç½‘ä¸Šï¼Œæ²¡æœ‰å…ˆä¸é€‚é…å™¨Bæ¡æ‰‹ã€‚  ","description":"tabs, code-tabs, expand, alert, warning, notice, img, box","id":46,"section":"posts","tags":["ç½‘ç»œåè®®"],"title":"é“¾è·¯å±‚åè®®","uri":"https://mrxiaoling.github.io/en/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82/"},{"content":"synchronizedå…³é”®å­—  å¯¹è±¡é”å’Œç±»é”ï¼š https://blog.csdn.net/u013142781/article/details/51697672\n  é¦–å…ˆè¦æ˜ç™½synchronizedå…³é”®å­—é”å®šçš„æ˜¯å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä»£ç å—ï¼ï¼Œè¿™ä¸ªå¯¹è±¡å¯ä»¥è‡ªå·±æŒ‡å®šï¼›  1 2 3 4 5 6 7 8 9 10 11 12 13 14  public class T {\rprivate int count = 10;\rprivate Object o = new Object();\rpublic void m() {\rsynchronized(o) {\r//ä»»ä½•çº¿ç¨‹è¦æ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼Œå¿…é¡»å…ˆæ‹¿åˆ°oçš„é”\r\tcount--;\rSystem.out.println(Thread.currentThread().getName() + \u0026#34; count = \u0026#34; + count);\r}\r}\r}\r  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  public class T {\rprivate int count = 10;\rpublic synchronized void m() {\r//ç­‰åŒäºåœ¨æ–¹æ³•çš„ä»£ç æ‰§è¡Œæ—¶è¦synchronized(this)\r //è¿™é‡Œé”å®šæ˜¯classå¯¹è±¡\r\tcount--;\rSystem.out.println(Thread.currentThread().getName() + \u0026#34; count = \u0026#34; + count);\r}\r/**\r* public void m() {\r* synchronized(this) {\r* //ä»»ä½•çº¿ç¨‹è¦æ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼Œå¿…é¡»å…ˆæ‹¿åˆ°thisçš„é”\r* count--;\r* System.out.println(Thread.currentThread().getName() + \u0026#34; count = \u0026#34; + count);\r* }* }\r*/\r}\r   åœ¨å®ä¾‹æ–¹æ³•ä¸Šé”å®šçš„æ˜¯å¯¹è±¡ï¼Œç”¨åœ¨é™æ€æ–¹æ³•é”å®šçš„æ˜¯classå¯¹è±¡  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  public class T {\rprivate static int count = 10;\rpublic synchronized static void m() { //è¿™é‡Œç­‰åŒäºsynchronized(yxxy.c_004.T.class)\r\tcount--;\rSystem.out.println(Thread.currentThread().getName() + \u0026#34; count = \u0026#34; + count);\r}\rpublic static void mm() {\rsynchronized(T.class) {\r//è€ƒè™‘ä¸€ä¸‹è¿™é‡Œå†™synchronized(this)æ˜¯å¦å¯ä»¥ï¼Ÿ\r\t//ç­”æ¡ˆæ˜¯ä¸å¯ä»¥\r\t//å› ä¸ºé™æ€ç±»å’Œé™æ€æ–¹æ³•æ˜¯éœ€è¦é€šè¿‡newå‡ºå¯¹è±¡å°±å¯ä»¥è®¿é—®çš„ï¼Œè¿™æ—¶å€™æ˜¯æ²¡æœ‰thiså¼•ç”¨çš„\r\tcount --;\r}\r}\r}\r    åŒæ­¥å’ŒéåŒæ­¥æ–¹æ³•æ˜¯å¦å¯ä»¥åŒæ—¶è°ƒç”¨ï¼Ÿ\n  å¯ä»¥ï¼\n  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29  public class T {\rpublic synchronized void m1() { System.out.println(Thread.currentThread().getName() + \u0026#34; m1 start...\u0026#34;);\rtry {\rThread.sleep(10000);\r} catch (InterruptedException e) {\re.printStackTrace();\r}\rSystem.out.println(Thread.currentThread().getName() + \u0026#34; m1 end\u0026#34;);\r}\rpublic void m2() {\rtry {\rThread.sleep(5000);\r} catch (InterruptedException e) {\re.printStackTrace();\r}\rSystem.out.println(Thread.currentThread().getName() + \u0026#34; m2 \u0026#34;);\r}\rpublic static void main(String[] args) {\rT t = new T();\rnew Thread(t::m1, \u0026#34;t1\u0026#34;).start();\rnew Thread(t::m2, \u0026#34;t2\u0026#34;).start();\r}\r}\r   å¯¹ä¸šåŠ¡å†™æ–¹æ³•åŠ é”,å¯¹ä¸šåŠ¡è¯»æ–¹æ³•ä¸åŠ é”,å®¹æ˜“äº§ç”Ÿè„è¯»é—®é¢˜ï¼ˆdirtyRead)  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42  public class Account {\rString name;\rdouble balance;\rpublic synchronized void set(String name, double balance) {\rthis.name = name;\rtry {\r//ä¸­æ–­ï¼Œæ¨¡æ‹Ÿç°å®ç‰¹å®šåœºæ™¯\r\tThread.sleep(2000);\r} catch (InterruptedException e) {\re.printStackTrace();\r}\rthis.balance = balance;\r}\rpublic /*synchronized*/ double getBalance(String name) {\rreturn this.balance;\r}\rpublic static void main(String[] args) {\rAccount a = new Account();\rnew Thread(()-\u0026gt;a.set(\u0026#34;zhangsan\u0026#34;, 100.0)).start();\rtry {\rTimeUnit.SECONDS.sleep(1);\r} catch (InterruptedException e) {\re.printStackTrace();\r}\rSystem.out.println(a.getBalance(\u0026#34;zhangsan\u0026#34;));\rtry {\rTimeUnit.SECONDS.sleep(2);\r} catch (InterruptedException e) {\re.printStackTrace();\r}\rSystem.out.println(a.getBalance(\u0026#34;zhangsan\u0026#34;));\r}\r}\r   ä¸€ä¸ªåŒæ­¥æ–¹æ³•å¯ä»¥è°ƒç”¨å¦å¤–ä¸€ä¸ªåŒæ­¥æ–¹æ³•ï¼Œä¸€ä¸ªçº¿ç¨‹å·²ç»æ‹¥æœ‰æŸä¸ªå¯¹è±¡çš„é”ï¼Œå†æ¬¡ç”³è¯·çš„æ—¶å€™ä»ç„¶ä¼šå¾—åˆ°è¯¥å¯¹è±¡çš„é”,ä¹Ÿå°±æ˜¯è¯´synchronizedè·å¾—çš„é”æ˜¯å¯é‡å…¥çš„  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  public class T {\rsynchronized void m1() {\rSystem.out.println(\u0026#34;m1 start\u0026#34;);\rtry {\rTimeUnit.SECONDS.sleep(1);\r} catch (InterruptedException e) {\re.printStackTrace();\r}\r//è¿˜æœ‰å¯èƒ½æ˜¯å­ç±»è°ƒç”¨çˆ¶ç±»çš„åŒæ­¥æ–¹æ³•ï¼Œsynchronizedè·å¾—é”ä¸€æ ·æ˜¯å¯é‡å…¥çš„\r\tm2();\r}\rsynchronized void m2() {\rtry {\rTimeUnit.SECONDS.sleep(2);\r} catch (InterruptedException e) {\re.printStackTrace();\r}\rSystem.out.println(\u0026#34;m2\u0026#34;);\r}\r}\r   ç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¦‚æœå‡ºç°å¼‚å¸¸ï¼Œé»˜è®¤æƒ…å†µé”ä¼šè¢«é‡Šæ”¾ï¼Œæ‰€ä»¥ï¼Œåœ¨å¹¶å‘å¤„ç†çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰å¼‚å¸¸è¦å¤šåŠ å°å¿ƒï¼Œä¸ç„¶å¯èƒ½ä¼šå‘ç”Ÿä¸ä¸€è‡´çš„æƒ…å†µã€‚æ¯”å¦‚ï¼Œåœ¨ä¸€ä¸ªweb appå¤„ç†è¿‡ç¨‹ä¸­ï¼Œå¤šä¸ªservletçº¿ç¨‹å…±åŒè®¿é—®åŒä¸€ä¸ªèµ„æºï¼Œè¿™æ—¶å¦‚æœå¼‚å¸¸å¤„ç†ä¸åˆé€‚ï¼Œåœ¨ç¬¬ä¸€ä¸ªçº¿ç¨‹ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œå…¶ä»–çº¿ç¨‹å°±ä¼šè¿›å…¥åŒæ­¥ä»£ç åŒºï¼Œæœ‰å¯èƒ½ä¼šè®¿é—®åˆ°å¼‚å¸¸äº§ç”Ÿæ—¶çš„æ•°æ®ã€‚å› æ­¤è¦éå¸¸å°å¿ƒçš„å¤„ç†åŒæ­¥ä¸šåŠ¡é€»è¾‘ä¸­çš„å¼‚å¸¸ã€‚ ä¸è¦ä»¥å­—ç¬¦ä¸²å¸¸é‡ä½œä¸ºé”å®šå¯¹è±¡ï¼Œåœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œm1å’Œm2å…¶å®é”å®šçš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ç§æƒ…å†µè¿˜ä¼šå‘ç”Ÿæ¯”è¾ƒè¯¡å¼‚çš„ç°è±¡ï¼Œæ¯”å¦‚ä½ ç”¨åˆ°äº†ä¸€ä¸ªç±»åº“ï¼Œåœ¨è¯¥ç±»åº“ä¸­ä»£ç é”å®šäº†å­—ç¬¦ä¸²â€œHelloâ€ï¼Œä½†æ˜¯ä½ è¯»ä¸åˆ°æºç ï¼Œæ‰€ä»¥ä½ åœ¨è‡ªå·±çš„ä»£ç ä¸­ä¹Ÿé”å®šäº†\u0026quot;Hello\u0026rdquo;,è¿™æ—¶å€™å°±æœ‰å¯èƒ½å‘ç”Ÿéå¸¸è¯¡å¼‚çš„æ­»é”é˜»å¡ï¼Œå› ä¸ºä½ çš„ç¨‹åºå’Œä½ ç”¨åˆ°çš„ç±»åº“ä¸ç»æ„é—´ä½¿ç”¨äº†åŒä¸€æŠŠé”  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  public class T {\rString s1 = \u0026#34;Hello\u0026#34;;\rString s2 = \u0026#34;Hello\u0026#34;;\rvoid m1() {\rsynchronized(s1) {\r}\r}\rvoid m2() {\rsynchronized(s2) {\r}\r}\r}\r  Volatileå…³é”®å­—  javaå†…å­˜æ¨¡å‹ï¼š https://www.cnblogs.com/nexiyi/p/java_memory_model_and_thread.html\n  volatile å…³é”®å­—ï¼Œä½¿ä¸€ä¸ªå˜é‡åœ¨å¤šä¸ªçº¿ç¨‹é—´å¯è§ï¼› A Bçº¿ç¨‹éƒ½ç”¨åˆ°ä¸€ä¸ªå˜é‡ï¼Œjavaé»˜è®¤æ˜¯Açº¿ç¨‹ä¸­ä¿ç•™ä¸€ä»½copyï¼Œè¿™æ ·å¦‚æœBçº¿ç¨‹ä¿®æ”¹äº†è¯¥å˜é‡ï¼Œåˆ™Açº¿ç¨‹æœªå¿…çŸ¥é“,ç”¨volatileå…³é”®å­—ï¼Œä¼šè®©æ‰€æœ‰çº¿ç¨‹éƒ½ä¼šè¯»åˆ°å˜é‡çš„ä¿®æ”¹å€¼; åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œrunningæ˜¯å­˜åœ¨äºå †å†…å­˜çš„tå¯¹è±¡ä¸­,å½“çº¿ç¨‹t1å¼€å§‹è¿è¡Œçš„æ—¶å€™ï¼Œä¼šæŠŠrunningå€¼ä»å†…å­˜ä¸­è¯»åˆ°t1çº¿ç¨‹çš„å·¥ä½œåŒºï¼Œåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ç›´æ¥ä½¿ç”¨è¿™ä¸ªcopyï¼Œå¹¶ä¸ä¼šæ¯æ¬¡éƒ½å»è¯»å–å †å†…å­˜ï¼Œè¿™æ ·ï¼Œå½“ä¸»çº¿ç¨‹ä¿®æ”¹runningçš„å€¼ä¹‹åï¼Œt1çº¿ç¨‹æ„ŸçŸ¥ä¸åˆ°ï¼Œæ‰€ä»¥ä¸ä¼šåœæ­¢è¿è¡Œ; ä½¿ç”¨volatileï¼Œå°†ä¼šå¼ºåˆ¶æ‰€æœ‰çº¿ç¨‹éƒ½å»å †å†…å­˜ä¸­è¯»å–runningçš„å€¼; volatileå¹¶ä¸èƒ½ä¿è¯å¤šä¸ªçº¿ç¨‹å…±åŒä¿®æ”¹runningå˜é‡æ—¶æ‰€å¸¦æ¥çš„ä¸ä¸€è‡´é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è¯´volatileä¸èƒ½æ›¿ä»£synchronized.  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30  public class T {\r/*volatile*/ boolean running = true; //å¯¹æ¯”ä¸€ä¸‹æœ‰æ— volatileçš„æƒ…å†µä¸‹ï¼Œæ•´ä¸ªç¨‹åºè¿è¡Œç»“æœçš„åŒºåˆ«\r\tvoid m() {\rSystem.out.println(\u0026#34;m start\u0026#34;);\rwhile(running) {\r/*\rtry {\rTimeUnit.MILLISECONDS.sleep(10);\r} catch (InterruptedException e) {\re.printStackTrace();\r}*/\r}\rSystem.out.println(\u0026#34;m end!\u0026#34;);\r}\rpublic static void main(String[] args) {\rT t = new T();\rnew Thread(t::m, \u0026#34;t1\u0026#34;).start();\rtry {\rTimeUnit.SECONDS.sleep(1);\r} catch (InterruptedException e) {\re.printStackTrace();\r}\rt.running = false;\r}\r}\r   volatileå¹¶ä¸èƒ½ä¿è¯å¤šä¸ªçº¿ç¨‹å…±åŒä¿®æ”¹runningå˜é‡æ—¶æ‰€å¸¦æ¥çš„ä¸ä¸€è‡´é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è¯´volatileä¸èƒ½æ›¿ä»£synchronized  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26  public class T {\rvolatile int count = 0; void m() {\rfor(int i=0; i\u0026lt;10000; i++) count++;\r}\rpublic static void main(String[] args) {\rT t = new T();\rList\u0026lt;Thread\u0026gt; threads = new ArrayList\u0026lt;Thread\u0026gt;();\rfor(int i=0; i\u0026lt;10; i++) {\rthreads.add(new Thread(t::m, \u0026#34;thread-\u0026#34;+i));\r}\tthreads.forEach((o)-\u0026gt;o.start());\rthreads.forEach((o)-\u0026gt;{\rtry {\ro.join();\r} catch (InterruptedException e) {\re.printStackTrace();\r}\r});\rSystem.out.println(t.count);\r}\r}\r   é”çš„ä¿¡æ¯æ˜¯è®°å½•åœ¨å †å†…å­˜é‡Œçš„ï¼Œ é”å®šæŸå¯¹è±¡oï¼Œå¦‚æœoçš„å±æ€§å‘ç”Ÿæ”¹å˜ï¼Œä¸å½±å“é”çš„ä½¿ç”¨ï¼Œä½†æ˜¯å¦‚æœoå˜æˆå¦å¤–ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™é”å®šçš„å¯¹è±¡å‘ç”Ÿæ”¹å˜ï¼Œåº”è¯¥é¿å…å°†é”å®šå¯¹è±¡çš„å¼•ç”¨å˜æˆå¦å¤–çš„å¯¹è±¡ã€‚  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36  public class T {\rObject o = new Object();\rvoid m() {\rsynchronized(o) {\rwhile(true) {\rtry {\rTimeUnit.SECONDS.sleep(1);\r} catch (InterruptedException e) {\re.printStackTrace();\r}\rSystem.out.println(Thread.currentThread().getName());\r}\r}\r}\rpublic static void main(String[] args) {\rT t = new T();\r//å¯åŠ¨ç¬¬ä¸€ä¸ªçº¿ç¨‹\r\tnew Thread(t::m, \u0026#34;t1\u0026#34;).start();\rtry {\rTimeUnit.SECONDS.sleep(3);\r} catch (InterruptedException e) {\re.printStackTrace();\r}\r//åˆ›å»ºç¬¬äºŒä¸ªçº¿ç¨‹\r\tThread t2 = new Thread(t::m, \u0026#34;t2\u0026#34;);\rt.o = new Object(); //é”å¯¹è±¡å‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥t2çº¿ç¨‹å¾—ä»¥æ‰§è¡Œï¼Œå¦‚æœæ³¨é‡Šæ‰è¿™å¥è¯ï¼Œçº¿ç¨‹2å°†æ°¸è¿œå¾—ä¸åˆ°æ‰§è¡Œæœºä¼š\r\tt2.start();\r}\r   ä¸è¦ä»¥å­—ç¬¦ä¸²å¸¸é‡ä½œä¸ºé”å®šå¯¹è±¡åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œm1å’Œm2å…¶å®é”å®šçš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ç§æƒ…å†µè¿˜ä¼šå‘ç”Ÿæ¯”è¾ƒè¯¡å¼‚çš„ç°è±¡ï¼Œæ¯”å¦‚ä½ ç”¨åˆ°äº†ä¸€ä¸ªç±»åº“ï¼Œåœ¨è¯¥ç±»åº“ä¸­ä»£ç é”å®šäº†å­—ç¬¦ä¸²â€œHelloâ€ï¼Œä½†æ˜¯ä½ è¯»ä¸åˆ°æºç ï¼Œæ‰€ä»¥ä½ åœ¨è‡ªå·±çš„ä»£ç ä¸­ä¹Ÿé”å®šäº†\u0026quot;Hello\u0026rdquo;,è¿™æ—¶å€™å°±æœ‰å¯èƒ½å‘ç”Ÿéå¸¸è¯¡å¼‚çš„æ­»é”é˜»å¡ï¼Œ å› ä¸ºä½ çš„ç¨‹åºå’Œä½ ç”¨åˆ°çš„ç±»åº“ä¸ç»æ„é—´ä½¿ç”¨äº†åŒä¸€æŠŠé”  é¢è¯•é¢˜ï¼š  å®ç°ä¸€ä¸ªå®¹å™¨ï¼Œæä¾›ä¸¤ä¸ªæ–¹æ³•ï¼Œaddï¼Œsizeï¼Œå†™ä¸¤ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹1æ·»åŠ 10ä¸ªå…ƒç´ åˆ°å®¹å™¨ä¸­ï¼Œçº¿ç¨‹2å®ç°ç›‘æ§å…ƒç´ çš„ä¸ªæ•°ï¼Œå½“ä¸ªæ•°åˆ°5ä¸ªæ—¶ï¼Œçº¿ç¨‹2ç»™å‡ºæç¤ºå¹¶ç»“æŸã€‚  åˆ†æä¸‹é¢è¿™ä¸ªç¨‹åºï¼Œèƒ½å®Œæˆè¿™ä¸ªåŠŸèƒ½å—ï¼Ÿ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40  public class MyContainer1 {\rList lists = new ArrayList();\r//åŠ ä¸Švolatileå…³é”®å­—å¯ä»¥ï¼Œä½†æ˜¯ä¸æ˜¯æœ€å¥½çš„è§£å†³åŠæ³•\r //ç»™listsæ·»åŠ volatileä¹‹åï¼Œt2èƒ½å¤Ÿæ¥åˆ°é€šçŸ¥ï¼Œä½†æ˜¯ï¼Œt2çº¿ç¨‹çš„æ­»å¾ªç¯å¾ˆæµªè´¹cpu\r\t//volatile List lists = new ArrayList();\r\tpublic void add(Object o) {\rlists.add(o);\r}\rpublic int size() {\rreturn lists.size();\r}\rpublic static void main(String[] args) {\rMyContainer1 c = new MyContainer1();\rnew Thread(() -\u0026gt; {\rfor(int i=0; i\u0026lt;10; i++) {\rc.add(new Object());\rSystem.out.println(\u0026#34;add \u0026#34; + i);\rtry {\rTimeUnit.SECONDS.sleep(1);\r} catch (InterruptedException e) {\re.printStackTrace();\r}\r}\r}, \u0026#34;t1\u0026#34;).start();\rnew Thread(() -\u0026gt; {\rwhile(true) {\rif(c.size() == 5) {\rbreak;\r}\r}\rSystem.out.println(\u0026#34;t2 ç»“æŸ\u0026#34;);\r}, \u0026#34;t2\u0026#34;).start();\r}\r}\r  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60  public class MyContainer3 {\r//æ·»åŠ volatileï¼Œä½¿t2èƒ½å¤Ÿå¾—åˆ°é€šçŸ¥\r\tvolatile List lists = new ArrayList();\rpublic void add(Object o) {\rlists.add(o);\r}\rpublic int size() {\rreturn lists.size();\r}\rpublic static void main(String[] args) {\rMyContainer3 c = new MyContainer3();\rfinal Object lock = new Object();\rnew Thread(() -\u0026gt; {\rsynchronized(lock) {\rSystem.out.println(\u0026#34;t2å¯åŠ¨\u0026#34;);\rif(c.size() != 5) {\rtry {\rlock.wait();\r} catch (InterruptedException e) {\re.printStackTrace();\r}\r}\rSystem.out.println(\u0026#34;t2 ç»“æŸ\u0026#34;);\r}\r}, \u0026#34;t2\u0026#34;).start();\rtry {\rTimeUnit.SECONDS.sleep(1);\r} catch (InterruptedException e1) {\re1.printStackTrace();\r}\rnew Thread(() -\u0026gt; {\rSystem.out.println(\u0026#34;t1å¯åŠ¨\u0026#34;);\rsynchronized(lock) {\rfor(int i=0; i\u0026lt;10; i++) {\rc.add(new Object());\rSystem.out.println(\u0026#34;add \u0026#34; + i);\rif(c.size() == 5) {\rlock.notify();\r}\rtry {\rTimeUnit.SECONDS.sleep(1);\r} catch (InterruptedException e) {\re.printStackTrace();\r}\r}\r}\r}, \u0026#34;t1\u0026#34;).start();\t}\r}\r   è¿™é‡Œä½¿ç”¨waitå’Œnotifyåšåˆ°ï¼Œwaitä¼šé‡Šæ”¾é”ï¼Œè€Œnotifyä¸ä¼šé‡Šæ”¾é”, éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿ç”¨è¿™ç§æ–¹æ³•ï¼Œå¿…é¡»è¦ä¿è¯t2å…ˆæ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯é¦–å…ˆè®©t2ç›‘å¬æ‰å¯ä»¥;  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96  /**\r* æ›¾ç»çš„é¢è¯•é¢˜ï¼šï¼ˆæ·˜å®ï¼Ÿï¼‰\r* å®ç°ä¸€ä¸ªå®¹å™¨ï¼Œæä¾›ä¸¤ä¸ªæ–¹æ³•ï¼Œaddï¼Œsize\r* å†™ä¸¤ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹1æ·»åŠ 10ä¸ªå…ƒç´ åˆ°å®¹å™¨ä¸­ï¼Œçº¿ç¨‹2å®ç°ç›‘æ§å…ƒç´ çš„ä¸ªæ•°ï¼Œå½“ä¸ªæ•°åˆ°5ä¸ªæ—¶ï¼Œçº¿ç¨‹2ç»™å‡ºæç¤ºå¹¶ç»“æŸ\r* * ç»™listsæ·»åŠ volatileä¹‹åï¼Œt2èƒ½å¤Ÿæ¥åˆ°é€šçŸ¥ï¼Œä½†æ˜¯ï¼Œt2çº¿ç¨‹çš„æ­»å¾ªç¯å¾ˆæµªè´¹cpuï¼Œå¦‚æœä¸ç”¨æ­»å¾ªç¯ï¼Œè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ\r* * è¿™é‡Œä½¿ç”¨waitå’Œnotifyåšåˆ°ï¼Œwaitä¼šé‡Šæ”¾é”ï¼Œè€Œnotifyä¸ä¼šé‡Šæ”¾é”\r* éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿ç”¨è¿™ç§æ–¹æ³•ï¼Œå¿…é¡»è¦ä¿è¯t2å…ˆæ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯é¦–å…ˆè®©t2ç›‘å¬æ‰å¯ä»¥\r* * é˜…è¯»ä¸‹é¢çš„ç¨‹åºï¼Œå¹¶åˆ†æè¾“å‡ºç»“æœ\r* å¯ä»¥è¯»åˆ°è¾“å‡ºç»“æœå¹¶ä¸æ˜¯size=5æ—¶t2é€€å‡ºï¼Œè€Œæ˜¯t1ç»“æŸæ—¶t2æ‰æ¥æ”¶åˆ°é€šçŸ¥è€Œé€€å‡º\r* æƒ³æƒ³è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ\r* * notifyä¹‹åï¼Œt1å¿…é¡»é‡Šæ”¾é”ï¼Œt2é€€å‡ºåï¼Œä¹Ÿå¿…é¡»notifyï¼Œé€šçŸ¥t1ç»§ç»­æ‰§è¡Œ\r* æ•´ä¸ªé€šä¿¡è¿‡ç¨‹æ¯”è¾ƒç¹ç\r* @author mashibing\r*/\rpackage yxxy.c_019;\rimport java.util.ArrayList;\rimport java.util.List;\rimport java.util.concurrent.TimeUnit;\rpublic class MyContainer4 {\r//æ·»åŠ volatileï¼Œä½¿t2èƒ½å¤Ÿå¾—åˆ°é€šçŸ¥\r\tvolatile List lists = new ArrayList();\rpublic void add(Object o) {\rlists.add(o);\r}\rpublic int size() {\rreturn lists.size();\r}\rpublic static void main(String[] args) {\rMyContainer4 c = new MyContainer4();\rfinal Object lock = new Object();\rnew Thread(() -\u0026gt; {\rsynchronized(lock) {\rSystem.out.println(\u0026#34;t2å¯åŠ¨\u0026#34;);\rif(c.size() != 5) {\rtry {\rlock.wait();\r} catch (InterruptedException e) {\re.printStackTrace();\r}\r}\rSystem.out.println(\u0026#34;t2 ç»“æŸ\u0026#34;);\r//é€šçŸ¥t1ç»§ç»­æ‰§è¡Œ\r\tlock.notify();\r}\r}, \u0026#34;t2\u0026#34;).start();\rtry {\rTimeUnit.SECONDS.sleep(1);\r} catch (InterruptedException e1) {\re1.printStackTrace();\r}\rnew Thread(() -\u0026gt; {\rSystem.out.println(\u0026#34;t1å¯åŠ¨\u0026#34;);\rsynchronized(lock) {\rfor(int i=0; i\u0026lt;10; i++) {\rc.add(new Object());\rSystem.out.println(\u0026#34;add \u0026#34; + i);\rif(c.size() == 5) {\rlock.notify();\r//é‡Šæ”¾é”ï¼Œè®©t2å¾—ä»¥æ‰§è¡Œ\r\ttry {\rlock.wait();\r} catch (InterruptedException e) {\re.printStackTrace();\r}\r}\rtry {\rTimeUnit.SECONDS.sleep(1);\r} catch (InterruptedException e) {\re.printStackTrace();\r}\r}\r}\r}, \u0026#34;t1\u0026#34;).start();\r}\r}\r   æ”¹è¿›ï¼šnotifyä¹‹åï¼Œt1å¿…é¡»é‡Šæ”¾é”ï¼Œt2é€€å‡ºåï¼Œä¹Ÿå¿…é¡»notifyï¼Œé€šçŸ¥t1ç»§ç»­æ‰§è¡Œ; æ•´ä¸ªé€šä¿¡è¿‡ç¨‹æ¯”è¾ƒç¹çï¼› ä½¿ç”¨Latchï¼ˆé—¨é—©ï¼‰æ›¿ä»£wait notifyæ¥è¿›è¡Œé€šçŸ¥ï¼Œå¥½å¤„æ˜¯é€šä¿¡æ–¹å¼ç®€å•ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æŒ‡å®šç­‰å¾…æ—¶é—´ï¼Œä½¿ç”¨awaitå’Œcountdownæ–¹æ³•æ›¿ä»£waitå’Œnotifyï¼Œ CountDownLatchä¸æ¶‰åŠé”å®šï¼Œå½“countçš„å€¼ä¸ºé›¶æ—¶å½“å‰çº¿ç¨‹ç»§ç»­è¿è¡Œï¼Œå½“ä¸æ¶‰åŠåŒæ­¥ï¼Œåªæ˜¯æ¶‰åŠçº¿ç¨‹é€šä¿¡çš„æ—¶å€™ï¼Œç”¨synchronized + wait/notifyå°±æ˜¾å¾—å¤ªé‡äº†è¿™æ—¶åº”è¯¥è€ƒè™‘countdownlatch/cyclicbarrier/semaphore   CountDownLatchã€CyclicBarrierå’ŒSemaphore:https://www.cnblogs.com/dolphin0520/p/3920397.html\n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62  public class MyContainer5 {\r// æ·»åŠ volatileï¼Œä½¿t2èƒ½å¤Ÿå¾—åˆ°é€šçŸ¥\r\tvolatile List lists = new ArrayList();\rpublic void add(Object o) {\rlists.add(o);\r}\rpublic int size() {\rreturn lists.size();\r}\rpublic static void main(String[] args) {\rMyContainer5 c = new MyContainer5();\rCountDownLatch latch = new CountDownLatch(1);\rnew Thread(() -\u0026gt; {\rSystem.out.println(\u0026#34;t2å¯åŠ¨\u0026#34;);\rif (c.size() != 5) {\rtry {\rlatch.await();\r//ä¹Ÿå¯ä»¥æŒ‡å®šç­‰å¾…æ—¶é—´\r\t//latch.await(5000, TimeUnit.MILLISECONDS);\r\t} catch (InterruptedException e) {\re.printStackTrace();\r}\r}\rSystem.out.println(\u0026#34;t2 ç»“æŸ\u0026#34;);\r}, \u0026#34;t2\u0026#34;).start();\rtry {\rTimeUnit.SECONDS.sleep(1);\r} catch (InterruptedException e1) {\re1.printStackTrace();\r}\rnew Thread(() -\u0026gt; {\rSystem.out.println(\u0026#34;t1å¯åŠ¨\u0026#34;);\rfor (int i = 0; i \u0026lt; 10; i++) {\rc.add(new Object());\rSystem.out.println(\u0026#34;add \u0026#34; + i);\rif (c.size() == 5) {\r// æ‰“å¼€é—¨é—©ï¼Œè®©t2å¾—ä»¥æ‰§è¡Œ\r\tlatch.countDown();\r}\rtry {\rTimeUnit.SECONDS.sleep(1);\r} catch (InterruptedException e) {\re.printStackTrace();\r}\r}\r}, \u0026#34;t1\u0026#34;).start();\r}\r}\r  ReentrantLock  ReentrantLockåŸç†ï¼š https://juejin.im/post/5aeb0a8b518825673a2066f0\n reentrantlockç”¨äºæ›¿ä»£synchronized  éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¿…é¡»è¦å¿…é¡»è¦å¿…é¡»è¦æ‰‹åŠ¨é‡Šæ”¾é”ï¼ˆé‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼‰; ä½¿ç”¨syné”å®šçš„è¯å¦‚æœé‡åˆ°å¼‚å¸¸ï¼Œjvmä¼šè‡ªåŠ¨é‡Šæ”¾é”ï¼Œä½†æ˜¯lockå¿…é¡»æ‰‹åŠ¨é‡Šæ”¾é”ï¼Œå› æ­¤ç»å¸¸åœ¨finallyä¸­è¿›è¡Œé”çš„é‡Šæ”¾  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34  public class ReentrantLock2 {\rLock lock = new ReentrantLock();\rvoid m1() {\rtry {\rlock.lock(); //synchronized(this)\r\tfor (int i = 0; i \u0026lt; 10; i++) {\rTimeUnit.SECONDS.sleep(1);\rSystem.out.println(i);\r}\r} catch (InterruptedException e) {\re.printStackTrace();\r} finally {\rlock.unlock();\r}\r}\rvoid m2() {\rlock.lock();\rSystem.out.println(\u0026#34;m2 ...\u0026#34;);\rlock.unlock();\r}\rpublic static void main(String[] args) {\rReentrantLock2 rl = new ReentrantLock2();\rnew Thread(rl::m1).start();\rtry {\rTimeUnit.SECONDS.sleep(1);\r} catch (InterruptedException e) {\re.printStackTrace();\r}\rnew Thread(rl::m2).start();\r}\r   tryLock()  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54  public class ReentrantLock3 {\rLock lock = new ReentrantLock();\rvoid m1() {\rtry {\rlock.lock();\rfor (int i = 0; i \u0026lt; 10; i++) {\rTimeUnit.SECONDS.sleep(1);\rSystem.out.println(i);\r}\r} catch (InterruptedException e) {\re.printStackTrace();\r} finally {\rlock.unlock();\r}\r}\r/**\r* ä½¿ç”¨tryLockè¿›è¡Œå°è¯•é”å®šï¼Œä¸ç®¡é”å®šä¸å¦ï¼Œæ–¹æ³•éƒ½å°†ç»§ç»­æ‰§è¡Œ\r* å¯ä»¥æ ¹æ®tryLockçš„è¿”å›å€¼æ¥åˆ¤å®šæ˜¯å¦é”å®š\r* ä¹Ÿå¯ä»¥æŒ‡å®štryLockçš„æ—¶é—´ï¼Œç”±äºtryLock(time)æŠ›å‡ºå¼‚å¸¸ï¼Œæ‰€ä»¥è¦æ³¨æ„unclockçš„å¤„ç†ï¼Œå¿…é¡»æ”¾åˆ°finallyä¸­\r*/\rvoid m2() {\r/*\rboolean locked = lock.tryLock();\rSystem.out.println(\u0026#34;m2 ...\u0026#34; + locked);\rif(locked) lock.unlock();\r*/\rboolean locked = false;\rtry {\rlocked = lock.tryLock(5, TimeUnit.SECONDS);\rSystem.out.println(\u0026#34;m2 ...\u0026#34; + locked);\r} catch (InterruptedException e) {\re.printStackTrace();\r} finally {\rif(locked) lock.unlock();\r}\r}\rpublic static void main(String[] args) {\rReentrantLock3 rl = new ReentrantLock3();\rnew Thread(rl::m1).start();\rtry {\rTimeUnit.SECONDS.sleep(1);\r} catch (InterruptedException e) {\re.printStackTrace();\r}\rnew Thread(rl::m2).start();\r}\r}\r   lock()ä¸lockInterruptibly()çš„åŒºåˆ«: https://blog.csdn.net/pange1991/article/details/82219997\n   lock ä¸ lockInterruptiblyæ¯”è¾ƒåŒºåˆ«åœ¨äºï¼š\n  lock ä¼˜å…ˆè€ƒè™‘è·å–é”ï¼Œå¾…è·å–é”æˆåŠŸåï¼Œæ‰å“åº”ä¸­æ–­ã€‚\n  lockInterruptibly ä¼˜å…ˆè€ƒè™‘å“åº”ä¸­æ–­ï¼Œè€Œä¸æ˜¯å“åº”é”çš„æ™®é€šè·å–æˆ–é‡å…¥è·å–ã€‚\n  è¯¦ç»†åŒºåˆ«ï¼š\nReentrantLock.lockInterruptiblyå…è®¸åœ¨ç­‰å¾…æ—¶ç”±å…¶å®ƒçº¿ç¨‹è°ƒç”¨ç­‰å¾…çº¿ç¨‹çš„Thread.interruptæ–¹æ³•æ¥ä¸­æ–­ç­‰å¾…çº¿ç¨‹çš„ç­‰å¾…è€Œç›´æ¥è¿”å›ï¼Œè¿™æ—¶ä¸ç”¨è·å–é”ï¼Œè€Œä¼šæŠ›å‡ºä¸€ä¸ªInterruptedExceptionã€‚ ReentrantLock.lockæ–¹æ³•ä¸å…è®¸Thread.interruptä¸­æ–­,å³ä½¿æ£€æµ‹åˆ°Thread.isInterrupted,ä¸€æ ·ä¼šç»§ç»­å°è¯•è·å–é”ï¼Œå¤±è´¥åˆ™ç»§ç»­ä¼‘çœ ã€‚åªæ˜¯åœ¨æœ€åè·å–é”æˆåŠŸåå†æŠŠå½“å‰çº¿ç¨‹ç½®ä¸ºinterruptedçŠ¶æ€,ç„¶åå†ä¸­æ–­çº¿ç¨‹ã€‚\n  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31  class MyThread05 extends Thread {\rpublic void test3() throws Exception {\rfinal Lock lock = new ReentrantLock();\rlock.lock();\rThread.sleep(1000);\rThread t1 = new Thread(new Runnable() {\r@Override\rpublic void run() {\r// lock.lock();\r try {\rlock.lockInterruptibly();\r} catch (InterruptedException e) {\r// TODO Auto-generated catch block\r e.printStackTrace();\r} finally {\rSystem.out.println(((ReentrantLock) lock).isLocked());\r}\rSystem.out.println(Thread.currentThread().getName() + \u0026#34; interrupted.\u0026#34;);\r}\r});\rt1.start();\rThread.sleep(1000);\rt1.interrupt();\rThread.sleep(1000000);\r}\rpublic static void main(String[] args) throws Exception {\rMyThread05 thread = new MyThread05();\rthread.test3();\r}\r}\r  è¾“å‡ºï¼š\njava.lang.InterruptedException\rat java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireInterruptibly(AbstractQueuedSynchronizer.java:898)\rat java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1222)\rat java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)\rat yxxy.c_020.MyThread05$1.run(MyThread05.java:16)\rat java.lang.Thread.run(Thread.java:748)\rtrue\rThread-1 interrupted.\rç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹  è™šå‡å”¤é†’ï¼š https://juejin.im/post/5d32a6545188257f3850d514\n é¢è¯•é¢˜ï¼šå†™ä¸€ä¸ªå›ºå®šå®¹é‡åŒæ­¥å®¹å™¨ï¼Œæ‹¥æœ‰putå’Œgetæ–¹æ³•ï¼Œä»¥åŠgetCountæ–¹æ³•ï¼Œèƒ½å¤Ÿæ”¯æŒ2ä¸ªç”Ÿäº§è€…çº¿ç¨‹ä»¥åŠ10ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹çš„é˜»å¡è°ƒç”¨ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63  /**\r*æ–¹æ³•1ï¼šä½¿ç”¨waitå’Œnotify/notifyAllæ¥å®ç°\r*/\rpublic class MyContainer1\u0026lt;T\u0026gt; {\rfinal private LinkedList\u0026lt;T\u0026gt; lists = new LinkedList\u0026lt;\u0026gt;();\rfinal private int MAX = 10; //æœ€å¤š10ä¸ªå…ƒç´ \r\tprivate int count = 0;\rpublic synchronized void put(T t) {\rwhile(lists.size() == MAX) { //æƒ³æƒ³ä¸ºä»€ä¹ˆç”¨whileè€Œä¸æ˜¯ç”¨ifï¼Ÿ\r //è™šå‡å”¤é†’é—®é¢˜\r\ttry {\rthis.wait(); //effective java\r\t} catch (InterruptedException e) {\re.printStackTrace();\r}\r}\rlists.add(t);\r++count;\rthis.notifyAll(); //é€šçŸ¥æ¶ˆè´¹è€…çº¿ç¨‹è¿›è¡Œæ¶ˆè´¹\r\t}\rpublic synchronized T get() {\rT t = null;\rwhile(lists.size() == 0) {\rtry {\rthis.wait();\r} catch (InterruptedException e) {\re.printStackTrace();\r}\r}\rt = lists.removeFirst();\rcount --;\rthis.notifyAll(); //é€šçŸ¥ç”Ÿäº§è€…è¿›è¡Œç”Ÿäº§\r\treturn t;\r}\rpublic static void main(String[] args) {\rMyContainer1\u0026lt;String\u0026gt; c = new MyContainer1\u0026lt;\u0026gt;();\r//å¯åŠ¨æ¶ˆè´¹è€…çº¿ç¨‹\r\tfor(int i=0; i\u0026lt;10; i++) {\rnew Thread(()-\u0026gt;{\rfor(int j=0; j\u0026lt;5; j++) System.out.println(c.get());\r}, \u0026#34;c\u0026#34; + i).start();\r}\rtry {\rTimeUnit.SECONDS.sleep(2);\r} catch (InterruptedException e) {\re.printStackTrace();\r}\r//å¯åŠ¨ç”Ÿäº§è€…çº¿ç¨‹\r\tfor(int i=0; i\u0026lt;2; i++) {\rnew Thread(()-\u0026gt;{\rfor(int j=0; j\u0026lt;25; j++) c.put(Thread.currentThread().getName() + \u0026#34; \u0026#34; + j);\r}, \u0026#34;p\u0026#34; + i).start();\r}\r}\r}\r  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72  /**\r*æ–¹æ³•2ï¼šä½¿ç”¨Lockå’ŒConditionæ¥å®ç°\r*å¯¹æ¯”ä¸¤ç§æ–¹å¼ï¼ŒConditionçš„æ–¹å¼å¯ä»¥æ›´åŠ ç²¾ç¡®çš„æŒ‡å®šå“ªäº›çº¿ç¨‹è¢«å”¤é†’\r*/\rpublic class MyContainer2\u0026lt;T\u0026gt; {\rfinal private LinkedList\u0026lt;T\u0026gt; lists = new LinkedList\u0026lt;\u0026gt;();\rfinal private int MAX = 10; //æœ€å¤š10ä¸ªå…ƒç´ \r\tprivate int count = 0;\rprivate Lock lock = new ReentrantLock();\rprivate Condition producer = lock.newCondition();\rprivate Condition consumer = lock.newCondition();\rpublic void put(T t) {\rtry {\rlock.lock();\rwhile(lists.size() == MAX) { //æƒ³æƒ³ä¸ºä»€ä¹ˆç”¨whileè€Œä¸æ˜¯ç”¨ifï¼Ÿ\r\tproducer.await();\r}\rlists.add(t);\r++count;\rconsumer.signalAll(); //é€šçŸ¥æ¶ˆè´¹è€…çº¿ç¨‹è¿›è¡Œæ¶ˆè´¹\r\t} catch (InterruptedException e) {\re.printStackTrace();\r} finally {\rlock.unlock();\r}\r}\rpublic T get() {\rT t = null;\rtry {\rlock.lock();\rwhile(lists.size() == 0) {\rconsumer.await();\r}\rt = lists.removeFirst();\rcount --;\rproducer.signalAll(); //é€šçŸ¥ç”Ÿäº§è€…è¿›è¡Œç”Ÿäº§\r\t} catch (InterruptedException e) {\re.printStackTrace();\r} finally {\rlock.unlock();\r}\rreturn t;\r}\rpublic static void main(String[] args) {\rMyContainer2\u0026lt;String\u0026gt; c = new MyContainer2\u0026lt;\u0026gt;();\r//å¯åŠ¨æ¶ˆè´¹è€…çº¿ç¨‹\r\tfor(int i=0; i\u0026lt;10; i++) {\rnew Thread(()-\u0026gt;{\rfor(int j=0; j\u0026lt;5; j++) System.out.println(c.get());\r}, \u0026#34;c\u0026#34; + i).start();\r}\rtry {\rTimeUnit.SECONDS.sleep(2);\r} catch (InterruptedException e) {\re.printStackTrace();\r}\r//å¯åŠ¨ç”Ÿäº§è€…çº¿ç¨‹\r\tfor(int i=0; i\u0026lt;2; i++) {\rnew Thread(()-\u0026gt;{\rfor(int j=0; j\u0026lt;25; j++) c.put(Thread.currentThread().getName() + \u0026#34; \u0026#34; + j);\r}, \u0026#34;p\u0026#34; + i).start();\r}\r}\r}\r  å•ä¾‹çš„å¤šçº¿ç¨‹å®‰å…¨  https://blog.csdn.net/mnb65482/article/details/80458571\n ç±»åŠ è½½æ—¶æœºï¼šJAVAè™šæ‹Ÿæœºåœ¨æœ‰ä¸”ä»…æœ‰çš„5ç§åœºæ™¯ä¸‹ä¼šå¯¹ç±»è¿›è¡Œåˆå§‹åŒ–ã€‚\n1.é‡åˆ°newã€getstaticã€setstaticæˆ–è€…invokestaticè¿™4ä¸ªå­—èŠ‚ç æŒ‡ä»¤æ—¶ï¼Œå¯¹åº”çš„javaä»£ç åœºæ™¯ä¸ºï¼šnewä¸€ä¸ªå…³é”®å­—æˆ–è€…ä¸€ä¸ªå®ä¾‹åŒ–å¯¹è±¡æ—¶ã€è¯»å–æˆ–è®¾ç½®ä¸€ä¸ªé™æ€å­—æ®µæ—¶(finalä¿®é¥°ã€å·²åœ¨ç¼–è¯‘æœŸæŠŠç»“æœæ”¾å…¥å¸¸é‡æ± çš„é™¤å¤–)ã€è°ƒç”¨ä¸€ä¸ªç±»çš„é™æ€æ–¹æ³•æ—¶ã€‚\n2.ä½¿ç”¨java.lang.reflectåŒ…çš„æ–¹æ³•å¯¹ç±»è¿›è¡Œåå°„è°ƒç”¨çš„æ—¶å€™ï¼Œå¦‚æœç±»æ²¡è¿›è¡Œåˆå§‹åŒ–ï¼Œéœ€è¦å…ˆè°ƒç”¨å…¶åˆå§‹åŒ–æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–ã€‚\n3.å½“åˆå§‹åŒ–ä¸€ä¸ªç±»æ—¶ï¼Œå¦‚æœå…¶çˆ¶ç±»è¿˜æœªè¿›è¡Œåˆå§‹åŒ–ï¼Œä¼šå…ˆè§¦å‘å…¶çˆ¶ç±»çš„åˆå§‹åŒ–ã€‚\n4.å½“è™šæ‹Ÿæœºå¯åŠ¨æ—¶ï¼Œç”¨æˆ·éœ€è¦æŒ‡å®šä¸€ä¸ªè¦æ‰§è¡Œçš„ä¸»ç±»(åŒ…å«main()æ–¹æ³•çš„ç±»)ï¼Œè™šæ‹Ÿæœºä¼šå…ˆåˆå§‹åŒ–è¿™ä¸ªç±»ã€‚\n5.å½“ä½¿ç”¨JDK 1.7ç­‰åŠ¨æ€è¯­è¨€æ”¯æŒæ—¶ï¼Œå¦‚æœä¸€ä¸ªjava.lang.invoke.MethodHandleå®ä¾‹æœ€åçš„è§£æç»“æœREF_getStaticã€REF_putStaticã€REF_invokeStaticçš„æ–¹æ³•å¥æŸ„ï¼Œå¹¶ä¸”è¿™ä¸ªæ–¹æ³•å¥æŸ„æ‰€å¯¹åº”çš„ç±»æ²¡æœ‰è¿›è¡Œè¿‡åˆå§‹åŒ–ï¼Œåˆ™éœ€è¦å…ˆè§¦å‘å…¶åˆå§‹åŒ–ã€‚\nè¿™5ç§æƒ…å†µè¢«ç§°ä¸ºæ˜¯ç±»çš„ä¸»åŠ¨å¼•ç”¨ï¼Œæ³¨æ„ï¼Œè¿™é‡Œã€Šè™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­ä½¿ç”¨çš„é™å®šè¯æ˜¯\u0026quot;æœ‰ä¸”ä»…æœ‰\u0026rdquo;ï¼Œé‚£ä¹ˆï¼Œé™¤æ­¤ä¹‹å¤–çš„æ‰€æœ‰å¼•ç”¨ç±»éƒ½ä¸ä¼šå¯¹ç±»è¿›è¡Œåˆå§‹åŒ–ï¼Œç§°ä¸ºè¢«åŠ¨å¼•ç”¨ã€‚é™æ€å†…éƒ¨ç±»å°±å±äºè¢«åŠ¨å¼•ç”¨çš„è¡Œåˆ—ã€‚\næˆ‘ä»¬å†å›å¤´çœ‹ä¸‹getInstance()æ–¹æ³•ï¼Œè°ƒç”¨çš„æ˜¯SingleTonHoler.INSTANCEï¼Œå–çš„æ˜¯SingleTonHoleré‡Œçš„INSTANCEå¯¹è±¡ï¼Œè·Ÿä¸Šé¢é‚£ä¸ªDCLæ–¹æ³•ä¸åŒçš„æ˜¯ï¼ŒgetInstance()æ–¹æ³•å¹¶æ²¡æœ‰å¤šæ¬¡å»newå¯¹è±¡ï¼Œæ•…ä¸ç®¡å¤šå°‘ä¸ªçº¿ç¨‹å»è°ƒç”¨getInstance()æ–¹æ³•ï¼Œå–çš„éƒ½æ˜¯åŒä¸€ä¸ªINSTANCEå¯¹è±¡ï¼Œè€Œä¸ç”¨å»é‡æ–°åˆ›å»ºã€‚å½“getInstance()æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼ŒSingleTonHoleræ‰åœ¨SingleTonçš„è¿è¡Œæ—¶å¸¸é‡æ± é‡Œï¼ŒæŠŠç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼Œè¿™æ—¶é™æ€å¯¹è±¡INSTANCEä¹ŸçœŸæ­£è¢«åˆ›å»ºï¼Œç„¶åå†è¢«getInstance()æ–¹æ³•è¿”å›å‡ºå»ï¼Œè¿™ç‚¹åŒé¥¿æ±‰æ¨¡å¼ã€‚é‚£ä¹ˆINSTANCEåœ¨åˆ›å»ºè¿‡ç¨‹ä¸­åˆæ˜¯å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨çš„å‘¢ï¼Ÿåœ¨ã€Šæ·±å…¥ç†è§£JAVAè™šæ‹Ÿæœºã€‹ä¸­ï¼Œæœ‰è¿™ä¹ˆä¸€å¥è¯:\nè™šæ‹Ÿæœºä¼šä¿è¯ä¸€ä¸ªç±»çš„()æ–¹æ³•åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­è¢«æ­£ç¡®åœ°åŠ é”ã€åŒæ­¥ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶å»åˆå§‹åŒ–ä¸€ä¸ªç±»ï¼Œé‚£ä¹ˆåªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œè¿™ä¸ªç±»çš„()æ–¹æ³•ï¼Œå…¶ä»–çº¿ç¨‹éƒ½éœ€è¦é˜»å¡ç­‰å¾…ï¼Œç›´åˆ°æ´»åŠ¨çº¿ç¨‹æ‰§è¡Œ()æ–¹æ³•å®Œæ¯•ã€‚å¦‚æœåœ¨ä¸€ä¸ªç±»çš„()æ–¹æ³•ä¸­æœ‰è€—æ—¶å¾ˆé•¿çš„æ“ä½œï¼Œå°±å¯èƒ½é€ æˆå¤šä¸ªè¿›ç¨‹é˜»å¡(éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå…¶ä»–çº¿ç¨‹è™½ç„¶ä¼šè¢«é˜»å¡ï¼Œä½†å¦‚æœæ‰§è¡Œ()æ–¹æ³•åï¼Œå…¶ä»–çº¿ç¨‹å”¤é†’ä¹‹åä¸ä¼šå†æ¬¡è¿›å…¥()æ–¹æ³•ã€‚åŒä¸€ä¸ªåŠ è½½å™¨ä¸‹ï¼Œä¸€ä¸ªç±»å‹åªä¼šåˆå§‹åŒ–ä¸€æ¬¡ã€‚)ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™ç§é˜»å¡å¾€å¾€æ˜¯å¾ˆéšè”½çš„ã€‚\næ•…è€Œï¼Œå¯ä»¥çœ‹å‡ºINSTANCEåœ¨åˆ›å»ºè¿‡ç¨‹ä¸­æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥è¯´é™æ€å†…éƒ¨ç±»å½¢å¼çš„å•ä¾‹å¯ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œä¹Ÿèƒ½ä¿è¯å•ä¾‹çš„å”¯ä¸€æ€§ï¼ŒåŒæ—¶ä¹Ÿå»¶è¿Ÿäº†å•ä¾‹çš„å®ä¾‹åŒ–ã€‚\né‚£ä¹ˆï¼Œæ˜¯ä¸æ˜¯å¯ä»¥è¯´é™æ€å†…éƒ¨ç±»å•ä¾‹å°±æ˜¯æœ€å®Œç¾çš„å•ä¾‹æ¨¡å¼äº†å‘¢ï¼Ÿå…¶å®ä¸ç„¶ï¼Œé™æ€å†…éƒ¨ç±»ä¹Ÿæœ‰ç€ä¸€ä¸ªè‡´å‘½çš„ç¼ºç‚¹ï¼Œå°±æ˜¯ä¼ å‚çš„é—®é¢˜ï¼Œç”±äºæ˜¯é™æ€å†…éƒ¨ç±»çš„å½¢å¼å»åˆ›å»ºå•ä¾‹çš„ï¼Œæ•…å¤–éƒ¨æ— æ³•ä¼ é€’å‚æ•°è¿›å»ï¼Œä¾‹å¦‚Contextè¿™ç§å‚æ•°ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åˆ›å»ºå•ä¾‹æ—¶ï¼Œå¯ä»¥åœ¨é™æ€å†…éƒ¨ç±»ä¸DCLæ¨¡å¼é‡Œè‡ªå·±æ–Ÿé…Œã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31  /**\r* çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼ï¼š\r* æ›´å¥½çš„æ˜¯é‡‡ç”¨ä¸‹é¢çš„æ–¹å¼ï¼Œæ—¢ä¸ç”¨åŠ é”ï¼Œä¹Ÿèƒ½å®ç°æ‡’åŠ è½½\r*/\rpublic class Singleton {\rprivate Singleton() {\rSystem.out.println(\u0026#34;single\u0026#34;);\r}\rprivate static class Inner {\rprivate static Singleton s = new Singleton();\r}\rpublic static Singleton getSingle() {\rreturn Inner.s;\r}\rpublic static void main(String[] args) {\rThread[] ths = new Thread[200];\rfor(int i=0; i\u0026lt;ths.length; i++) {\rths[i] = new Thread(()-\u0026gt;{\rSystem.out.println(Singleton.getSingle());\r});\r}\rArrays.asList(ths).forEach(o-\u0026gt;o.start());\r}\r}\r  é¢è¯•é¢˜ï¼šå”®ç¥¨é—®é¢˜  æœ‰Nå¼ ç«è½¦ç¥¨ï¼Œæ¯å¼ ç¥¨éƒ½æœ‰ä¸€ä¸ªç¼–å·ï¼ŒåŒæ—¶æœ‰10ä¸ªçª—å£å¯¹å¤–å”®ç¥¨ï¼Œè¯·å†™ä¸€ä¸ªæ¨¡æ‹Ÿç¨‹åºã€‚  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  public class TicketSeller1 {\rstatic List\u0026lt;String\u0026gt; tickets = new ArrayList\u0026lt;\u0026gt;();\rstatic {\rfor(int i=0; i\u0026lt;10000; i++) tickets.add(\u0026#34;ç¥¨ç¼–å·ï¼š\u0026#34; + i);\r}\rpublic static void main(String[] args) {\rfor(int i=0; i\u0026lt;10; i++) {\rnew Thread(()-\u0026gt;{\rwhile(tickets.size() \u0026gt; 0) {\rSystem.out.println(\u0026#34;é”€å”®äº†--\u0026#34; + tickets.remove(0));\r}\r}).start();\r}\r}\r}\r   ArrayListæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„æ‰€ä»¥ä¼šå‡ºç°é‡å¤é”€å”®çš„é—®é¢˜  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  public class TicketSeller2 {\rstatic Vector\u0026lt;String\u0026gt; tickets = new Vector\u0026lt;\u0026gt;();\rstatic {\rfor(int i=0; i\u0026lt;1000; i++) tickets.add(\u0026#34;ç¥¨ ç¼–å·ï¼š\u0026#34; + i);\r}\rpublic static void main(String[] args) {\rfor(int i=0; i\u0026lt;10; i++) {\rnew Thread(()-\u0026gt;{\rwhile(tickets.size() \u0026gt; 0) {\rtry {\rTimeUnit.MILLISECONDS.sleep(10);\r} catch (InterruptedException e) {\re.printStackTrace();\r}\rSystem.out.println(\u0026#34;é”€å”®äº†--\u0026#34; + tickets.remove(0));\r}\r}).start();\r}\r}\r}\r   ä¸Šé¢çš„ç¨‹åºè™½ç„¶ä½¿ç”¨äº†Vectorçº¿ç¨‹å®‰å…¨ç±»ï¼Œä½†æ˜¯çº¿ç¨‹ä¸šåŠ¡ä»£ç ä¸­ï¼Œåˆ¤æ–­sizeå’Œå‡ç¥¨è¿™ä¸¤ä¸ªæ“ä½œä¸æ˜¯åŸå­æ“ä½œï¼Œæ˜¯å¯åˆ†å¾—ï¼Œæ‰€ä»¥è¿˜æ˜¯ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå¯¼è‡´æ•°ç»„è¶Šç•Œé—®é¢˜  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  public class TicketSeller3 {\rstatic List\u0026lt;String\u0026gt; tickets = new LinkedList\u0026lt;\u0026gt;();\rstatic {\rfor(int i=0; i\u0026lt;1000; i++) tickets.add(\u0026#34;ç¥¨ ç¼–å·ï¼š\u0026#34; + i);\r}\rpublic static void main(String[] args) {\rfor(int i=0; i\u0026lt;10; i++) {\rnew Thread(()-\u0026gt;{\rwhile(true) {\rsynchronized(tickets) {\rif(tickets.size() \u0026lt;= 0) break;\rtry {\rTimeUnit.MILLISECONDS.sleep(10);\r} catch (InterruptedException e) {\re.printStackTrace();\r}\rSystem.out.println(\u0026#34;é”€å”®äº†--\u0026#34; + tickets.remove(0));\r}\r}\r}).start();\r}\r}\r}\r   å°±ç®—æ“ä½œAå’ŒBéƒ½æ˜¯åŒæ­¥çš„ï¼Œä½†Aå’ŒBç»„æˆçš„å¤åˆæ“ä½œä¹Ÿæœªå¿…æ˜¯åŒæ­¥çš„ï¼Œä»ç„¶éœ€è¦è‡ªå·±è¿›è¡ŒåŒæ­¥ï¼Œå°±åƒè¿™ä¸ªç¨‹åºï¼Œåˆ¤æ–­sizeå’Œè¿›è¡Œremoveå¿…é¡»æ˜¯ä¸€æ•´ä¸ªçš„åŸå­æ“ä½œ  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  public class TicketSeller4 {\rstatic Queue\u0026lt;String\u0026gt; tickets = new ConcurrentLinkedQueue\u0026lt;\u0026gt;();\rstatic {\rfor(int i=0; i\u0026lt;1000; i++) tickets.add(\u0026#34;ç¥¨ ç¼–å·ï¼š\u0026#34; + i);\r}\rpublic static void main(String[] args) {\tfor(int i=0; i\u0026lt;10; i++) {\rnew Thread(()-\u0026gt;{\rwhile(true) {\rString s = tickets.poll();\rif(s == null) break;\relse System.out.println(\u0026#34;é”€å”®äº†--\u0026#34; + s);\r}\r}).start();\r}\r}\r}\r   ä¸Šé¢çš„ç¨‹åºåˆ™æ˜¯ä½¿ç”¨ConcurrentQueueæé«˜å¹¶å‘æ€§  JUC  JUCä¹‹AQSï¼š https://juejin.im/entry/5ae02a7c6fb9a07ac76e7b70\n ","description":"tabs, code-tabs, expand, alert, warning, notice, img, box","id":47,"section":"posts","tags":["å¤šçº¿ç¨‹"],"title":"é©¬å£«å…µå¤šçº¿ç¨‹ç¬”è®°","uri":"https://mrxiaoling.github.io/en/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/%E9%A9%AC%E5%A3%AB%E5%85%B5%E5%A4%9A%E7%BA%BF%E7%A8%8B1/"}]